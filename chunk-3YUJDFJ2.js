import{d as ce,e as se,f as me,g as de}from"./chunk-QSBTSHDQ.js";import{a as ae,b as le}from"./chunk-Z4DGPOOH.js";import{a as pe}from"./chunk-Q3WAPXBZ.js";import{a as re,b as oe}from"./chunk-FT7W3TCN.js";import{c as ue}from"./chunk-XDBSTDCX.js";import{A as Z,F as ee,G as te,H as ie,I as ne,o as H,p as O,r as J,s as K,t as Q,u as h,w as U,x as X,y as Y}from"./chunk-SEJLOZK4.js";import{Ta as M,eb as D,fb as F}from"./chunk-JIESCAZN.js";import{$c as L,Cb as l,Lb as r,Mb as o,Nb as v,Ob as N,Pb as j,Rb as b,Sb as f,Tb as m,Wc as q,Xc as I,Yc as T,ad as V,bc as E,cb as a,cc as c,dc as C,fc as z,h as R,hc as B,ib as y,ic as G,jc as $,nc as P,ob as w,pa as d,qa as u,ub as g,vc as S,xc as k,yc as W,za as A}from"./chunk-IGXIJTVN.js";var he=(t,s)=>({"lg:before:bg-primary lg:before:absolute lg:before:top-1/2 lg:before:h-[2px] lg:before:w-5 lg:before:-translate-y-full xl:before:w-10":!0,"lg:ml-auto lg:before:-left-[calc(--spacing(5)+1px)] xl:before:-left-[calc(--spacing(10)+1px)]":t,"lg:before:-right-[calc(--spacing(5)+1px)] xl:before:-right-[calc(--spacing(10)+1px)]":s});function be(t,s){if(t&1){let i=b();r(0,"p-button",13),f("onClick",function(){d(i);let e=m();return u(e.onExperienceEdit.emit(e.experience))}),o()}t&2&&l("text",!0)}function ye(t,s){if(t&1){let i=b();r(0,"p-button",14),f("onClick",function(){d(i);let e=m();return u(e.onExperienceRemoved.emit(e.experience))}),o()}t&2&&l("text",!0)}function Ee(t,s){if(t&1&&(N(0),c(1),S(2,"date"),S(3,"date"),j()),t&2){let i=m();a(),z("",k(2,2,i.experience.start,"MM/yyyy")," - ",k(3,5,i.experience.end,"MM/yyyy"),"")}}function we(t,s){if(t&1&&(c(0),S(1,"date")),t&2){let i=m();C(k(1,1,i.experience.start,"dd/MM/yyyy"))}}function Se(t,s){if(t&1&&(r(0,"h3",15),c(1),o()),t&2){let i=m();a(),C(i.experience.company)}}function ke(t,s){if(t&1&&(r(0,"span"),c(1),o()),t&2){let i=m();a(),C(i.experience.address)}}function Ie(t,s){if(t&1&&(r(0,"span"),c(1),o()),t&2){let i=m();a(),z("",i.experience.city," ",i.experience.postcode,"")}}function Te(t,s){if(t&1&&(r(0,"p",16),c(1),o()),t&2){let i=m();a(),C(i.experience.text)}}function Ve(t,s){if(t&1&&(r(0,"li"),c(1),o()),t&2){let i=s.$implicit;a(),C(i)}}function Me(t,s){if(t&1&&(N(0),r(1,"h3",17),c(2,"Activit\xE9s"),o(),r(3,"ul",18),g(4,Ve,2,1,"li",19),o(),j()),t&2){let i=m();a(4),l("ngForOf",i.experience.activities.split(";"))}}var xe=(()=>{class t{constructor(i){this.authService=i,this.onExperienceRemoved=new A,this.onExperienceEdit=new A,this.user=null,this.authService.user().subscribe(p=>this.user=p)}static{this.\u0275fac=function(p){return new(p||t)(y(M))}}static{this.\u0275cmp=w({type:t,selectors:[["app-experience"]],inputs:{experience:"experience",right:"right"},outputs:{onExperienceRemoved:"onExperienceRemoved",onExperienceEdit:"onExperienceEdit"},decls:17,vars:15,consts:[["day",""],[1,"group","card","relative","flex","w-full","p-5","lg:w-[calc(50%-(--spacing(5)))]","lg:before:content-['']","xl:w-[calc(50%-(--spacing(10)))]","xl:p-10",3,"ngClass"],[1,"absolute","top-0","transition-opacity","group-hover:opacity-100","lg:opacity-0",3,"ngClass"],["icon","pi pi-pencil","size","small",3,"text","onClick",4,"ngIf"],["icon","pi pi-trash","size","small","severity","danger",3,"text","onClick",4,"ngIf"],[1,"flex","shrink","flex-col","border-0","border-r","border-solid","border-white/25","pr-5","text-end","lg:w-48","lg:shrink-0","xl:w-60"],[1,"text-primary","text-xs"],[4,"ngIf","ngIfElse"],["class","-mt-2 block text-lg leading-normal font-bold",4,"ngIf"],[4,"ngIf"],[1,"pl-5"],[1,"mb-3","text-xl","font-bold"],["class","mb-2",4,"ngIf"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"],[1,"-mt-2","block","text-lg","leading-normal","font-bold"],[1,"mb-2"],[1,"text-lg","font-bold"],[1,"list-inside","list-disc"],[4,"ngFor","ngForOf"]],template:function(p,e){if(p&1&&(r(0,"div",1)(1,"div",2),g(2,be,1,1,"p-button",3)(3,ye,1,1,"p-button",4),o(),r(4,"div",5)(5,"span",6),g(6,Ee,4,8,"ng-container",7)(7,we,2,4,"ng-template",null,0,W),o(),g(9,Se,2,1,"h3",8)(10,ke,2,1,"span",9)(11,Ie,2,2,"span",9),o(),r(12,"div",10)(13,"h2",11),c(14),o(),g(15,Te,2,1,"p",12)(16,Me,5,1,"ng-container",9),o()()),p&2){let n=E(8);l("ngClass",P(12,he,e.right,!e.right)),a(),l("ngClass",e.right?"right-0 lg:left-0":"right-0"),a(),l("ngIf",e.user&&e.user.roles.includes("admin")),a(),l("ngIf",e.user&&e.user.roles.includes("admin")),a(3),l("ngIf",e.experience.end)("ngIfElse",n),a(3),l("ngIf",e.experience.company),a(),l("ngIf",e.experience.address),a(),l("ngIf",e.experience.city||e.experience.postcode),a(3),C(e.experience.title),a(),l("ngIf",e.experience.text),a(),l("ngIf",e.experience.activities)}},dependencies:[V,q,I,T,L,F,D],encapsulation:2})}}return t})();function De(t,s){if(t&1){let i=b();r(0,"p-button",25),f("onClick",function(){d(i);let e=m();return u(e.openDialog())}),o()}t&2&&l("text",!0)}function Fe(t,s){if(t&1){let i=b();r(0,"app-experience",26),f("onExperienceRemoved",function(){let e=d(i).$implicit,n=m();return u(n.deleteExperience(e))})("onExperienceEdit",function(){let e=d(i).$implicit,n=m();return u(n.openDialog(e))}),o()}if(t&2){let i=s.$implicit,p=s.index;l("experience",i)("right",p%2!=0)}}function Ae(t,s){t&1&&(r(0,"span",27),c(1,"\xA0(Aucune activit\xE9)"),o())}function Ne(t,s){if(t&1){let i=b();r(0,"div",28)(1,"span",29),c(2),o(),r(3,"div",30)(4,"p-button",31),f("onClick",function(){let e=d(i).$implicit,n=m();return u(n.moveActivity(e,!0))}),o(),r(5,"p-button",32),f("onClick",function(){let e=d(i).$implicit,n=m();return u(n.moveActivity(e))}),o(),r(6,"p-button",33),f("onClick",function(){let e=d(i).$implicit,n=m();return u(n.removeActivity(e))}),o()()()}if(t&2){let i=s.$implicit,p=m();a(2),C(i),a(2),l("disabled",p.activities[0]==i)("text",!0),a(),l("disabled",p.activities[p.activities.length-1]==i)("text",!0),a(),l("text",!0)}}var lt=(()=>{class t{constructor(i,p,e){this.authService=i,this.confirmService=p,this.careerService=e,this.isDialogShown=!1,this.user=null,this.activities=[],this.idEdit="",this.formExperience=new Q({start:new h(new Date,[O.required]),end:new h(new Date,[]),title:new h("",[O.required]),text:new h("",[]),company:new h("",[]),address:new h("",[]),postcode:new h("",[]),city:new h("",[]),activities:new h("",[])}),this.experiences=[],this.openDialog=n=>{if(n){this.idEdit=n.id,n.activities&&n.activities.length&&(this.activities=n.activities.split(";"));let x=new re(n);delete x.id,this.formExperience.setValue(x)}else this.idEdit="",this.formExperience.reset(),this.activities=[];this.isDialogShown=!0},this.addActivity=n=>{this.activities.push(n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.removeActivity=n=>{this.activities=this.activities.filter(x=>x!=n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.moveActivity=(n,x=!1)=>{let _=this.activities.indexOf(n);if(!(_==0&&x||_==this.activities.length-1&&!x)){var fe=this.activities[_];this.activities.splice(_,1),this.activities.splice(_+(x?-1:1),0,fe)}},this.createExperience=()=>{this.careerService.createExperience(this.formExperience.value)},this.updateExperience=()=>{let n=this.formExperience.value;n.id=this.idEdit,this.careerService.updateExperience(n)},this.deleteExperience=n=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${n.title}' ?`,accept:()=>R(this,null,function*(){this.careerService.deleteExperience(n)})})},this.authService.user().subscribe(n=>this.user=n),this.careerService.experiences().subscribe(n=>this.experiences=n)}static{this.\u0275fac=function(p){return new(p||t)(y(M),y(pe),y(oe))}}static{this.\u0275cmp=w({type:t,selectors:[["app-career"]],decls:50,vars:13,consts:[["activity",""],[1,"flex","min-h-full","flex-col","justify-center","p-10"],["size","large","class","block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[1,"relative","w-full","grow","py-10"],[1,"bg-primary","absolute","top-1","left-1/2","h-full","w-[2px]","-translate-x-[calc(100%-1px)]","rounded-sm"],[1,"border-b-primary","absolute","top-0","left-1/2","-translate-x-[10px]","border-t-0","border-r-[10px]","border-b-[15px]","border-l-[10px]","border-solid","border-transparent"],["class","block nth-[n+4]:mt-5 lg:nth-[n+4]:-mt-10",3,"experience","right","onExperienceRemoved","onExperienceEdit",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col","[&>label]:gap-0",3,"formGroup"],["formControlName","start","appendTo","body","dateFormat","dd/mm/yy"],["formControlName","end","appendTo","body","dateFormat","dd/mm/yy"],["pInputText","","type","text","formControlName","title"],["pTextarea","","formControlName","text"],["pInputText","","formControlName","company"],["pInputText","","formControlName","address"],["pInputText","","formControlName","postcode"],["pInputText","","formControlName","city"],[1,"block!"],["class","opacity-50",4,"ngIf"],["class","group relative flex items-center justify-between ps-6 transition-colors after:absolute after:left-2 after:h-[6px] after:w-[6px] after:rounded-full after:bg-white after:opacity-50 after:content-[''] hover:bg-black/10",4,"ngFor","ngForOf"],["pInputText","","placeholder","Activit\xE9"],["icon","pi pi-plus",3,"onClick","disabled"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"block","text-center",3,"onClick","text"],[1,"block","nth-[n+4]:mt-5","lg:nth-[n+4]:-mt-10",3,"onExperienceRemoved","onExperienceEdit","experience","right"],[1,"opacity-50"],[1,"group","relative","flex","items-center","justify-between","ps-6","transition-colors","after:absolute","after:left-2","after:h-[6px]","after:w-[6px]","after:rounded-full","after:bg-white","after:opacity-50","after:content-['']","hover:bg-black/10"],[1,"block","max-w-[400px]","truncate","pe-2","opacity-50"],[1,"opacity-0","transition-opacity","group-hover:opacity-100"],["icon","pi pi-angle-up","styleClass","w-auto","size","small","severity","secondary",3,"onClick","disabled","text"],["icon","pi pi-angle-down","styleClass","w-auto","size","small","severity","secondary",3,"onClick","disabled","text"],["icon","pi pi-trash","styleClass","w-auto","size","small","severity","danger",3,"onClick","text"]],template:function(p,e){if(p&1){let n=b();r(0,"div",1),g(1,De,1,1,"p-button",2),r(2,"div",3),v(3,"div",4)(4,"div",5),g(5,Fe,1,2,"app-experience",6),o()(),r(6,"p-dialog",7),$("visibleChange",function(_){return d(n),G(e.isDialogShown,_)||(e.isDialogShown=_),u(_)}),r(7,"form",8)(8,"div")(9,"label"),c(10," D\xE9but "),v(11,"p-datepicker",9),o(),r(12,"label"),c(13," Fin "),v(14,"p-datepicker",10),o()(),r(15,"label"),c(16," Titre "),v(17,"input",11),o(),r(18,"label"),c(19," Texte "),v(20,"textarea",12),o(),r(21,"div")(22,"label"),c(23," Soci\xE9t\xE9 "),v(24,"input",13),o(),r(25,"label"),c(26," Adresse "),v(27,"input",14),o()(),r(28,"div")(29,"label"),c(30," Code postal "),v(31,"input",15),o(),r(32,"label"),c(33," Ville "),v(34,"input",16),o()(),r(35,"label",17),c(36," Activit\xE9s "),g(37,Ae,2,0,"span",18)(38,Ne,7,6,"div",19),o(),r(39,"label"),c(40," Ajouter une activit\xE9 "),r(41,"p-inputGroup"),v(42,"input",20,0),r(44,"p-button",21),f("onClick",function(){d(n);let _=E(43);return u(e.addActivity(_.value))}),o()()()(),r(45,"div",22)(46,"p-button",23),f("onClick",function(){return d(n),u(e.isDialogShown=!1)}),c(47,"Annuler"),o(),r(48,"p-button",24),f("onClick",function(){return d(n),e.idEdit.length?e.updateExperience():e.createExperience(),u(e.isDialogShown=!1)}),c(49),o()()()}if(p&2){let n=E(43);a(),l("ngIf",e.user&&e.user.roles.includes("admin")),a(4),l("ngForOf",e.experiences),a(),l("modal",!0)("header",(e.idEdit.length?"Modifier":"Ajouter")+" une exp\xE9rience")("dismissableMask",!0),B("visible",e.isDialogShown),a(),l("formGroup",e.formExperience),a(30),l("ngIf",!e.activities.length),a(),l("ngForOf",e.activities),a(6),l("disabled",!n.value),a(2),l("text",!0),a(2),l("disabled",!e.formExperience.valid),a(),C(e.idEdit.length?"Modifier":"Ajouter")}},dependencies:[V,I,T,Z,U,H,J,K,X,Y,xe,te,ee,se,ce,le,ae,ne,ie,F,D,de,me,ue],encapsulation:2})}}return t})();export{lt as CareerComponent};
