import{d as se,e as me,f as de,g as ue}from"./chunk-C4JIBKNA.js";import{a as le,b as pe}from"./chunk-P23SNOP6.js";import{a as ce}from"./chunk-HNWRCW5W.js";import{a as oe,b as ae}from"./chunk-TWJIMZ5I.js";import{c as xe}from"./chunk-ORC6S3ZY.js";import{A as ee,F as te,G as ie,H as ne,I as re,o as J,p as j,r as K,s as Q,t as U,u as h,w as X,x as Y,y as Z}from"./chunk-QMRBTZNI.js";import{Ta as M,eb as D,fb as F}from"./chunk-T6MD7DSL.js";import{$c as H,Aa as A,Cb as l,Lb as r,Mb as a,Nb as v,Ob as O,Pb as R,Rb as b,Sb as f,Tb as m,Wc as L,Xc as k,Yc as T,ad as V,bc as E,cb as o,cc as c,db as y,dc as C,fc as N,h as z,hc as B,ic as G,jc as $,mc as P,nc as W,ob as w,ra as d,sa as u,ub as g,vc as S,xc as I,yc as q}from"./chunk-JTNATHCN.js";var be=(t,s)=>({"lg:before:absolute lg:before:top-1/2 lg:before:h-[2px] lg:before:w-5 lg:before:-translate-y-full lg:before:bg-[green] xl:before:w-10":!0,"lg:ml-auto lg:before:-left-[calc(theme(spacing.5)+1px)] xl:before:-left-[calc(theme(spacing.10)+1px)]":t,"lg:flex-row-reverse lg:before:-right-[calc(theme(spacing.5)+1px)] xl:before:-right-[calc(theme(spacing.10)+1px)]":s}),ye=t=>({"text-start":t});function Ee(t,s){if(t&1){let i=b();r(0,"p-button",10),f("onClick",function(){d(i);let e=m();return u(e.onExperienceEdit.emit(e.experience))}),a()}t&2&&l("text",!0)}function we(t,s){if(t&1){let i=b();r(0,"p-button",11),f("onClick",function(){d(i);let e=m();return u(e.onExperienceRemoved.emit(e.experience))}),a()}t&2&&l("text",!0)}function Se(t,s){if(t&1&&(O(0),c(1),S(2,"date"),S(3,"date"),R()),t&2){let i=m();o(),N("",I(2,2,i.experience.start,"MM/yyyy")," - ",I(3,5,i.experience.end,"MM/yyyy"),"")}}function Ie(t,s){if(t&1&&(c(0),S(1,"date")),t&2){let i=m();C(I(1,1,i.experience.start,"dd/MM/yyyy"))}}function ke(t,s){if(t&1&&(r(0,"span"),c(1),a()),t&2){let i=m();o(),C(i.experience.company)}}function Te(t,s){if(t&1&&(r(0,"span"),c(1),a()),t&2){let i=m();o(),C(i.experience.address)}}function Ve(t,s){if(t&1&&(r(0,"span"),c(1),a()),t&2){let i=m();o(),N("",i.experience.city," ",i.experience.postcode,"")}}function Me(t,s){if(t&1&&(r(0,"p"),c(1),a()),t&2){let i=m();o(),C(i.experience.text)}}function De(t,s){if(t&1&&(r(0,"li"),c(1),a()),t&2){let i=s.$implicit;o(),C(i)}}function Fe(t,s){if(t&1&&(r(0,"ul",12),g(1,De,2,1,"li",13),a()),t&2){let i=m();l("dir",i.right?"":"rtl")("ngClass",P(3,ye,!i.right)),o(),l("ngForOf",i.experience.activities.split(";"))}}var fe=(()=>{class t{constructor(i){this.authService=i,this.onExperienceRemoved=new A,this.onExperienceEdit=new A,this.user=null,this.authService.user().subscribe(p=>this.user=p)}static{this.\u0275fac=function(p){return new(p||t)(y(M))}}static{this.\u0275cmp=w({type:t,selectors:[["app-experience"]],inputs:{experience:"experience",right:"right"},outputs:{onExperienceRemoved:"onExperienceRemoved",onExperienceEdit:"onExperienceEdit"},decls:17,vars:17,consts:[["day",""],[1,"group","card","relative","flex","w-full","p-5","lg:w-[calc(50%-theme(spacing.5))]","lg:before:content-['']","xl:w-[calc(50%-theme(spacing.10))]","xl:p-10",3,"ngClass"],[1,"absolute","top-0","transition-opacity","group-hover:opacity-100","lg:opacity-0",3,"ngClass"],["icon","pi pi-pencil","size","small",3,"text","onClick",4,"ngIf"],["icon","pi pi-trash","size","small","severity","danger",3,"text","onClick",4,"ngIf"],[1,"flex","shrink","flex-col","border-0","border-solid","border-white/25","lg:w-48","lg:shrink-0","xl:w-60","[&>*:last-child]:mb-0",3,"ngClass"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"[&>*:last-child]:mb-0",3,"ngClass"],[3,"dir","ngClass",4,"ngIf"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"],[3,"dir","ngClass"],[4,"ngFor","ngForOf"]],template:function(p,e){if(p&1&&(r(0,"div",1)(1,"div",2),g(2,Ee,1,1,"p-button",3)(3,we,1,1,"p-button",4),a(),r(4,"div",5)(5,"h3"),g(6,Se,4,8,"ng-container",6)(7,Ie,2,4,"ng-template",null,0,q),a(),g(9,ke,2,1,"span",7)(10,Te,2,1,"span",7)(11,Ve,2,2,"span",7),a(),r(12,"div",8)(13,"h3"),c(14),a(),g(15,Me,2,1,"p",7)(16,Fe,2,5,"ul",9),a()()),p&2){let n=E(8);l("ngClass",W(14,be,e.right,!e.right)),o(),l("ngClass",e.right?"right-0 lg:left-0":"right-0"),o(),l("ngIf",e.user&&e.user.roles.includes("admin")),o(),l("ngIf",e.user&&e.user.roles.includes("admin")),o(),l("ngClass",e.right?"mr-5 border-r pr-5 text-end":"mr-5 border-r pr-5 text-end lg:ml-5 lg:mr-0 lg:border-l lg:border-r-0 lg:pl-5 lg:text-start"),o(2),l("ngIf",e.experience.end)("ngIfElse",n),o(3),l("ngIf",e.experience.company),o(),l("ngIf",e.experience.address),o(),l("ngIf",e.experience.city||e.experience.postcode),o(),l("ngClass",e.right?"":"lg:text-end"),o(2),C(e.experience.title),o(),l("ngIf",e.experience.text),o(),l("ngIf",e.experience.activities)}},dependencies:[V,L,k,T,H,F,D],encapsulation:2})}}return t})();function Ae(t,s){if(t&1){let i=b();r(0,"p-button",25),f("onClick",function(){d(i);let e=m();return u(e.openDialog())}),a()}t&2&&l("text",!0)}function Ne(t,s){if(t&1){let i=b();r(0,"app-experience",26),f("onExperienceRemoved",function(){let e=d(i).$implicit,n=m();return u(n.deleteExperience(e))})("onExperienceEdit",function(){let e=d(i).$implicit,n=m();return u(n.openDialog(e))}),a()}if(t&2){let i=s.$implicit,p=s.index;l("experience",i)("right",p%2!=0)}}function je(t,s){t&1&&(r(0,"span",27),c(1,"\xA0(Aucune activit\xE9)"),a())}function ze(t,s){if(t&1){let i=b();r(0,"div",28)(1,"span",29),c(2),a(),r(3,"div",30)(4,"p-button",31),f("onClick",function(){let e=d(i).$implicit,n=m();return u(n.moveActivity(e,!0))}),a(),r(5,"p-button",32),f("onClick",function(){let e=d(i).$implicit,n=m();return u(n.moveActivity(e))}),a(),r(6,"p-button",33),f("onClick",function(){let e=d(i).$implicit,n=m();return u(n.removeActivity(e))}),a()()()}if(t&2){let i=s.$implicit,p=m();o(2),C(i),o(2),l("disabled",p.activities[0]==i)("text",!0),o(),l("disabled",p.activities[p.activities.length-1]==i)("text",!0),o(),l("text",!0)}}var ct=(()=>{class t{constructor(i,p,e){this.authService=i,this.confirmService=p,this.careerService=e,this.isDialogShown=!1,this.user=null,this.activities=[],this.idEdit="",this.formExperience=new U({start:new h(new Date,[j.required]),end:new h(new Date,[]),title:new h("",[j.required]),text:new h("",[]),company:new h("",[]),address:new h("",[]),postcode:new h("",[]),city:new h("",[]),activities:new h("",[])}),this.experiences=[],this.openDialog=n=>{if(n){this.idEdit=n.id,n.activities&&n.activities.length&&(this.activities=n.activities.split(";"));let x=new oe(n);delete x.id,this.formExperience.setValue(x)}else this.idEdit="",this.formExperience.reset(),this.activities=[];this.isDialogShown=!0},this.addActivity=n=>{this.activities.push(n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.removeActivity=n=>{this.activities=this.activities.filter(x=>x!=n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.moveActivity=(n,x=!1)=>{let _=this.activities.indexOf(n);if(!(_==0&&x||_==this.activities.length-1&&!x)){var _e=this.activities[_];this.activities.splice(_,1),this.activities.splice(_+(x?-1:1),0,_e)}},this.createExperience=()=>{this.careerService.createExperience(this.formExperience.value)},this.updateExperience=()=>{let n=this.formExperience.value;n.id=this.idEdit,this.careerService.updateExperience(n)},this.deleteExperience=n=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${n.title}' ?`,accept:()=>z(this,null,function*(){this.careerService.deleteExperience(n)})})},this.authService.user().subscribe(n=>this.user=n),this.careerService.experiences().subscribe(n=>this.experiences=n)}static{this.\u0275fac=function(p){return new(p||t)(y(M),y(ce),y(ae))}}static{this.\u0275cmp=w({type:t,selectors:[["app-career"]],decls:50,vars:13,consts:[["activity",""],[1,"flex","min-h-full","flex-col","justify-center","gap-10","p-10","lg:px-0"],["size","large","class","block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[1,"relative","w-full","grow","py-10"],[1,"absolute","left-1/2","top-1","h-full","w-[2px]","-translate-x-[calc(100%-1px)]","rounded","bg-[green]"],[1,"absolute","left-1/2","top-0","-translate-x-[10px]","border-b-[15px]","border-l-[10px]","border-r-[10px]","border-t-0","border-solid","border-transparent","border-b-[green]"],["class","block [&:nth-child(n+4)]:mt-5 lg:[&:nth-child(n+4)]:-mt-10",3,"experience","right","onExperienceRemoved","onExperienceEdit",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&>label]:gap-0","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col",3,"formGroup"],["formControlName","start","appendTo","body","dateFormat","dd/mm/yy"],["formControlName","end","appendTo","body","dateFormat","dd/mm/yy"],["pInputText","","type","text","formControlName","title"],["pTextarea","","formControlName","text"],["pInputText","","formControlName","company"],["pInputText","","formControlName","address"],["pInputText","","formControlName","postcode"],["pInputText","","formControlName","city"],[1,"!block"],["class","opacity-50",4,"ngIf"],["class","group relative flex items-center justify-between ps-6 transition-colors after:absolute after:left-2 after:h-[6px] after:w-[6px] after:rounded-full after:bg-white after:opacity-50 after:content-[''] hover:bg-black/10",4,"ngFor","ngForOf"],["pInputText","","placeholder","Activit\xE9"],["icon","pi pi-plus",3,"onClick","disabled"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"block","text-center",3,"onClick","text"],[1,"block","[&:nth-child(n+4)]:mt-5","lg:[&:nth-child(n+4)]:-mt-10",3,"onExperienceRemoved","onExperienceEdit","experience","right"],[1,"opacity-50"],[1,"group","relative","flex","items-center","justify-between","ps-6","transition-colors","after:absolute","after:left-2","after:h-[6px]","after:w-[6px]","after:rounded-full","after:bg-white","after:opacity-50","after:content-['']","hover:bg-black/10"],[1,"block","max-w-[400px]","truncate","pe-2","opacity-50"],[1,"opacity-0","transition-opacity","group-hover:opacity-100"],["icon","pi pi-angle-up","styleClass","w-auto","size","small","severity","secondary",3,"onClick","disabled","text"],["icon","pi pi-angle-down","styleClass","w-auto","size","small","severity","secondary",3,"onClick","disabled","text"],["icon","pi pi-trash","styleClass","w-auto","size","small","severity","danger",3,"onClick","text"]],template:function(p,e){if(p&1){let n=b();r(0,"div",1),g(1,Ae,1,1,"p-button",2),r(2,"div",3),v(3,"div",4)(4,"div",5),g(5,Ne,1,2,"app-experience",6),a()(),r(6,"p-dialog",7),$("visibleChange",function(_){return d(n),G(e.isDialogShown,_)||(e.isDialogShown=_),u(_)}),r(7,"form",8)(8,"div")(9,"label"),c(10," D\xE9but "),v(11,"p-datepicker",9),a(),r(12,"label"),c(13," Fin "),v(14,"p-datepicker",10),a()(),r(15,"label"),c(16," Titre "),v(17,"input",11),a(),r(18,"label"),c(19," Texte "),v(20,"textarea",12),a(),r(21,"div")(22,"label"),c(23," Soci\xE9t\xE9 "),v(24,"input",13),a(),r(25,"label"),c(26," Adresse "),v(27,"input",14),a()(),r(28,"div")(29,"label"),c(30," Code postal "),v(31,"input",15),a(),r(32,"label"),c(33," Ville "),v(34,"input",16),a()(),r(35,"label",17),c(36," Activit\xE9s "),g(37,je,2,0,"span",18)(38,ze,7,6,"div",19),a(),r(39,"label"),c(40," Ajouter une activit\xE9 "),r(41,"p-inputGroup"),v(42,"input",20,0),r(44,"p-button",21),f("onClick",function(){d(n);let _=E(43);return u(e.addActivity(_.value))}),a()()()(),r(45,"div",22)(46,"p-button",23),f("onClick",function(){return d(n),u(e.isDialogShown=!1)}),c(47,"Annuler"),a(),r(48,"p-button",24),f("onClick",function(){return d(n),e.idEdit.length?e.updateExperience():e.createExperience(),u(e.isDialogShown=!1)}),c(49),a()()()}if(p&2){let n=E(43);o(),l("ngIf",e.user&&e.user.roles.includes("admin")),o(4),l("ngForOf",e.experiences),o(),l("modal",!0)("header",(e.idEdit.length?"Modifier":"Ajouter")+" une exp\xE9rience")("dismissableMask",!0),B("visible",e.isDialogShown),o(),l("formGroup",e.formExperience),o(30),l("ngIf",!e.activities.length),o(),l("ngForOf",e.activities),o(6),l("disabled",!n.value),o(2),l("text",!0),o(2),l("disabled",!e.formExperience.valid),o(),C(e.idEdit.length?"Modifier":"Ajouter")}},dependencies:[V,k,T,ee,X,J,K,Q,Y,Z,fe,ie,te,me,se,pe,le,re,ne,F,D,ue,de,xe],encapsulation:2})}}return t})();export{ct as CareerComponent};
