import{d as se,e as me,f as de,g as ue}from"./chunk-QSBTSHDQ.js";import{a as le,b as pe}from"./chunk-Z4DGPOOH.js";import{a as ce}from"./chunk-Q3WAPXBZ.js";import{a as oe,b as ae}from"./chunk-FT7W3TCN.js";import{c as xe}from"./chunk-XDBSTDCX.js";import{A as ee,F as te,G as ie,H as ne,I as re,o as J,p as R,r as K,s as Q,t as U,u as h,w as X,x as Y,y as Z}from"./chunk-SEJLOZK4.js";import{Ta as M,eb as D,fb as F}from"./chunk-JIESCAZN.js";import{$c as H,Cb as l,Lb as r,Mb as a,Nb as v,Ob as N,Pb as j,Rb as b,Sb as f,Tb as m,Wc as L,Xc as k,Yc as T,ad as V,bc as E,cb as o,cc as c,dc as C,fc as z,h as B,hc as G,ib as y,ic as $,jc as P,mc as O,nc as W,ob as w,pa as d,qa as u,ub as g,vc as S,xc as I,yc as q,za as A}from"./chunk-IGXIJTVN.js";var be=(e,s)=>({"lg:before:absolute lg:before:top-1/2 lg:before:h-[2px] lg:before:w-5 lg:before:-translate-y-full lg:before:bg-[green] xl:before:w-10":!0,"lg:ml-auto lg:before:-left-[calc(--spacing(5)+1px)] xl:before:-left-[calc(--spacing(10)+1px)]":e,"lg:flex-row-reverse lg:before:-right-[calc(--spacing(5)+1px)] xl:before:-right-[calc(--spacing(10)+1px)]":s}),ye=e=>({"text-end":e}),Ee=e=>({"text-start":e});function we(e,s){if(e&1){let i=b();r(0,"p-button",12),f("onClick",function(){d(i);let t=m();return u(t.onExperienceEdit.emit(t.experience))}),a()}e&2&&l("text",!0)}function Se(e,s){if(e&1){let i=b();r(0,"p-button",13),f("onClick",function(){d(i);let t=m();return u(t.onExperienceRemoved.emit(t.experience))}),a()}e&2&&l("text",!0)}function Ie(e,s){if(e&1&&(N(0),c(1),S(2,"date"),S(3,"date"),j()),e&2){let i=m();o(),z("",I(2,2,i.experience.start,"MM/yyyy")," - ",I(3,5,i.experience.end,"MM/yyyy"),"")}}function ke(e,s){if(e&1&&(c(0),S(1,"date")),e&2){let i=m();C(I(1,1,i.experience.start,"dd/MM/yyyy"))}}function Te(e,s){if(e&1&&(r(0,"h3",14),c(1),a()),e&2){let i=m();o(),C(i.experience.company)}}function Ve(e,s){if(e&1&&(r(0,"span"),c(1),a()),e&2){let i=m();o(),C(i.experience.address)}}function Me(e,s){if(e&1&&(r(0,"span"),c(1),a()),e&2){let i=m();o(),z("",i.experience.city," ",i.experience.postcode,"")}}function De(e,s){if(e&1&&(r(0,"p",15),c(1),a()),e&2){let i=m();o(),C(i.experience.text)}}function Fe(e,s){if(e&1&&(r(0,"li"),c(1),a()),e&2){let i=s.$implicit;o(),C(i)}}function Ae(e,s){if(e&1&&(N(0),r(1,"h3",14),c(2,"Activit\xE9s"),a(),r(3,"ul",16),g(4,Fe,2,1,"li",17),a(),j()),e&2){let i=m();o(3),l("dir",i.right?"ltr":"rtl")("ngClass",O(3,Ee,!i.right)),o(),l("ngForOf",i.experience.activities.split(";"))}}var fe=(()=>{class e{constructor(i){this.authService=i,this.onExperienceRemoved=new A,this.onExperienceEdit=new A,this.user=null,this.authService.user().subscribe(p=>this.user=p)}static{this.\u0275fac=function(p){return new(p||e)(y(M))}}static{this.\u0275cmp=w({type:e,selectors:[["app-experience"]],inputs:{experience:"experience",right:"right"},outputs:{onExperienceRemoved:"onExperienceRemoved",onExperienceEdit:"onExperienceEdit"},decls:17,vars:19,consts:[["day",""],[1,"group","card","relative","flex","w-full","p-5","lg:w-[calc(50%-(--spacing(5)))]","lg:before:content-['']","xl:w-[calc(50%-(--spacing(10)))]","xl:p-10",3,"ngClass"],[1,"absolute","top-0","transition-opacity","group-hover:opacity-100","lg:opacity-0",3,"ngClass"],["icon","pi pi-pencil","size","small",3,"text","onClick",4,"ngIf"],["icon","pi pi-trash","size","small","severity","danger",3,"text","onClick",4,"ngIf"],[1,"flex","shrink","flex-col","border-0","border-solid","border-white/25","lg:w-48","lg:shrink-0","xl:w-60",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","text-lg font-bold",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[1,"mb-3","text-xl","font-bold"],["class","mb-2",4,"ngIf"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"],[1,"text-lg","font-bold"],[1,"mb-2"],[1,"list-inside","list-disc",3,"dir","ngClass"],[4,"ngFor","ngForOf"]],template:function(p,t){if(p&1&&(r(0,"div",1)(1,"div",2),g(2,we,1,1,"p-button",3)(3,Se,1,1,"p-button",4),a(),r(4,"div",5)(5,"i"),g(6,Ie,4,8,"ng-container",6)(7,ke,2,4,"ng-template",null,0,q),a(),g(9,Te,2,1,"h3",7)(10,Ve,2,1,"span",8)(11,Me,2,2,"span",8),a(),r(12,"div",9)(13,"h2",10),c(14),a(),g(15,De,2,1,"p",11)(16,Ae,5,5,"ng-container",8),a()()),p&2){let n=E(8);l("ngClass",W(14,be,t.right,!t.right)),o(),l("ngClass",t.right?"right-0 lg:left-0":"right-0"),o(),l("ngIf",t.user&&t.user.roles.includes("admin")),o(),l("ngIf",t.user&&t.user.roles.includes("admin")),o(),l("ngClass",t.right?"mr-5 border-r pr-5 text-end":"mr-5 border-r pr-5 text-end lg:mr-0 lg:ml-5 lg:border-r-0 lg:border-l lg:pl-5 lg:text-start"),o(2),l("ngIf",t.experience.end)("ngIfElse",n),o(3),l("ngIf",t.experience.company),o(),l("ngIf",t.experience.address),o(),l("ngIf",t.experience.city||t.experience.postcode),o(),l("ngClass",O(17,ye,!t.right)),o(2),C(t.experience.title),o(),l("ngIf",t.experience.text),o(),l("ngIf",t.experience.activities)}},dependencies:[V,L,k,T,H,F,D],encapsulation:2})}}return e})();function Ne(e,s){if(e&1){let i=b();r(0,"p-button",25),f("onClick",function(){d(i);let t=m();return u(t.openDialog())}),a()}e&2&&l("text",!0)}function je(e,s){if(e&1){let i=b();r(0,"app-experience",26),f("onExperienceRemoved",function(){let t=d(i).$implicit,n=m();return u(n.deleteExperience(t))})("onExperienceEdit",function(){let t=d(i).$implicit,n=m();return u(n.openDialog(t))}),a()}if(e&2){let i=s.$implicit,p=s.index;l("experience",i)("right",p%2!=0)}}function ze(e,s){e&1&&(r(0,"span",27),c(1,"\xA0(Aucune activit\xE9)"),a())}function Oe(e,s){if(e&1){let i=b();r(0,"div",28)(1,"span",29),c(2),a(),r(3,"div",30)(4,"p-button",31),f("onClick",function(){let t=d(i).$implicit,n=m();return u(n.moveActivity(t,!0))}),a(),r(5,"p-button",32),f("onClick",function(){let t=d(i).$implicit,n=m();return u(n.moveActivity(t))}),a(),r(6,"p-button",33),f("onClick",function(){let t=d(i).$implicit,n=m();return u(n.removeActivity(t))}),a()()()}if(e&2){let i=s.$implicit,p=m();o(2),C(i),o(2),l("disabled",p.activities[0]==i)("text",!0),o(),l("disabled",p.activities[p.activities.length-1]==i)("text",!0),o(),l("text",!0)}}var st=(()=>{class e{constructor(i,p,t){this.authService=i,this.confirmService=p,this.careerService=t,this.isDialogShown=!1,this.user=null,this.activities=[],this.idEdit="",this.formExperience=new U({start:new h(new Date,[R.required]),end:new h(new Date,[]),title:new h("",[R.required]),text:new h("",[]),company:new h("",[]),address:new h("",[]),postcode:new h("",[]),city:new h("",[]),activities:new h("",[])}),this.experiences=[],this.openDialog=n=>{if(n){this.idEdit=n.id,n.activities&&n.activities.length&&(this.activities=n.activities.split(";"));let x=new oe(n);delete x.id,this.formExperience.setValue(x)}else this.idEdit="",this.formExperience.reset(),this.activities=[];this.isDialogShown=!0},this.addActivity=n=>{this.activities.push(n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.removeActivity=n=>{this.activities=this.activities.filter(x=>x!=n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.moveActivity=(n,x=!1)=>{let _=this.activities.indexOf(n);if(!(_==0&&x||_==this.activities.length-1&&!x)){var _e=this.activities[_];this.activities.splice(_,1),this.activities.splice(_+(x?-1:1),0,_e)}},this.createExperience=()=>{this.careerService.createExperience(this.formExperience.value)},this.updateExperience=()=>{let n=this.formExperience.value;n.id=this.idEdit,this.careerService.updateExperience(n)},this.deleteExperience=n=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${n.title}' ?`,accept:()=>B(this,null,function*(){this.careerService.deleteExperience(n)})})},this.authService.user().subscribe(n=>this.user=n),this.careerService.experiences().subscribe(n=>this.experiences=n)}static{this.\u0275fac=function(p){return new(p||e)(y(M),y(ce),y(ae))}}static{this.\u0275cmp=w({type:e,selectors:[["app-career"]],decls:50,vars:13,consts:[["activity",""],[1,"flex","min-h-full","flex-col","justify-center","p-10"],["size","large","class","block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[1,"relative","w-full","grow","py-10"],[1,"absolute","top-1","left-1/2","h-full","w-[2px]","-translate-x-[calc(100%-1px)]","rounded-sm","bg-[green]"],[1,"absolute","top-0","left-1/2","-translate-x-[10px]","border-t-0","border-r-[10px]","border-b-[15px]","border-l-[10px]","border-solid","border-transparent","border-b-[green]"],["class","block nth-[n+4]:mt-5 lg:nth-[n+4]:-mt-10",3,"experience","right","onExperienceRemoved","onExperienceEdit",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col","[&>label]:gap-0",3,"formGroup"],["formControlName","start","appendTo","body","dateFormat","dd/mm/yy"],["formControlName","end","appendTo","body","dateFormat","dd/mm/yy"],["pInputText","","type","text","formControlName","title"],["pTextarea","","formControlName","text"],["pInputText","","formControlName","company"],["pInputText","","formControlName","address"],["pInputText","","formControlName","postcode"],["pInputText","","formControlName","city"],[1,"block!"],["class","opacity-50",4,"ngIf"],["class","group relative flex items-center justify-between ps-6 transition-colors after:absolute after:left-2 after:h-[6px] after:w-[6px] after:rounded-full after:bg-white after:opacity-50 after:content-[''] hover:bg-black/10",4,"ngFor","ngForOf"],["pInputText","","placeholder","Activit\xE9"],["icon","pi pi-plus",3,"onClick","disabled"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"block","text-center",3,"onClick","text"],[1,"block","nth-[n+4]:mt-5","lg:nth-[n+4]:-mt-10",3,"onExperienceRemoved","onExperienceEdit","experience","right"],[1,"opacity-50"],[1,"group","relative","flex","items-center","justify-between","ps-6","transition-colors","after:absolute","after:left-2","after:h-[6px]","after:w-[6px]","after:rounded-full","after:bg-white","after:opacity-50","after:content-['']","hover:bg-black/10"],[1,"block","max-w-[400px]","truncate","pe-2","opacity-50"],[1,"opacity-0","transition-opacity","group-hover:opacity-100"],["icon","pi pi-angle-up","styleClass","w-auto","size","small","severity","secondary",3,"onClick","disabled","text"],["icon","pi pi-angle-down","styleClass","w-auto","size","small","severity","secondary",3,"onClick","disabled","text"],["icon","pi pi-trash","styleClass","w-auto","size","small","severity","danger",3,"onClick","text"]],template:function(p,t){if(p&1){let n=b();r(0,"div",1),g(1,Ne,1,1,"p-button",2),r(2,"div",3),v(3,"div",4)(4,"div",5),g(5,je,1,2,"app-experience",6),a()(),r(6,"p-dialog",7),P("visibleChange",function(_){return d(n),$(t.isDialogShown,_)||(t.isDialogShown=_),u(_)}),r(7,"form",8)(8,"div")(9,"label"),c(10," D\xE9but "),v(11,"p-datepicker",9),a(),r(12,"label"),c(13," Fin "),v(14,"p-datepicker",10),a()(),r(15,"label"),c(16," Titre "),v(17,"input",11),a(),r(18,"label"),c(19," Texte "),v(20,"textarea",12),a(),r(21,"div")(22,"label"),c(23," Soci\xE9t\xE9 "),v(24,"input",13),a(),r(25,"label"),c(26," Adresse "),v(27,"input",14),a()(),r(28,"div")(29,"label"),c(30," Code postal "),v(31,"input",15),a(),r(32,"label"),c(33," Ville "),v(34,"input",16),a()(),r(35,"label",17),c(36," Activit\xE9s "),g(37,ze,2,0,"span",18)(38,Oe,7,6,"div",19),a(),r(39,"label"),c(40," Ajouter une activit\xE9 "),r(41,"p-inputGroup"),v(42,"input",20,0),r(44,"p-button",21),f("onClick",function(){d(n);let _=E(43);return u(t.addActivity(_.value))}),a()()()(),r(45,"div",22)(46,"p-button",23),f("onClick",function(){return d(n),u(t.isDialogShown=!1)}),c(47,"Annuler"),a(),r(48,"p-button",24),f("onClick",function(){return d(n),t.idEdit.length?t.updateExperience():t.createExperience(),u(t.isDialogShown=!1)}),c(49),a()()()}if(p&2){let n=E(43);o(),l("ngIf",t.user&&t.user.roles.includes("admin")),o(4),l("ngForOf",t.experiences),o(),l("modal",!0)("header",(t.idEdit.length?"Modifier":"Ajouter")+" une exp\xE9rience")("dismissableMask",!0),G("visible",t.isDialogShown),o(),l("formGroup",t.formExperience),o(30),l("ngIf",!t.activities.length),o(),l("ngForOf",t.activities),o(6),l("disabled",!n.value),o(2),l("text",!0),o(2),l("disabled",!t.formExperience.valid),o(),C(t.idEdit.length?"Modifier":"Ajouter")}},dependencies:[V,k,T,ee,X,J,K,Q,Y,Z,fe,ie,te,me,se,pe,le,re,ne,F,D,ue,de,xe],encapsulation:2})}}return e})();export{st as CareerComponent};
