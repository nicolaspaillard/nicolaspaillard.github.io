import{$ as Fc,$a as mr,A as Sc,B as Ot,C as Rc,D as Pc,Fa as Be,H as kc,L as Nc,P as fi,Pa as Uc,Q as cr,Qa as fr,R as ho,Ra as Gc,S as hr,T as fo,U as po,Va as pr,Xa as dn,Ya as $c,Z as mo,a as mc,aa as Oc,b as gc,bb as jc,c as _c,e as yc,ea as go,eb as Hc,ha as Lc,i as vc,ka as Bc,la as dr,m as Le,n as wc,o as Kt,p as Ic,r as Ec,s as Tc,t as bc,u as Ac,ua as zc,v as Cc,va as qc,w as di,x as Vc,y as xc,z as Dc}from"./chunk-JIESCAZN.js";import{$ as sr,Aa as ar,Bb as Ht,Cb as z,D as Yu,Da as Js,Eb as li,Ec as lc,Fa as ai,Fb as eo,Gb as be,Gc as at,Hc as ur,Ic as ci,J as Xu,Ja as Ju,Jc as Ae,Lb as ft,Mb as _t,Mc as so,Nb as Nt,Ob as un,Pb as cn,Pc as uc,Qb as ui,Rb as hn,Sb as zt,Tb as X,Ub as ec,Vb as no,Wc as cc,Xb as le,Yb as lr,Yc as hc,Zb as Mt,Zc as dc,_b as Ft,_c as fc,a as ht,aa as ri,ad as pc,b as jt,ba as si,bc as nc,ca as ne,cb as j,cc as ic,cd as hi,dc as rc,ea as ie,h as P,ha as re,hb as to,ia as oi,ib as tt,ja as Zu,kc as ue,kd as Mc,lc as sc,ld as oo,mc as io,nc as oc,o as Qu,oa as on,ob as an,oc as ac,od as ao,pa as se,pb as ae,qa as oe,qb as xt,qd as lo,ra as or,rd as uo,sa as Rt,sb as dt,tb as ln,td as co,ua as Zs,ub as st,wb as tc,y as Wu,yc as ro,za as Vt}from"./chunk-IGXIJTVN.js";var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qc={};var ce,_o;(function(){var n;function t(w,p){function _(){}_.prototype=p.prototype,w.D=p.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(y,v,T){for(var g=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)g[Jt-2]=arguments[Jt];return p.prototype[v].apply(y,g)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,p,_){_||(_=0);var y=Array(16);if(typeof p=="string")for(var v=0;16>v;++v)y[v]=p.charCodeAt(_++)|p.charCodeAt(_++)<<8|p.charCodeAt(_++)<<16|p.charCodeAt(_++)<<24;else for(v=0;16>v;++v)y[v]=p[_++]|p[_++]<<8|p[_++]<<16|p[_++]<<24;p=w.g[0],_=w.g[1],v=w.g[2];var T=w.g[3],g=p+(T^_&(v^T))+y[0]+3614090360&4294967295;p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[1]+3905402710&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[2]+606105819&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[3]+3250441966&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(T^_&(v^T))+y[4]+4118548399&4294967295,p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[5]+1200080426&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[6]+2821735955&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[7]+4249261313&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(T^_&(v^T))+y[8]+1770035416&4294967295,p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[9]+2336552879&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[10]+4294925233&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[11]+2304563134&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(T^_&(v^T))+y[12]+1804603682&4294967295,p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[13]+4254626195&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[14]+2792965006&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[15]+1236535329&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(v^T&(_^v))+y[1]+4129170786&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[6]+3225465664&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[11]+643717713&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[0]+3921069994&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(_^v))+y[5]+3593408605&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[10]+38016083&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[15]+3634488961&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[4]+3889429448&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(_^v))+y[9]+568446438&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[14]+3275163606&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[3]+4107603335&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[8]+1163531501&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(_^v))+y[13]+2850285829&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[2]+4243563512&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[7]+1735328473&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[12]+2368359562&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(_^v^T)+y[5]+4294588738&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[8]+2272392833&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[11]+1839030562&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[14]+4259657740&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(_^v^T)+y[1]+2763975236&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[4]+1272893353&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[7]+4139469664&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[10]+3200236656&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(_^v^T)+y[13]+681279174&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[0]+3936430074&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[3]+3572445317&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[6]+76029189&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(_^v^T)+y[9]+3654602809&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[12]+3873151461&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[15]+530742520&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[2]+3299628645&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(v^(_|~T))+y[0]+4096336452&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[7]+1126891415&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[14]+2878612391&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[5]+4237533241&4294967295,_=v+(g<<21&4294967295|g>>>11),g=p+(v^(_|~T))+y[12]+1700485571&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[3]+2399980690&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[10]+4293915773&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[1]+2240044497&4294967295,_=v+(g<<21&4294967295|g>>>11),g=p+(v^(_|~T))+y[8]+1873313359&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[15]+4264355552&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[6]+2734768916&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[13]+1309151649&4294967295,_=v+(g<<21&4294967295|g>>>11),g=p+(v^(_|~T))+y[4]+4149444226&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[11]+3174756917&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[2]+718787259&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(v+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+v&4294967295,w.g[3]=w.g[3]+T&4294967295}i.prototype.u=function(w,p){p===void 0&&(p=w.length);for(var _=p-this.blockSize,y=this.B,v=this.h,T=0;T<p;){if(v==0)for(;T<=_;)r(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<p;)if(y[v++]=w.charCodeAt(T++),v==this.blockSize){r(this,y),v=0;break}}else for(;T<p;)if(y[v++]=w[T++],v==this.blockSize){r(this,y),v=0;break}}this.h=v,this.o+=p},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;var _=8*this.o;for(p=w.length-8;p<w.length;++p)w[p]=_&255,_/=256;for(this.u(w),w=Array(16),p=_=0;4>p;++p)for(var y=0;32>y;y+=8)w[_++]=this.g[p]>>>y&255;return w};function o(w,p){var _=c;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=p(w)}function a(w,p){this.h=p;for(var _=[],y=!0,v=w.length-1;0<=v;v--){var T=w[v]|0;y&&T==p||(_[v]=T,y=!1)}this.g=_}var c={};function h(w){return-128<=w&&128>w?o(w,function(p){return new a([p|0],0>p?-1:0)}):new a([w|0],0>w?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return E;if(0>w)return S(f(-w));for(var p=[],_=1,y=0;w>=_;y++)p[y]=w/_|0,_*=4294967296;return new a(p,0)}function m(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return S(m(w.substring(1),p));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(p,8)),y=E,v=0;v<w.length;v+=8){var T=Math.min(8,w.length-v),g=parseInt(w.substring(v,v+T),p);8>T?(T=f(Math.pow(p,T)),y=y.j(T).add(f(g))):(y=y.j(_),y=y.add(f(g)))}return y}var E=h(0),b=h(1),x=h(16777216);n=a.prototype,n.m=function(){if(M(this))return-S(this).m();for(var w=0,p=1,_=0;_<this.g.length;_++){var y=this.i(_);w+=(0<=y?y:4294967296+y)*p,p*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(M(this))return"-"+S(this).toString(w);for(var p=f(Math.pow(w,6)),_=this,y="";;){var v=it(_,p).g;_=H(_,v.j(p));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=v,N(_))return T+y;for(;6>T.length;)T="0"+T;y=T+y}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(var p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=H(this,w),M(w)?-1:N(w)?0:1};function S(w){for(var p=w.g.length,_=[],y=0;y<p;y++)_[y]=~w.g[y];return new a(_,~w.h).add(b)}n.abs=function(){return M(this)?S(this):this},n.add=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0,v=0;v<=p;v++){var T=y+(this.i(v)&65535)+(w.i(v)&65535),g=(T>>>16)+(this.i(v)>>>16)+(w.i(v)>>>16);y=g>>>16,T&=65535,g&=65535,_[v]=g<<16|T}return new a(_,_[_.length-1]&-2147483648?-1:0)};function H(w,p){return w.add(S(p))}n.j=function(w){if(N(this)||N(w))return E;if(M(this))return M(w)?S(this).j(S(w)):S(S(this).j(w));if(M(w))return S(this.j(S(w)));if(0>this.l(x)&&0>w.l(x))return f(this.m()*w.m());for(var p=this.g.length+w.g.length,_=[],y=0;y<2*p;y++)_[y]=0;for(y=0;y<this.g.length;y++)for(var v=0;v<w.g.length;v++){var T=this.i(y)>>>16,g=this.i(y)&65535,Jt=w.i(v)>>>16,Bn=w.i(v)&65535;_[2*y+2*v]+=g*Bn,$(_,2*y+2*v),_[2*y+2*v+1]+=T*Bn,$(_,2*y+2*v+1),_[2*y+2*v+1]+=g*Jt,$(_,2*y+2*v+1),_[2*y+2*v+2]+=T*Jt,$(_,2*y+2*v+2)}for(y=0;y<p;y++)_[y]=_[2*y+1]<<16|_[2*y];for(y=p;y<2*p;y++)_[y]=0;return new a(_,0)};function $(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function K(w,p){this.g=w,this.h=p}function it(w,p){if(N(p))throw Error("division by zero");if(N(w))return new K(E,E);if(M(w))return p=it(S(w),p),new K(S(p.g),S(p.h));if(M(p))return p=it(w,S(p)),new K(S(p.g),p.h);if(30<w.g.length){if(M(w)||M(p))throw Error("slowDivide_ only works with positive integers.");for(var _=b,y=p;0>=y.l(w);)_=kt(_),y=kt(y);var v=Z(_,1),T=Z(y,1);for(y=Z(y,2),_=Z(_,2);!N(y);){var g=T.add(y);0>=g.l(w)&&(v=v.add(_),T=g),y=Z(y,1),_=Z(_,1)}return p=H(w,v.j(p)),new K(v,p)}for(v=E;0<=w.l(p);){for(_=Math.max(1,Math.floor(w.m()/p.m())),y=Math.ceil(Math.log(_)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),T=f(_),g=T.j(p);M(g)||0<g.l(w);)_-=y,T=f(_),g=T.j(p);N(T)&&(T=b),v=v.add(T),w=H(w,g)}return new K(v,w)}n.A=function(w){return it(this,w).h},n.and=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0;y<p;y++)_[y]=this.i(y)&w.i(y);return new a(_,this.h&w.h)},n.or=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0;y<p;y++)_[y]=this.i(y)|w.i(y);return new a(_,this.h|w.h)},n.xor=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0;y<p;y++)_[y]=this.i(y)^w.i(y);return new a(_,this.h^w.h)};function kt(w){for(var p=w.g.length+1,_=[],y=0;y<p;y++)_[y]=w.i(y)<<1|w.i(y-1)>>>31;return new a(_,w.h)}function Z(w,p){var _=p>>5;p%=32;for(var y=w.g.length-_,v=[],T=0;T<y;T++)v[T]=0<p?w.i(T+_)>>>p|w.i(T+_+1)<<32-p:w.i(T+_);return new a(v,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,_o=Qc.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,ce=Qc.Integer=a}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he={};var yo,Kp,fn,vo,pi,_r,wo,Io,Eo;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,u){return s==Array.prototype||s==Object.prototype||(s[l]=u.value),s};function e(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof gr=="object"&&gr];for(var l=0;l<s.length;++l){var u=s[l];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var i=e(this);function r(s,l){if(l)t:{var u=i;s=s.split(".");for(var d=0;d<s.length-1;d++){var I=s[d];if(!(I in u))break t;u=u[I]}s=s[s.length-1],d=u[s],l=l(d),l!=d&&l!=null&&t(u,s,{configurable:!0,writable:!0,value:l})}}function o(s,l){s instanceof String&&(s+="");var u=0,d=!1,I={next:function(){if(!d&&u<s.length){var A=u++;return{value:l(A,s[A]),done:!1}}return d=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(s){return s||function(){return o(this,function(l,u){return u})}});var a=a||{},c=this||self;function h(s){var l=typeof s;return l=l!="object"?l:s?Array.isArray(s)?"array":l:"null",l=="array"||l=="object"&&typeof s.length=="number"}function f(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function m(s,l,u){return s.call.apply(s.bind,arguments)}function E(s,l,u){if(!s)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,d),s.apply(l,I)}}return function(){return s.apply(l,arguments)}}function b(s,l,u){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:E,b.apply(null,arguments)}function x(s,l){var u=Array.prototype.slice.call(arguments,1);return function(){var d=u.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function N(s,l){function u(){}u.prototype=l.prototype,s.aa=l.prototype,s.prototype=new u,s.prototype.constructor=s,s.Qb=function(d,I,A){for(var D=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)D[Y-2]=arguments[Y];return l.prototype[I].apply(d,D)}}function M(s){let l=s.length;if(0<l){let u=Array(l);for(let d=0;d<l;d++)u[d]=s[d];return u}return[]}function S(s,l){for(let u=1;u<arguments.length;u++){let d=arguments[u];if(h(d)){let I=s.length||0,A=d.length||0;s.length=I+A;for(let D=0;D<A;D++)s[I+D]=d[D]}else s.push(d)}}class H{constructor(l,u){this.i=l,this.j=u,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function $(s){return/^[\s\xa0]*$/.test(s)}function K(){var s=c.navigator;return s&&(s=s.userAgent)?s:""}function it(s){return it[" "](s),s}it[" "]=function(){};var kt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Z(s,l,u){for(let d in s)l.call(u,s[d],d,s)}function w(s,l){for(let u in s)l.call(void 0,s[u],u,s)}function p(s){let l={};for(let u in s)l[u]=s[u];return l}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(s,l){let u,d;for(let I=1;I<arguments.length;I++){d=arguments[I];for(u in d)s[u]=d[u];for(let A=0;A<_.length;A++)u=_[A],Object.prototype.hasOwnProperty.call(d,u)&&(s[u]=d[u])}}function v(s){var l=1;s=s.split(":");let u=[];for(;0<l&&s.length;)u.push(s.shift()),l--;return s.length&&u.push(s.join(":")),u}function T(s){c.setTimeout(()=>{throw s},0)}function g(){var s=Vs;let l=null;return s.g&&(l=s.g,s.g=s.g.next,s.g||(s.h=null),l.next=null),l}class Jt{constructor(){this.h=this.g=null}add(l,u){let d=Bn.get();d.set(l,u),this.h?this.h.next=d:this.g=d,this.h=d}}var Bn=new H(()=>new fp,s=>s.reset());class fp{constructor(){this.next=this.g=this.h=null}set(l,u){this.h=l,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let zn,qn=!1,Vs=new Jt,Kl=()=>{let s=c.Promise.resolve(void 0);zn=()=>{s.then(pp)}};var pp=()=>{for(var s;s=g();){try{s.h.call(s.g)}catch(u){T(u)}var l=Bn;l.j(s),100>l.h&&(l.h++,s.next=l.g,l.g=s)}qn=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vt(s,l){this.type=s,this.g=this.target=l,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var mp=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let u=()=>{};c.addEventListener("test",u,l),c.removeEventListener("test",u,l)}catch{}return s}();function Un(s,l){if(vt.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var u=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(kt){t:{try{it(l.nodeName);var I=!0;break t}catch{}I=!1}I||(l=null)}}else u=="mouseover"?l=s.fromElement:u=="mouseout"&&(l=s.toElement);this.relatedTarget=l,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:gp[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Un.aa.h.call(this)}}N(Un,vt);var gp={2:"touch",3:"pen",4:"mouse"};Un.prototype.h=function(){Un.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Gn="closure_listenable_"+(1e6*Math.random()|0),_p=0;function yp(s,l,u,d,I){this.listener=s,this.proxy=null,this.src=l,this.type=u,this.capture=!!d,this.ha=I,this.key=++_p,this.da=this.fa=!1}function Ui(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Gi(s){this.src=s,this.g={},this.h=0}Gi.prototype.add=function(s,l,u,d,I){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var D=Ds(s,l,d,I);return-1<D?(l=s[D],u||(l.fa=!1)):(l=new yp(l,this.src,A,!!d,I),l.fa=u,s.push(l)),l};function xs(s,l){var u=l.type;if(u in s.g){var d=s.g[u],I=Array.prototype.indexOf.call(d,l,void 0),A;(A=0<=I)&&Array.prototype.splice.call(d,I,1),A&&(Ui(l),s.g[u].length==0&&(delete s.g[u],s.h--))}}function Ds(s,l,u,d){for(var I=0;I<s.length;++I){var A=s[I];if(!A.da&&A.listener==l&&A.capture==!!u&&A.ha==d)return I}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),Rs={};function Ql(s,l,u,d,I){if(d&&d.once)return Yl(s,l,u,d,I);if(Array.isArray(l)){for(var A=0;A<l.length;A++)Ql(s,l[A],u,d,I);return null}return u=Ms(u),s&&s[Gn]?s.K(l,u,f(d)?!!d.capture:!!d,I):Wl(s,l,u,!1,d,I)}function Wl(s,l,u,d,I,A){if(!l)throw Error("Invalid event type");var D=f(I)?!!I.capture:!!I,Y=ks(s);if(Y||(s[Ss]=Y=new Gi(s)),u=Y.add(l,u,d,D,A),u.proxy)return u;if(d=vp(),u.proxy=d,d.src=s,d.listener=u,s.addEventListener)mp||(I=D),I===void 0&&(I=!1),s.addEventListener(l.toString(),d,I);else if(s.attachEvent)s.attachEvent(Zl(l.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return u}function vp(){function s(u){return l.call(s.src,s.listener,u)}let l=wp;return s}function Yl(s,l,u,d,I){if(Array.isArray(l)){for(var A=0;A<l.length;A++)Yl(s,l[A],u,d,I);return null}return u=Ms(u),s&&s[Gn]?s.L(l,u,f(d)?!!d.capture:!!d,I):Wl(s,l,u,!0,d,I)}function Xl(s,l,u,d,I){if(Array.isArray(l))for(var A=0;A<l.length;A++)Xl(s,l[A],u,d,I);else d=f(d)?!!d.capture:!!d,u=Ms(u),s&&s[Gn]?(s=s.i,l=String(l).toString(),l in s.g&&(A=s.g[l],u=Ds(A,u,d,I),-1<u&&(Ui(A[u]),Array.prototype.splice.call(A,u,1),A.length==0&&(delete s.g[l],s.h--)))):s&&(s=ks(s))&&(l=s.g[l.toString()],s=-1,l&&(s=Ds(l,u,d,I)),(u=-1<s?l[s]:null)&&Ps(u))}function Ps(s){if(typeof s!="number"&&s&&!s.da){var l=s.src;if(l&&l[Gn])xs(l.i,s);else{var u=s.type,d=s.proxy;l.removeEventListener?l.removeEventListener(u,d,s.capture):l.detachEvent?l.detachEvent(Zl(u),d):l.addListener&&l.removeListener&&l.removeListener(d),(u=ks(l))?(xs(u,s),u.h==0&&(u.src=null,l[Ss]=null)):Ui(s)}}}function Zl(s){return s in Rs?Rs[s]:Rs[s]="on"+s}function wp(s,l){if(s.da)s=!0;else{l=new Un(l,this);var u=s.listener,d=s.ha||s.src;s.fa&&Ps(s),s=u.call(d,l)}return s}function ks(s){return s=s[Ss],s instanceof Gi?s:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(s){return typeof s=="function"?s:(s[Ns]||(s[Ns]=function(l){return s.handleEvent(l)}),s[Ns])}function wt(){we.call(this),this.i=new Gi(this),this.M=this,this.F=null}N(wt,we),wt.prototype[Gn]=!0,wt.prototype.removeEventListener=function(s,l,u,d){Xl(this,s,l,u,d)};function At(s,l){var u,d=s.F;if(d)for(u=[];d;d=d.F)u.push(d);if(s=s.M,d=l.type||l,typeof l=="string")l=new vt(l,s);else if(l instanceof vt)l.target=l.target||s;else{var I=l;l=new vt(d,s),y(l,I)}if(I=!0,u)for(var A=u.length-1;0<=A;A--){var D=l.g=u[A];I=$i(D,d,!0,l)&&I}if(D=l.g=s,I=$i(D,d,!0,l)&&I,I=$i(D,d,!1,l)&&I,u)for(A=0;A<u.length;A++)D=l.g=u[A],I=$i(D,d,!1,l)&&I}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var s=this.i,l;for(l in s.g){for(var u=s.g[l],d=0;d<u.length;d++)Ui(u[d]);delete s.g[l],s.h--}}this.F=null},wt.prototype.K=function(s,l,u,d){return this.i.add(String(s),l,!1,u,d)},wt.prototype.L=function(s,l,u,d){return this.i.add(String(s),l,!0,u,d)};function $i(s,l,u,d){if(l=s.i.g[String(l)],!l)return!0;l=l.concat();for(var I=!0,A=0;A<l.length;++A){var D=l[A];if(D&&!D.da&&D.capture==u){var Y=D.listener,gt=D.ha||D.src;D.fa&&xs(s.i,D),I=Y.call(gt,d)!==!1&&I}}return I&&!d.defaultPrevented}function Jl(s,l,u){if(typeof s=="function")u&&(s=b(s,u));else if(s&&typeof s.handleEvent=="function")s=b(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(s,l||0)}function tu(s){s.g=Jl(()=>{s.g=null,s.i&&(s.i=!1,tu(s))},s.l);let l=s.h;s.h=null,s.m.apply(null,l)}class Ip extends we{constructor(l,u){super(),this.m=l,this.l=u,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:tu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $n(s){we.call(this),this.h=s,this.g={}}N($n,we);var eu=[];function nu(s){Z(s.g,function(l,u){this.g.hasOwnProperty(u)&&Ps(l)},s),s.g={}}$n.prototype.N=function(){$n.aa.N.call(this),nu(this)},$n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=c.JSON.stringify,Ep=c.JSON.parse,Tp=class{stringify(s){return c.JSON.stringify(s,void 0)}parse(s){return c.JSON.parse(s,void 0)}};function Os(){}Os.prototype.h=null;function iu(s){return s.h||(s.h=s.i())}function ru(){}var jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ls(){vt.call(this,"d")}N(Ls,vt);function Bs(){vt.call(this,"c")}N(Bs,vt);var Ne={},su=null;function ji(){return su=su||new wt}Ne.La="serverreachability";function ou(s){vt.call(this,Ne.La,s)}N(ou,vt);function Hn(s){let l=ji();At(l,new ou(l))}Ne.STAT_EVENT="statevent";function au(s,l){vt.call(this,Ne.STAT_EVENT,s),this.stat=l}N(au,vt);function Ct(s){let l=ji();At(l,new au(l,s))}Ne.Ma="timingevent";function lu(s,l){vt.call(this,Ne.Ma,s),this.size=l}N(lu,vt);function Kn(s,l){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){s()},l)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function bp(s,l,u,d,I,A){s.info(function(){if(s.g)if(A)for(var D="",Y=A.split("&"),gt=0;gt<Y.length;gt++){var Q=Y[gt].split("=");if(1<Q.length){var It=Q[0];Q=Q[1];var Et=It.split("_");D=2<=Et.length&&Et[1]=="type"?D+(It+"="+Q+"&"):D+(It+"=redacted&")}}else D=null;else D=A;return"XMLHTTP REQ ("+d+") [attempt "+I+"]: "+l+`
`+u+`
`+D})}function Ap(s,l,u,d,I,A,D){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+I+"]: "+l+`
`+u+`
`+A+" "+D})}function en(s,l,u,d){s.info(function(){return"XMLHTTP TEXT ("+l+"): "+Vp(s,u)+(d?" "+d:"")})}function Cp(s,l){s.info(function(){return"TIMEOUT: "+l})}Qn.prototype.info=function(){};function Vp(s,l){if(!s.g)return l;if(!l)return null;try{var u=JSON.parse(l);if(u){for(s=0;s<u.length;s++)if(Array.isArray(u[s])){var d=u[s];if(!(2>d.length)){var I=d[1];if(Array.isArray(I)&&!(1>I.length)){var A=I[0];if(A!="noop"&&A!="stop"&&A!="close")for(var D=1;D<I.length;D++)I[D]=""}}}}return Fs(u)}catch{return l}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zs;function Ki(){}N(Ki,Os),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},zs=new Ki;function Ie(s,l,u,d){this.j=s,this.i=l,this.l=u,this.R=d||1,this.U=new $n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var hu={},qs={};function Us(s,l,u){s.L=1,s.v=Xi(te(l)),s.m=u,s.P=!0,du(s,null)}function du(s,l){s.F=Date.now(),Qi(s),s.A=te(s.v);var u=s.A,d=s.R;Array.isArray(d)||(d=[String(d)]),Cu(u.i,"t",d),s.C=0,u=s.j.J,s.h=new cu,s.g=$u(s.j,u?l:null,!s.m),0<s.O&&(s.M=new Ip(b(s.Y,s,s.g),s.O)),l=s.U,u=s.g,d=s.ca;var I="readystatechange";Array.isArray(I)||(I&&(eu[0]=I.toString()),I=eu);for(var A=0;A<I.length;A++){var D=Ql(u,I[A],d||l.handleEvent,!1,l.h||l);if(!D)break;l.g[D.key]=D}l=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,l)):(s.u="GET",s.g.ea(s.A,s.u,null,l)),Hn(),bp(s.i,s.u,s.A,s.l,s.R,s.m)}Ie.prototype.ca=function(s){s=s.target;let l=this.M;l&&ee(s)==3?l.j():this.Y(s)},Ie.prototype.Y=function(s){try{if(s==this.g)t:{let Et=ee(this.g);var l=this.g.Ba();let sn=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||ku(this.g)))){this.J||Et!=4||l==7||(l==8||0>=sn?Hn(3):Hn(2)),Gs(this);var u=this.g.Z();this.X=u;e:if(fu(this)){var d=ku(this.g);s="";var I=d.length,A=ee(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Me(this),Wn(this);var D="";break e}this.h.i=new c.TextDecoder}for(l=0;l<I;l++)this.h.h=!0,s+=this.h.i.decode(d[l],{stream:!(A&&l==I-1)});d.length=0,this.h.g+=s,this.C=0,D=this.h.g}else D=this.g.oa();if(this.o=u==200,Ap(this.i,this.u,this.A,this.l,this.R,Et,u),this.o){if(this.T&&!this.K){e:{if(this.g){var Y,gt=this.g;if((Y=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Y)){var Q=Y;break e}}Q=null}if(u=Q)en(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$s(this,u);else{this.o=!1,this.s=3,Ct(12),Me(this),Wn(this);break t}}if(this.P){u=!0;let Bt;for(;!this.J&&this.C<D.length;)if(Bt=xp(this,D),Bt==qs){Et==4&&(this.s=4,Ct(14),u=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==hu){this.s=4,Ct(15),en(this.i,this.l,D,"[Invalid Chunk]"),u=!1;break}else en(this.i,this.l,Bt,null),$s(this,Bt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||D.length!=0||this.h.h||(this.s=1,Ct(16),u=!1),this.o=this.o&&u,!u)en(this.i,this.l,D,"[Invalid Chunked Response]"),Me(this),Wn(this);else if(0<D.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Ys(It),It.M=!0,Ct(11))}}else en(this.i,this.l,D,null),$s(this,D);Et==4&&Me(this),this.o&&!this.J&&(Et==4?zu(this.j,this):(this.o=!1,Qi(this)))}else jp(this.g),u==400&&0<D.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Me(this),Wn(this)}}}catch{}finally{}};function fu(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function xp(s,l){var u=s.C,d=l.indexOf(`
`,u);return d==-1?qs:(u=Number(l.substring(u,d)),isNaN(u)?hu:(d+=1,d+u>l.length?qs:(l=l.slice(d,d+u),s.C=d+u,l)))}Ie.prototype.cancel=function(){this.J=!0,Me(this)};function Qi(s){s.S=Date.now()+s.I,pu(s,s.I)}function pu(s,l){if(s.B!=null)throw Error("WatchDog timer not null");s.B=Kn(b(s.ba,s),l)}function Gs(s){s.B&&(c.clearTimeout(s.B),s.B=null)}Ie.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Cp(this.i,this.A),this.L!=2&&(Hn(),Ct(17)),Me(this),this.s=2,Wn(this)):pu(this,this.S-s)};function Wn(s){s.j.G==0||s.J||zu(s.j,s)}function Me(s){Gs(s);var l=s.M;l&&typeof l.ma=="function"&&l.ma(),s.M=null,nu(s.U),s.g&&(l=s.g,s.g=null,l.abort(),l.ma())}function $s(s,l){try{var u=s.j;if(u.G!=0&&(u.g==s||js(u.h,s))){if(!s.K&&js(u.h,s)&&u.G==3){try{var d=u.Da.g.parse(l)}catch{d=null}if(Array.isArray(d)&&d.length==3){var I=d;if(I[0]==0){t:if(!u.u){if(u.g)if(u.g.F+3e3<s.F)nr(u),tr(u);else break t;Ws(u),Ct(18)}}else u.za=I[1],0<u.za-u.T&&37500>I[2]&&u.F&&u.v==0&&!u.C&&(u.C=Kn(b(u.Za,u),6e3));if(1>=_u(u.h)&&u.ca){try{u.ca()}catch{}u.ca=void 0}}else Oe(u,11)}else if((s.K||u.g==s)&&nr(u),!$(l))for(I=u.Da.g.parse(l),l=0;l<I.length;l++){let Q=I[l];if(u.T=Q[0],Q=Q[1],u.G==2)if(Q[0]=="c"){u.K=Q[1],u.ia=Q[2];let It=Q[3];It!=null&&(u.la=It,u.j.info("VER="+u.la));let Et=Q[4];Et!=null&&(u.Aa=Et,u.j.info("SVER="+u.Aa));let sn=Q[5];sn!=null&&typeof sn=="number"&&0<sn&&(d=1.5*sn,u.L=d,u.j.info("backChannelRequestTimeoutMs_="+d)),d=u;let Bt=s.g;if(Bt){let rr=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rr){var A=d.h;A.g||rr.indexOf("spdy")==-1&&rr.indexOf("quic")==-1&&rr.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Hs(A,A.h),A.h=null))}if(d.D){let Xs=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xs&&(d.ya=Xs,J(d.I,d.D,Xs))}}u.G=3,u.l&&u.l.ua(),u.ba&&(u.R=Date.now()-s.F,u.j.info("Handshake RTT: "+u.R+"ms")),d=u;var D=s;if(d.qa=Gu(d,d.J?d.ia:null,d.W),D.K){yu(d.h,D);var Y=D,gt=d.L;gt&&(Y.I=gt),Y.B&&(Gs(Y),Qi(Y)),d.g=D}else Lu(d);0<u.i.length&&er(u)}else Q[0]!="stop"&&Q[0]!="close"||Oe(u,7);else u.G==3&&(Q[0]=="stop"||Q[0]=="close"?Q[0]=="stop"?Oe(u,7):Qs(u):Q[0]!="noop"&&u.l&&u.l.ta(Q),u.v=0)}}Hn(4)}catch{}}var Dp=class{constructor(s,l){this.g=s,this.map=l}};function mu(s){this.l=s||10,c.PerformanceNavigationTiming?(s=c.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gu(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function _u(s){return s.h?1:s.g?s.g.size:0}function js(s,l){return s.h?s.h==l:s.g?s.g.has(l):!1}function Hs(s,l){s.g?s.g.add(l):s.h=l}function yu(s,l){s.h&&s.h==l?s.h=null:s.g&&s.g.has(l)&&s.g.delete(l)}mu.prototype.cancel=function(){if(this.i=vu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function vu(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let l=s.i;for(let u of s.g.values())l=l.concat(u.D);return l}return M(s.i)}function Sp(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var l=[],u=s.length,d=0;d<u;d++)l.push(s[d]);return l}l=[],u=0;for(d in s)l[u++]=s[d];return l}function Rp(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var l=[];s=s.length;for(var u=0;u<s;u++)l.push(u);return l}l=[],u=0;for(let d in s)l[u++]=d;return l}}}function wu(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,l,void 0);else for(var u=Rp(s),d=Sp(s),I=d.length,A=0;A<I;A++)l.call(void 0,d[A],u&&u[A],s)}var Iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pp(s,l){if(s){s=s.split("&");for(var u=0;u<s.length;u++){var d=s[u].indexOf("="),I=null;if(0<=d){var A=s[u].substring(0,d);I=s[u].substring(d+1)}else A=s[u];l(A,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Fe(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Fe){this.h=s.h,Wi(this,s.j),this.o=s.o,this.g=s.g,Yi(this,s.s),this.l=s.l;var l=s.i,u=new Zn;u.i=l.i,l.g&&(u.g=new Map(l.g),u.h=l.h),Eu(this,u),this.m=s.m}else s&&(l=String(s).match(Iu))?(this.h=!1,Wi(this,l[1]||"",!0),this.o=Yn(l[2]||""),this.g=Yn(l[3]||"",!0),Yi(this,l[4]),this.l=Yn(l[5]||"",!0),Eu(this,l[6]||"",!0),this.m=Yn(l[7]||"")):(this.h=!1,this.i=new Zn(null,this.h))}Fe.prototype.toString=function(){var s=[],l=this.j;l&&s.push(Xn(l,Tu,!0),":");var u=this.g;return(u||l=="file")&&(s.push("//"),(l=this.o)&&s.push(Xn(l,Tu,!0),"@"),s.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.s,u!=null&&s.push(":",String(u))),(u=this.l)&&(this.g&&u.charAt(0)!="/"&&s.push("/"),s.push(Xn(u,u.charAt(0)=="/"?Mp:Np,!0))),(u=this.i.toString())&&s.push("?",u),(u=this.m)&&s.push("#",Xn(u,Op)),s.join("")};function te(s){return new Fe(s)}function Wi(s,l,u){s.j=u?Yn(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function Yi(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.s=l}else s.s=null}function Eu(s,l,u){l instanceof Zn?(s.i=l,Lp(s.i,s.h)):(u||(l=Xn(l,Fp)),s.i=new Zn(l,s.h))}function J(s,l,u){s.i.set(l,u)}function Xi(s){return J(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Yn(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Xn(s,l,u){return typeof s=="string"?(s=encodeURI(s).replace(l,kp),u&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function kp(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Tu=/[#\/\?@]/g,Np=/[#\?:]/g,Mp=/[#\?]/g,Fp=/[#\?@]/g,Op=/#/g;function Zn(s,l){this.h=this.g=null,this.i=s||null,this.j=!!l}function Ee(s){s.g||(s.g=new Map,s.h=0,s.i&&Pp(s.i,function(l,u){s.add(decodeURIComponent(l.replace(/\+/g," ")),u)}))}n=Zn.prototype,n.add=function(s,l){Ee(this),this.i=null,s=nn(this,s);var u=this.g.get(s);return u||this.g.set(s,u=[]),u.push(l),this.h+=1,this};function bu(s,l){Ee(s),l=nn(s,l),s.g.has(l)&&(s.i=null,s.h-=s.g.get(l).length,s.g.delete(l))}function Au(s,l){return Ee(s),l=nn(s,l),s.g.has(l)}n.forEach=function(s,l){Ee(this),this.g.forEach(function(u,d){u.forEach(function(I){s.call(l,I,d,this)},this)},this)},n.na=function(){Ee(this);let s=Array.from(this.g.values()),l=Array.from(this.g.keys()),u=[];for(let d=0;d<l.length;d++){let I=s[d];for(let A=0;A<I.length;A++)u.push(l[d])}return u},n.V=function(s){Ee(this);let l=[];if(typeof s=="string")Au(this,s)&&(l=l.concat(this.g.get(nn(this,s))));else{s=Array.from(this.g.values());for(let u=0;u<s.length;u++)l=l.concat(s[u])}return l},n.set=function(s,l){return Ee(this),this.i=null,s=nn(this,s),Au(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[l]),this.h+=1,this},n.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function Cu(s,l,u){bu(s,l),0<u.length&&(s.i=null,s.g.set(nn(s,l),M(u)),s.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],l=Array.from(this.g.keys());for(var u=0;u<l.length;u++){var d=l[u];let A=encodeURIComponent(String(d)),D=this.V(d);for(d=0;d<D.length;d++){var I=A;D[d]!==""&&(I+="="+encodeURIComponent(String(D[d]))),s.push(I)}}return this.i=s.join("&")};function nn(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function Lp(s,l){l&&!s.j&&(Ee(s),s.i=null,s.g.forEach(function(u,d){var I=d.toLowerCase();d!=I&&(bu(this,d),Cu(this,I,u))},s)),s.j=l}function Bp(s,l){let u=new Qn;if(c.Image){let d=new Image;d.onload=x(Te,u,"TestLoadImage: loaded",!0,l,d),d.onerror=x(Te,u,"TestLoadImage: error",!1,l,d),d.onabort=x(Te,u,"TestLoadImage: abort",!1,l,d),d.ontimeout=x(Te,u,"TestLoadImage: timeout",!1,l,d),c.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else l(!1)}function zp(s,l){let u=new Qn,d=new AbortController,I=setTimeout(()=>{d.abort(),Te(u,"TestPingServer: timeout",!1,l)},1e4);fetch(s,{signal:d.signal}).then(A=>{clearTimeout(I),A.ok?Te(u,"TestPingServer: ok",!0,l):Te(u,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(I),Te(u,"TestPingServer: error",!1,l)})}function Te(s,l,u,d,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),d(u)}catch{}}function qp(){this.g=new Tp}function Up(s,l,u){let d=u||"";try{wu(s,function(I,A){let D=I;f(I)&&(D=Fs(I)),l.push(d+A+"="+encodeURIComponent(D))})}catch(I){throw l.push(d+"type="+encodeURIComponent("_badmap")),I}}function Jn(s){this.l=s.Ub||null,this.j=s.eb||!1}N(Jn,Os),Jn.prototype.g=function(){return new Zi(this.l,this.j)},Jn.prototype.i=function(s){return function(){return s}}({});function Zi(s,l){wt.call(this),this.D=s,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Zi,wt),n=Zi.prototype,n.open=function(s,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=l,this.readyState=1,ei(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(l.body=s),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vu(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vu(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var l=s.value?s.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!s.done}))&&(this.response=this.responseText+=l)}s.done?ti(this):ei(this),this.readyState==3&&Vu(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,ti(this))},n.Qa=function(s){this.g&&(this.response=s,ti(this))},n.ga=function(){this.g&&ti(this)};function ti(s){s.readyState=4,s.l=null,s.j=null,s.v=null,ei(s)}n.setRequestHeader=function(s,l){this.u.append(s,l)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],l=this.h.entries();for(var u=l.next();!u.done;)u=u.value,s.push(u[0]+": "+u[1]),u=l.next();return s.join(`\r
`)};function ei(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function xu(s){let l="";return Z(s,function(u,d){l+=d,l+=":",l+=u,l+=`\r
`}),l}function Ks(s,l,u){t:{for(d in u){var d=!1;break t}d=!0}d||(u=xu(u),typeof s=="string"?u!=null&&encodeURIComponent(String(u)):J(s,l,u))}function rt(s){wt.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(rt,wt);var Gp=/^https?$/i,$p=["POST","PUT"];n=rt.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,l,u,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);l=l?l.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zs.g(),this.v=this.o?iu(this.o):iu(zs),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(l,String(s),!0),this.B=!1}catch(A){Du(this,A);return}if(s=u||"",u=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var I in d)u.set(I,d[I]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let A of d.keys())u.set(A,d.get(A));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(u.keys()).find(A=>A.toLowerCase()=="content-type"),I=c.FormData&&s instanceof c.FormData,!(0<=Array.prototype.indexOf.call($p,l,void 0))||d||I||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,D]of u)this.g.setRequestHeader(A,D);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pu(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){Du(this,A)}};function Du(s,l){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=l,s.m=5,Su(s),Ji(s)}function Su(s){s.A||(s.A=!0,At(s,"complete"),At(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,At(this,"complete"),At(this,"abort"),Ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ji(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ru(this):this.bb())},n.bb=function(){Ru(this)};function Ru(s){if(s.h&&typeof a<"u"&&(!s.v[1]||ee(s)!=4||s.Z()!=2)){if(s.u&&ee(s)==4)Jl(s.Ea,0,s);else if(At(s,"readystatechange"),ee(s)==4){s.h=!1;try{let D=s.Z();t:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break t;default:l=!1}var u;if(!(u=l)){var d;if(d=D===0){var I=String(s.D).match(Iu)[1]||null;!I&&c.self&&c.self.location&&(I=c.self.location.protocol.slice(0,-1)),d=!Gp.test(I?I.toLowerCase():"")}u=d}if(u)At(s,"complete"),At(s,"success");else{s.m=6;try{var A=2<ee(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",Su(s)}}finally{Ji(s)}}}}function Ji(s,l){if(s.g){Pu(s);let u=s.g,d=s.v[0]?()=>{}:null;s.g=null,s.v=null,l||At(s,"ready");try{u.onreadystatechange=d}catch{}}}function Pu(s){s.I&&(c.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function ee(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<ee(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var l=this.g.responseText;return s&&l.indexOf(s)==0&&(l=l.substring(s.length)),Ep(l)}};function ku(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function jp(s){let l={};s=(s.g&&2<=ee(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<s.length;d++){if($(s[d]))continue;var u=v(s[d]);let I=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let A=l[I]||[];l[I]=A,A.push(u)}w(l,function(d){return d.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ni(s,l,u){return u&&u.internalChannelParams&&u.internalChannelParams[s]||l}function Nu(s){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ni("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ni("baseRetryDelayMs",5e3,s),this.cb=ni("retryDelaySeedMs",1e4,s),this.Wa=ni("forwardChannelMaxRetries",2,s),this.wa=ni("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new mu(s&&s.concurrentRequestLimit),this.Da=new qp,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nu.prototype,n.la=8,n.G=1,n.connect=function(s,l,u,d){Ct(0),this.W=s,this.H=l||{},u&&d!==void 0&&(this.H.OSID=u,this.H.OAID=d),this.F=this.X,this.I=Gu(this,null,this.W),er(this)};function Qs(s){if(Mu(s),s.G==3){var l=s.U++,u=te(s.I);if(J(u,"SID",s.K),J(u,"RID",l),J(u,"TYPE","terminate"),ii(s,u),l=new Ie(s,s.j,l),l.L=2,l.v=Xi(te(u)),u=!1,c.navigator&&c.navigator.sendBeacon)try{u=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!u&&c.Image&&(new Image().src=l.v,u=!0),u||(l.g=$u(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Qi(l)}Uu(s)}function tr(s){s.g&&(Ys(s),s.g.cancel(),s.g=null)}function Mu(s){tr(s),s.u&&(c.clearTimeout(s.u),s.u=null),nr(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&c.clearTimeout(s.s),s.s=null)}function er(s){if(!gu(s.h)&&!s.s){s.s=!0;var l=s.Ga;zn||Kl(),qn||(zn(),qn=!0),Vs.add(l,s),s.B=0}}function Hp(s,l){return _u(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=l.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=Kn(b(s.Ga,s,l),qu(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let I=new Ie(this,this.j,s),A=this.o;if(this.S&&(A?(A=p(A),y(A,this.S)):A=this.S),this.m!==null||this.O||(I.H=A,A=null),this.P)t:{for(var l=0,u=0;u<this.i.length;u++){e:{var d=this.i[u];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break e}d=void 0}if(d===void 0)break;if(l+=d,4096<l){l=u;break t}if(l===4096||u===this.i.length-1){l=u+1;break t}}l=1e3}else l=1e3;l=Ou(this,I,l),u=te(this.I),J(u,"RID",s),J(u,"CVER",22),this.D&&J(u,"X-HTTP-Session-Id",this.D),ii(this,u),A&&(this.O?l="headers="+encodeURIComponent(String(xu(A)))+"&"+l:this.m&&Ks(u,this.m,A)),Hs(this.h,I),this.Ua&&J(u,"TYPE","init"),this.P?(J(u,"$req",l),J(u,"SID","null"),I.T=!0,Us(I,u,null)):Us(I,u,l),this.G=2}}else this.G==3&&(s?Fu(this,s):this.i.length==0||gu(this.h)||Fu(this))};function Fu(s,l){var u;l?u=l.l:u=s.U++;let d=te(s.I);J(d,"SID",s.K),J(d,"RID",u),J(d,"AID",s.T),ii(s,d),s.m&&s.o&&Ks(d,s.m,s.o),u=new Ie(s,s.j,u,s.B+1),s.m===null&&(u.H=s.o),l&&(s.i=l.D.concat(s.i)),l=Ou(s,u,1e3),u.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Hs(s.h,u),Us(u,d,l)}function ii(s,l){s.H&&Z(s.H,function(u,d){J(l,d,u)}),s.l&&wu({},function(u,d){J(l,d,u)})}function Ou(s,l,u){u=Math.min(s.i.length,u);var d=s.l?b(s.l.Na,s.l,s):null;t:{var I=s.i;let A=-1;for(;;){let D=["count="+u];A==-1?0<u?(A=I[0].g,D.push("ofs="+A)):A=0:D.push("ofs="+A);let Y=!0;for(let gt=0;gt<u;gt++){let Q=I[gt].g,It=I[gt].map;if(Q-=A,0>Q)A=Math.max(0,I[gt].g-100),Y=!1;else try{Up(It,D,"req"+Q+"_")}catch{d&&d(It)}}if(Y){d=D.join("&");break t}}}return s=s.i.splice(0,u),l.D=s,d}function Lu(s){if(!s.g&&!s.u){s.Y=1;var l=s.Fa;zn||Kl(),qn||(zn(),qn=!0),Vs.add(l,s),s.v=0}}function Ws(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=Kn(b(s.Fa,s),qu(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,Bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=Kn(b(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),tr(this),Bu(this))};function Ys(s){s.A!=null&&(c.clearTimeout(s.A),s.A=null)}function Bu(s){s.g=new Ie(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var l=te(s.qa);J(l,"RID","rpc"),J(l,"SID",s.K),J(l,"AID",s.T),J(l,"CI",s.F?"0":"1"),!s.F&&s.ja&&J(l,"TO",s.ja),J(l,"TYPE","xmlhttp"),ii(s,l),s.m&&s.o&&Ks(l,s.m,s.o),s.L&&(s.g.I=s.L);var u=s.g;s=s.ia,u.L=1,u.v=Xi(te(l)),u.m=null,u.P=!0,du(u,s)}n.Za=function(){this.C!=null&&(this.C=null,tr(this),Ws(this),Ct(19))};function nr(s){s.C!=null&&(c.clearTimeout(s.C),s.C=null)}function zu(s,l){var u=null;if(s.g==l){nr(s),Ys(s),s.g=null;var d=2}else if(js(s.h,l))u=l.D,yu(s.h,l),d=1;else return;if(s.G!=0){if(l.o)if(d==1){u=l.m?l.m.length:0,l=Date.now()-l.F;var I=s.B;d=ji(),At(d,new lu(d,u)),er(s)}else Lu(s);else if(I=l.s,I==3||I==0&&0<l.X||!(d==1&&Hp(s,l)||d==2&&Ws(s)))switch(u&&0<u.length&&(l=s.h,l.i=l.i.concat(u)),I){case 1:Oe(s,5);break;case 4:Oe(s,10);break;case 3:Oe(s,6);break;default:Oe(s,2)}}}function qu(s,l){let u=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(u*=2),u*l}function Oe(s,l){if(s.j.info("Error code "+l),l==2){var u=b(s.fb,s),d=s.Xa;let I=!d;d=new Fe(d||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wi(d,"https"),Xi(d),I?Bp(d.toString(),u):zp(d.toString(),u)}else Ct(2);s.G=0,s.l&&s.l.sa(l),Uu(s),Mu(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Uu(s){if(s.G=0,s.ka=[],s.l){let l=vu(s.h);(l.length!=0||s.i.length!=0)&&(S(s.ka,l),S(s.ka,s.i),s.h.i.length=0,M(s.i),s.i.length=0),s.l.ra()}}function Gu(s,l,u){var d=u instanceof Fe?te(u):new Fe(u);if(d.g!="")l&&(d.g=l+"."+d.g),Yi(d,d.s);else{var I=c.location;d=I.protocol,l=l?l+"."+I.hostname:I.hostname,I=+I.port;var A=new Fe(null);d&&Wi(A,d),l&&(A.g=l),I&&Yi(A,I),u&&(A.l=u),d=A}return u=s.D,l=s.ya,u&&l&&J(d,u,l),J(d,"VER",s.la),ii(s,d),d}function $u(s,l,u){if(l&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=s.Ca&&!s.pa?new rt(new Jn({eb:u})):new rt(s.pa),l.Ha(s.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}n=ju.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ir(){}ir.prototype.g=function(s,l){return new St(s,l)};function St(s,l){wt.call(this),this.g=new Nu(l),this.l=s,this.h=l&&l.messageUrlParams||null,s=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(s?s["X-WebChannel-Content-Type"]=l.messageContentType:s={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(s?s["X-WebChannel-Client-Profile"]=l.va:s={"X-WebChannel-Client-Profile":l.va}),this.g.S=s,(s=l&&l.Sb)&&!$(s)&&(this.g.m=s),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!$(l)&&(this.g.D=l,s=this.h,s!==null&&l in s&&(s=this.h,l in s&&delete s[l])),this.j=new rn(this)}N(St,wt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Qs(this.g)},St.prototype.o=function(s){var l=this.g;if(typeof s=="string"){var u={};u.__data__=s,s=u}else this.u&&(u={},u.__data__=Fs(s),s=u);l.i.push(new Dp(l.Ya++,s)),l.G==3&&er(l)},St.prototype.N=function(){this.g.l=null,delete this.j,Qs(this.g),delete this.g,St.aa.N.call(this)};function Hu(s){Ls.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var l=s.__sm__;if(l){t:{for(let u in l){s=u;break t}s=void 0}(this.i=s)&&(s=this.i,l=l!==null&&s in l?l[s]:void 0),this.data=l}else this.data=s}N(Hu,Ls);function Ku(){Bs.call(this),this.status=1}N(Ku,Bs);function rn(s){this.g=s}N(rn,ju),rn.prototype.ua=function(){At(this.g,"a")},rn.prototype.ta=function(s){At(this.g,new Hu(s))},rn.prototype.sa=function(s){At(this.g,new Ku)},rn.prototype.ra=function(){At(this.g,"b")},ir.prototype.createWebChannel=ir.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Eo=he.createWebChannelTransport=function(){return new ir},Io=he.getStatEventTarget=function(){return ji()},wo=he.Event=Ne,_r=he.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,pi=he.ErrorCode=Hi,uu.COMPLETE="complete",vo=he.EventType=uu,ru.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,fn=he.WebChannel=ru,Kp=he.FetchXmlHttpFactory=Jn,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,yo=he.XhrIo=rt}).apply(typeof gr<"u"?gr:typeof self<"u"?self:typeof window<"u"?window:{});var Wc="@firebase/firestore",Yc="4.7.8";var pt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var kn="11.3.1";var Ge=new Ic("@firebase/firestore");function pn(){return Ge.logLevel}function k(n,...t){if(Ge.logLevel<=Kt.DEBUG){let e=t.map(ul);Ge.debug(`Firestore (${kn}): ${n}`,...e)}}function fe(n,...t){if(Ge.logLevel<=Kt.ERROR){let e=t.map(ul);Ge.error(`Firestore (${kn}): ${n}`,...e)}}function In(n,...t){if(Ge.logLevel<=Kt.WARN){let e=t.map(ul);Ge.warn(`Firestore (${kn}): ${n}`,...e)}}function ul(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function O(n="Unexpected state"){let t=`FIRESTORE (${kn}) INTERNAL ASSERTION FAILED: `+n;throw fe(t),new Error(t)}function W(n,t){n||O()}function L(n,t){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends vc{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ut=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var br=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Vo=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(pt.UNAUTHENTICATED))}shutdown(){}},xo=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Do=class{constructor(t){this.t=t,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){W(this.o===void 0);let i=this.i,r=h=>this.i!==i?(i=this.i,e(h)):Promise.resolve(),o=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ut,t.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let h=o;t.enqueueRetryable(()=>P(this,null,function*(){yield h.promise,yield r(this.currentUser)}))},c=h=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?c(h):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ut)}},0),a()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(W(typeof i.accessToken=="string"),new br(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return W(t===null||typeof t=="string"),new pt(t)}},So=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Ro=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new So(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ar=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Po=class{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,bc(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){W(this.o===void 0);let i=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ar(this.V));let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(W(typeof e.token=="string"),this.R=e.token,new Ar(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Qp(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Cr=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let r=Qp(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}};function U(n,t){return n<t?-1:n>t?1:0}function En(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Xc=-62135596800,Zc=1e6,yt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*Zc);return new n(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new R(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new R(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Xc)throw new R(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new R(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zc}_compareTo(t){return this.seconds===t.seconds?U(this.nanoseconds,t.nanoseconds):U(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds-Xc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class n{static fromTimestamp(t){return new n(t)}static min(){return new n(new yt(0,0))}static max(){return new n(new yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jc="__name__",Vr=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&O(),i===void 0?i=t.length-e:i>t.length-e&&O(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=n.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Math.sign(t.length-e.length)}static compareSegments(t,e){let i=n.isNumericId(t),r=n.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?n.extractNumericId(t).compare(n.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ce.fromString(t.substring(4,t.length-2))}},nt=class n extends Vr{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new R(C.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},Wp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class n extends Vr{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return Wp.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jc}static keyField(){return new n([Jc])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new R(C.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},a=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new R(C.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let h=t[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new R(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=h,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new R(C.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var F=class n{constructor(t){this.path=t}static fromPath(t){return new n(nt.fromString(t))}static fromName(t){return new n(nt.fromString(t).popFirst(5))}static empty(){return new n(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new nt(t.slice()))}};var wi=-1,ko=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};ko.UNKNOWN_ID=-1;function Yp(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=B.fromTimestamp(i===1e9?new yt(e+1,0):new yt(e,i));return new $e(r,F.empty(),t)}function Xp(n){return new $e(n.readTime,n.key,wi)}var $e=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(B.min(),F.empty(),wi)}static max(){return new n(B.max(),F.empty(),wi)}};function Zp(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=F.comparator(n.documentKey,t.documentKey),e!==0?e:U(n.largestBatchId,t.largestBatchId))}var Jp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",No=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Nn(n){return P(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==Jp)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,a=!1;t.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&e()},h=>i(h))}),a=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,a=new Array(o),c=0;for(let h=0;h<o;h++){let f=h;e(t[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};function tm(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Mn(n){return n.name==="IndexedDbTransactionError"}var cl=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.oe(r),this._e=r=>i.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this._e&&this._e(e),e}}n.ae=-1;return n})(),hl=-1;function as(n){return n==null}function Ii(n){return n===0&&1/n==-1/0}function em(n){return typeof n=="number"&&Number.isInteger(n)&&!Ii(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Bh="";function nm(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=th(t)),t=im(n.get(e),t);return th(t)}function im(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":e+="";break;case Bh:e+="";break;default:e+=o}}return e}function th(n){return n+Bh+""}var rm="remoteDocuments",zh="owner";var qh="mutationQueues";var Uh="mutations";var Gh="documentMutations",sm="remoteDocumentsV14";var $h="remoteDocumentGlobal";var jh="targets";var Hh="targetDocuments";var Kh="targetGlobal",Qh="collectionParents";var Wh="clientMetadata";var Yh="bundles";var Xh="namedQueries";var om="indexConfiguration";var am="indexState";var lm="indexEntries";var Zh="documentOverlays";var um="globals";var cm=[qh,Uh,Gh,rm,jh,zh,Kh,Hh,Wh,$h,Qh,Yh,Xh],Ky=[...cm,Zh],hm=[qh,Uh,Gh,sm,jh,zh,Kh,Hh,Wh,$h,Qh,Yh,Xh,Zh],dm=hm,fm=[...dm,om,am,lm];var Qy=[...fm,um];function eh(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Xe(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Jh(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var ot=class n{constructor(t,e){this.comparator=t,this.root=e||Wt.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yn(this.root,t,this.comparator,!1)}getReverseIterator(){return new yn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yn(this.root,t,this.comparator,!0)}},yn=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Wt=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();let t=this.left.check();if(t!==this.right.check())throw O();return t+(this.isRed()?0:1)}};Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(t,e,i,r,o){return this}insert(t,e,i){return new Wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(t){this.comparator=t,this.data=new ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new xr(this.data.getIterator())}getIteratorFrom(t){return new xr(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},xr=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qt=class n{constructor(t){this.fields=t,t.sort(Pt.comparator)}static empty(){return new n([])}unionWith(t){let e=new mt(Pt.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return En(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var Dr=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Dr("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return U(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var pm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pe(n){if(W(!!n),typeof n=="string"){let t=0,e=pm.exec(n);if(W(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:et(n.seconds),nanos:et(n.nanos)}}function et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function me(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}var td="server_timestamp",ed="__type__",nd="__previous_value__",id="__local_write_time__";function dl(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[ed])===null||e===void 0?void 0:e.stringValue)===td}function ls(n){let t=n.mapValue.fields[nd];return dl(t)?ls(t):t}function Ei(n){let t=pe(n.mapValue.fields[id].timestampValue);return new yt(t.seconds,t.nanos)}var Mo=class{constructor(t,e,i,r,o,a,c,h,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f}},Sr="(default)",Rr=class n{constructor(t,e){this.projectId=t,this.database=e||Sr}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Sr}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var fl="__type__",rd="__max__",yr={mapValue:{fields:{__type__:{stringValue:rd}}}},pl="__vector__",Tn="value";function Ve(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dl(n)?4:od(n)?9007199254740991:sd(n)?10:11:O()}function Zt(n,t){if(n===t)return!0;let e=Ve(n);if(e!==Ve(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ei(n).isEqual(Ei(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=pe(r.timestampValue),c=pe(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return me(r.bytesValue).isEqual(me(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return et(r.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return et(r.integerValue)===et(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=et(r.doubleValue),c=et(o.doubleValue);return a===c?Ii(a)===Ii(c):isNaN(a)&&isNaN(c)}return!1}(n,t);case 9:return En(n.arrayValue.values||[],t.arrayValue.values||[],Zt);case 10:case 11:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(eh(a)!==eh(c))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!Zt(a[h],c[h])))return!1;return!0}(n,t);default:return O()}}function Ti(n,t){return(n.values||[]).find(e=>Zt(e,t))!==void 0}function bn(n,t){if(n===t)return 0;let e=Ve(n),i=Ve(t);if(e!==i)return U(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return U(n.booleanValue,t.booleanValue);case 2:return function(o,a){let c=et(o.integerValue||o.doubleValue),h=et(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return nh(n.timestampValue,t.timestampValue);case 4:return nh(Ei(n),Ei(t));case 5:return U(n.stringValue,t.stringValue);case 6:return function(o,a){let c=me(o),h=me(a);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(o,a){let c=o.split("/"),h=a.split("/");for(let f=0;f<c.length&&f<h.length;f++){let m=U(c[f],h[f]);if(m!==0)return m}return U(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,a){let c=U(et(o.latitude),et(a.latitude));return c!==0?c:U(et(o.longitude),et(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return ih(n.arrayValue,t.arrayValue);case 10:return function(o,a){var c,h,f,m;let E=o.fields||{},b=a.fields||{},x=(c=E[Tn])===null||c===void 0?void 0:c.arrayValue,N=(h=b[Tn])===null||h===void 0?void 0:h.arrayValue,M=U(((f=x?.values)===null||f===void 0?void 0:f.length)||0,((m=N?.values)===null||m===void 0?void 0:m.length)||0);return M!==0?M:ih(x,N)}(n.mapValue,t.mapValue);case 11:return function(o,a){if(o===yr.mapValue&&a===yr.mapValue)return 0;if(o===yr.mapValue)return 1;if(a===yr.mapValue)return-1;let c=o.fields||{},h=Object.keys(c),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let E=0;E<h.length&&E<m.length;++E){let b=U(h[E],m[E]);if(b!==0)return b;let x=bn(c[h[E]],f[m[E]]);if(x!==0)return x}return U(h.length,m.length)}(n.mapValue,t.mapValue);default:throw O()}}function nh(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return U(n,t);let e=pe(n),i=pe(t),r=U(e.seconds,i.seconds);return r!==0?r:U(e.nanos,i.nanos)}function ih(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let o=bn(e[r],i[r]);if(o)return o}return U(e.length,i.length)}function An(n){return Fo(n)}function Fo(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=pe(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return me(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return F.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=Fo(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${Fo(e.fields[a])}`;return r+"}"}(n.mapValue):O()}function Ir(n){switch(Ve(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=ls(n);return t?16+Ir(t):16;case 5:return 2*n.stringValue.length;case 6:return me(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Ir(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Xe(i.fields,(o,a)=>{r+=o.length+Ir(a)}),r}(n.mapValue);default:throw O()}}function rh(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Oo(n){return!!n&&"integerValue"in n}function ml(n){return!!n&&"arrayValue"in n}function sh(n){return!!n&&"nullValue"in n}function oh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Er(n){return!!n&&"mapValue"in n}function sd(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[fl])===null||e===void 0?void 0:e.stringValue)===pl}function gi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return Xe(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=gi(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=gi(n.arrayValue.values[e]);return t}return Object.assign({},n)}function od(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rd}var Yy={mapValue:{fields:{[fl]:{stringValue:pl},[Tn]:{arrayValue:{}}}}};var qt=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Er(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=gi(e)}setAll(t){let e=Pt.emptyPath(),i={},r=[];t.forEach((a,c)=>{if(!e.isImmediateParentOf(c)){let h=this.getFieldsMap(e);this.applyChanges(h,i,r),i={},r=[],e=c.popLast()}a?i[c.lastSegment()]=gi(a):r.push(c.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());Er(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Zt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Er(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Xe(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(gi(this.value))}};function ad(n){let t=[];return Xe(n.fields,(e,i)=>{let r=new Pt([e]);if(Er(i)){let o=ad(i.mapValue).fields;if(o.length===0)t.push(r);else for(let a of o)t.push(r.child(a))}else t.push(r)}),new Qt(t)}var Gt=class n{constructor(t,e,i,r,o,a,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new n(t,0,B.min(),B.min(),B.min(),qt.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,B.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,B.min(),B.min(),qt.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,B.min(),B.min(),qt.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cn=class{constructor(t,e){this.position=t,this.inclusive=e}};function ah(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],a=n.position[r];if(o.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),e.key):i=bn(a,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function lh(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Zt(n.position[e],t.position[e]))return!1;return!0}var je=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function mm(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Pr=class{},ct=class n extends Pr{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Bo(t,e,i):e==="array-contains"?new Uo(t,i):e==="in"?new Go(t,i):e==="not-in"?new $o(t,i):e==="array-contains-any"?new jo(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new zo(t,i):new qo(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(bn(e,this.value)):e!==null&&Ve(this.value)===Ve(e)&&this.matchesComparison(bn(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends Pr{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new n(t,e)}matches(t){return ld(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function ld(n){return n.op==="and"}function ud(n){return gm(n)&&ld(n)}function gm(n){for(let t of n.filters)if(t instanceof $t)return!1;return!0}function Lo(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+An(n.value);if(ud(n))return n.filters.map(t=>Lo(t)).join(",");{let t=n.filters.map(e=>Lo(e)).join(",");return`${n.op}(${t})`}}function cd(n,t){return n instanceof ct?function(i,r){return r instanceof ct&&i.op===r.op&&i.field.isEqual(r.field)&&Zt(i.value,r.value)}(n,t):n instanceof $t?function(i,r){return r instanceof $t&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&cd(a,r.filters[c]),!0):!1}(n,t):void O()}function hd(n){return n instanceof ct?function(e){return`${e.field.canonicalString()} ${e.op} ${An(e.value)}`}(n):n instanceof $t?function(e){return e.op.toString()+" {"+e.getFilters().map(hd).join(" ,")+"}"}(n):"Filter"}var Bo=class extends ct{constructor(t,e,i){super(t,e,i),this.key=F.fromName(i.referenceValue)}matches(t){let e=F.comparator(t.key,this.key);return this.matchesComparison(e)}},zo=class extends ct{constructor(t,e){super(t,"in",e),this.keys=dd("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},qo=class extends ct{constructor(t,e){super(t,"not-in",e),this.keys=dd("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function dd(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>F.fromName(i.referenceValue))}var Uo=class extends ct{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return ml(e)&&Ti(e.arrayValue,this.value)}},Go=class extends ct{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Ti(this.value.arrayValue,e)}},$o=class extends ct{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ti(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Ti(this.value.arrayValue,e)}},jo=class extends ct{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!ml(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Ti(this.value.arrayValue,i))}};var Ho=class{constructor(t,e=null,i=[],r=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.le=null}};function uh(n,t=null,e=[],i=[],r=null,o=null,a=null){return new Ho(n,t,e,i,r,o,a)}function gl(n){let t=L(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Lo(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),as(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>An(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>An(i)).join(",")),t.le=e}return t.le}function _l(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!mm(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!cd(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!lh(n.startAt,t.startAt)&&lh(n.endAt,t.endAt)}function Ko(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var xe=class{constructor(t,e=null,i=[],r=[],o=null,a="F",c=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function _m(n,t,e,i,r,o,a,c){return new xe(n,t,e,i,r,o,a,c)}function yl(n){return new xe(n)}function ch(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fd(n){return n.collectionGroup!==null}function _i(n){let t=L(n);if(t.he===null){t.he=[];let e=new Set;for(let o of t.explicitOrderBy)t.he.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new mt(Pt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.he.push(new je(o,i))}),e.has(Pt.keyField().canonicalString())||t.he.push(new je(Pt.keyField(),i))}return t.he}function Yt(n){let t=L(n);return t.Pe||(t.Pe=ym(t,_i(n))),t.Pe}function ym(n,t){if(n.limitType==="F")return uh(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new je(r.field,o)});let e=n.endAt?new Cn(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Cn(n.startAt.position,n.startAt.inclusive):null;return uh(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Qo(n,t){let e=n.filters.concat([t]);return new xe(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Wo(n,t,e){return new xe(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function us(n,t){return _l(Yt(n),Yt(t))&&n.limitType===t.limitType}function pd(n){return`${gl(Yt(n))}|lt:${n.limitType}`}function mn(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>hd(r)).join(", ")}]`),as(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>An(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>An(r)).join(",")),`Target(${i})`}(Yt(n))}; limitType=${n.limitType})`}function cs(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):F.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of _i(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(a,c,h){let f=ah(a,c,h);return a.inclusive?f<=0:f<0}(i.startAt,_i(i),r)||i.endAt&&!function(a,c,h){let f=ah(a,c,h);return a.inclusive?f>=0:f>0}(i.endAt,_i(i),r))}(n,t)}function vm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function md(n){return(t,e)=>{let i=!1;for(let r of _i(n)){let o=wm(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function wm(n,t,e){let i=n.field.isKeyField()?F.comparator(t.key,e.key):function(o,a,c){let h=a.data.field(o),f=c.data.field(o);return h!==null&&f!==null?bn(h,f):O()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return O()}}var ge=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Xe(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return Jh(this.inner)}size(){return this.innerSize}};var Im=new ot(F.comparator);function _e(){return Im}var gd=new ot(F.comparator);function mi(...n){let t=gd;for(let e of n)t=t.insert(e.key,e);return t}function _d(n){let t=gd;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function ze(){return yi()}function yd(){return yi()}function yi(){return new ge(n=>n.toString(),(n,t)=>n.isEqual(t))}var Em=new ot(F.comparator),Tm=new mt(F.comparator);function q(...n){let t=Tm;for(let e of n)t=t.add(e);return t}var bm=new mt(U);function Am(){return bm}function vl(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(t)?"-0":t}}function vd(n){return{integerValue:""+n}}function Cm(n,t){return em(t)?vd(t):vl(n,t)}var Vn=class{constructor(){this._=void 0}};function Vm(n,t,e){return n instanceof xn?function(r,o){let a={fields:{[ed]:{stringValue:td},[id]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&dl(o)&&(o=ls(o)),o&&(a.fields[nd]=o),{mapValue:a}}(e,t):n instanceof He?Id(n,t):n instanceof Ke?Ed(n,t):function(r,o){let a=wd(r,o),c=hh(a)+hh(r.Ie);return Oo(a)&&Oo(r.Ie)?vd(c):vl(r.serializer,c)}(n,t)}function xm(n,t,e){return n instanceof He?Id(n,t):n instanceof Ke?Ed(n,t):e}function wd(n,t){return n instanceof Dn?function(i){return Oo(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var xn=class extends Vn{},He=class extends Vn{constructor(t){super(),this.elements=t}};function Id(n,t){let e=Td(t);for(let i of n.elements)e.some(r=>Zt(r,i))||e.push(i);return{arrayValue:{values:e}}}var Ke=class extends Vn{constructor(t){super(),this.elements=t}};function Ed(n,t){let e=Td(t);for(let i of n.elements)e=e.filter(r=>!Zt(r,i));return{arrayValue:{values:e}}}var Dn=class extends Vn{constructor(t,e){super(),this.serializer=t,this.Ie=e}};function hh(n){return et(n.integerValue||n.doubleValue)}function Td(n){return ml(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Dm(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof He&&r instanceof He||i instanceof Ke&&r instanceof Ke?En(i.elements,r.elements,Zt):i instanceof Dn&&r instanceof Dn?Zt(i.Ie,r.Ie):i instanceof xn&&r instanceof xn}(n.transform,t.transform)}var Yo=class{constructor(t,e){this.version=t,this.transformResults=e}},de=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Tr(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Sn=class{};function bd(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new bi(n.key,de.none()):new Qe(n.key,n.data,de.none());{let e=n.data,i=qt.empty(),r=new mt(Pt.comparator);for(let o of t.fields)if(!r.has(o)){let a=e.field(o);a===null&&o.length>1&&(o=o.popLast(),a=e.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ye(n.key,i,new Qt(r.toArray()),de.none())}}function Sm(n,t,e){n instanceof Qe?function(r,o,a){let c=r.value.clone(),h=fh(r.fieldTransforms,o,a.transformResults);c.setAll(h),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):n instanceof ye?function(r,o,a){if(!Tr(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=fh(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Ad(r)),h.setAll(c),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,t,e):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function vi(n,t,e,i){return n instanceof Qe?function(o,a,c,h){if(!Tr(o.precondition,a))return c;let f=o.value.clone(),m=ph(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof ye?function(o,a,c,h){if(!Tr(o.precondition,a))return c;let f=ph(o.fieldTransforms,h,a),m=a.data;return m.setAll(Ad(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,t,e,i):function(o,a,c){return Tr(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,t,e)}function Rm(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=wd(i.transform,r||null);o!=null&&(e===null&&(e=qt.empty()),e.set(i.field,o))}return e||null}function dh(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&En(i,r,(o,a)=>Dm(o,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Qe=class extends Sn{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ye=class extends Sn{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Ad(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function fh(n,t,e){let i=new Map;W(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],a=o.transform,c=t.data.field(o.field);i.set(o.field,xm(a,c,e[r]))}return i}function ph(n,t,e){let i=new Map;for(let r of n){let o=r.transform,a=e.data.field(r.field);i.set(r.field,Vm(o,a,t))}return i}var bi=class extends Sn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Xo=class extends Sn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zo=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&Sm(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=vi(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=vi(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=yd();return this.mutations.forEach(r=>{let o=t.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=e.has(r.key)?null:c;let h=bd(a,c);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(B.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),q())}isEqual(t){return this.batchId===t.batchId&&En(this.mutations,t.mutations,(e,i)=>dh(e,i))&&En(this.baseMutations,t.baseMutations,(e,i)=>dh(e,i))}},Jo=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){W(t.mutations.length===i.length);let r=function(){return Em}(),o=t.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(t,e,i,r)}};var ta=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ea=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var lt,G;function Pm(n){switch(n){case C.OK:return O();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0;default:return O()}}function Cd(n){if(n===void 0)return fe("GRPC error has no .code"),C.UNKNOWN;switch(n){case lt.OK:return C.OK;case lt.CANCELLED:return C.CANCELLED;case lt.UNKNOWN:return C.UNKNOWN;case lt.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case lt.INTERNAL:return C.INTERNAL;case lt.UNAVAILABLE:return C.UNAVAILABLE;case lt.UNAUTHENTICATED:return C.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case lt.NOT_FOUND:return C.NOT_FOUND;case lt.ALREADY_EXISTS:return C.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return C.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case lt.ABORTED:return C.ABORTED;case lt.OUT_OF_RANGE:return C.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return C.UNIMPLEMENTED;case lt.DATA_LOSS:return C.DATA_LOSS;default:return O()}}(G=lt||(lt={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var mh=null;function km(){return new TextEncoder}var Nm=new ce([4294967295,4294967295],0);function gh(n){let t=km().encode(n),e=new _o;return e.update(t),new Uint8Array(e.digest())}function _h(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ce([e,i],0),new ce([r,o],0)]}var na=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new qe(`Invalid padding: ${e}`);if(i<0)throw new qe(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new qe(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new qe(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=ce.fromNumber(this.Ee)}Ae(t,e,i){let r=t.add(e.multiply(ce.fromNumber(i)));return r.compare(Nm)===1&&(r=new ce([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;let e=gh(t),[i,r]=_h(e);for(let o=0;o<this.hashCount;o++){let a=this.Ae(i,r,o);if(!this.Re(a))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new n(o,r,e);return i.forEach(c=>a.insert(c)),a}insert(t){if(this.Ee===0)return;let e=gh(t),[i,r]=_h(e);for(let o=0;o<this.hashCount;o++){let a=this.Ae(i,r,o);this.Ve(a)}}Ve(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},qe=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var kr=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,Ai.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(B.min(),r,new ot(U),_e(),q())}},Ai=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,q(),q(),q())}};var vn=class{constructor(t,e,i,r){this.me=t,this.removedTargetIds=e,this.key=i,this.fe=r}},Nr=class{constructor(t,e){this.targetId=t,this.ge=e}},Mr=class{constructor(t,e,i=bt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Fr=class{constructor(){this.pe=0,this.ye=yh(),this.we=bt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=q(),e=q(),i=q();return this.ye.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:O()}}),new Ai(this.we,this.Se,t,e,i)}Me(){this.be=!1,this.ye=yh()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,W(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},ia=class{constructor(t){this.ke=t,this.qe=new Map,this.Qe=_e(),this.$e=vr(),this.Ke=vr(),this.Ue=new ot(U)}We(t){for(let e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(let e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{let i=this.He(e);switch(t.state){case 0:this.Je(e)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(e);break;case 3:this.Je(e)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),i.Ce(t.resumeToken));break;default:O()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((i,r)=>{this.Je(r)&&e(r)})}Ze(t){let e=t.targetId,i=t.ge.count,r=this.Xe(e);if(r){let o=r.target;if(Ko(o))if(i===0){let a=new F(o.path);this.ze(e,a,Gt.newNoDocument(a,B.min()))}else W(i===1);else{let a=this.et(e);if(a!==i){let c=this.tt(t),h=c?this.nt(c,t,a):1;if(h!==0){this.Ye(e);let f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,f)}mh?.rt(function(m,E,b,x,N){var M,S,H,$,K,it;let kt={localCacheCount:m,existenceFilterCount:E.count,databaseId:b.database,projectId:b.projectId},Z=E.unchangedNames;return Z&&(kt.bloomFilter={applied:N===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:($=(H=(S=Z?.bits)===null||S===void 0?void 0:S.bitmap)===null||H===void 0?void 0:H.length)!==null&&$!==void 0?$:0,padding:(it=(K=Z?.bits)===null||K===void 0?void 0:K.padding)!==null&&it!==void 0?it:0,mightContain:w=>{var p;return(p=x?.mightContain(w))!==null&&p!==void 0&&p}}),kt}(a,t.ge,this.ke.it(),c,h))}}}}tt(t){let e=t.ge.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,a,c;try{a=me(i).toUint8Array()}catch(h){if(h instanceof Dr)return In("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new na(a,r,o)}catch(h){return In(h instanceof qe?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ee===0?null:c}nt(t,e,i){return e.ge.count===i-this.st(t,e.targetId)?0:2}st(t,e){let i=this.ke.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let a=this.ke.it(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.ze(e,o,null),r++)}),r}ot(t){let e=new Map;this.qe.forEach((o,a)=>{let c=this.Xe(a);if(c){if(o.current&&Ko(c.target)){let h=new F(c.target.path);this._t(h).has(a)||this.ut(a,h)||this.ze(a,h,Gt.newNoDocument(h,t))}o.ve&&(e.set(a,o.Fe()),o.Me())}});let i=q();this.Ke.forEach((o,a)=>{let c=!0;a.forEachWhile(h=>{let f=this.Xe(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.Qe.forEach((o,a)=>a.setReadTime(t));let r=new kr(t,e,this.Ue,this.Qe,i);return this.Qe=_e(),this.$e=vr(),this.Ke=vr(),this.Ue=new ot(U),r}Ge(t,e){if(!this.Je(t))return;let i=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,i),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,i){if(!this.Je(t))return;let r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),i&&(this.Qe=this.Qe.insert(e,i))}removeTarget(t){this.qe.delete(t)}et(t){let e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Fr,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new mt(U),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new mt(U),this.$e=this.$e.insert(t,e)),e}Je(t){let e=this.Xe(t)!==null;return e||k("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){let e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Fr),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}};function vr(){return new ot(F.comparator)}function yh(){return new ot(F.comparator)}var Mm={asc:"ASCENDING",desc:"DESCENDING"},Fm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Om={and:"AND",or:"OR"},ra=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function sa(n,t){return n.useProto3Json||as(t)?t:{value:t}}function Or(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vd(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Lm(n,t){return Or(n,t.toTimestamp())}function Xt(n){return W(!!n),B.fromTimestamp(function(e){let i=pe(e);return new yt(i.seconds,i.nanos)}(n))}function wl(n,t){return oa(n,t).canonicalString()}function oa(n,t){let e=function(r){return new nt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function xd(n){let t=nt.fromString(n);return W(kd(t)),t}function aa(n,t){return wl(n.databaseId,t.path)}function To(n,t){let e=xd(t);if(e.get(1)!==n.databaseId.projectId)throw new R(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new R(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new F(Sd(e))}function Dd(n,t){return wl(n.databaseId,t)}function Bm(n){let t=xd(n);return t.length===4?nt.emptyPath():Sd(t)}function la(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sd(n){return W(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function vh(n,t,e){return{name:aa(n,t),fields:e.value.mapValue.fields}}function zm(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:O()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(W(m===void 0||typeof m=="string"),bt.fromBase64String(m||"")):(W(m===void 0||m instanceof Buffer||m instanceof Uint8Array),bt.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(f){let m=f.code===void 0?C.UNKNOWN:Cd(f.code);return new R(m,f.message||"")}(a);e=new Mr(i,r,o,c||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=To(n,i.document.name),o=Xt(i.document.updateTime),a=i.document.createTime?Xt(i.document.createTime):B.min(),c=new qt({mapValue:{fields:i.document.fields}}),h=Gt.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];e=new vn(f,m,h.key,h)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=To(n,i.document),o=i.readTime?Xt(i.readTime):B.min(),a=Gt.newNoDocument(r,o),c=i.removedTargetIds||[];e=new vn([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=To(n,i.document),o=i.removedTargetIds||[];e=new vn([],o,r,null)}else{if(!("filter"in t))return O();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new ea(r,o),c=i.targetId;e=new Nr(c,a)}}return e}function qm(n,t){let e;if(t instanceof Qe)e={update:vh(n,t.key,t.value)};else if(t instanceof bi)e={delete:aa(n,t.key)};else if(t instanceof ye)e={update:vh(n,t.key,t.data),updateMask:Ym(t.fieldMask)};else{if(!(t instanceof Xo))return O();e={verify:aa(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof xn)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof He)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ke)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dn)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw O()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:Lm(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:O()}(n,t.precondition)),e}function Um(n,t){return n&&n.length>0?(W(t!==void 0),n.map(e=>function(r,o){let a=r.updateTime?Xt(r.updateTime):Xt(o);return a.isEqual(B.min())&&(a=Xt(o)),new Yo(a,r.transformResults||[])}(e,t))):[]}function Gm(n,t){return{documents:[Dd(n,t.path)]}}function $m(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Dd(n,r);let o=function(f){if(f.length!==0)return Pd($t.create(f,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(b){return{field:gn(b.field),direction:Km(b.dir)}}(m))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);let c=sa(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ht:e,parent:r}}function jm(n){let t=Bm(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){W(i===1);let m=e.from[0];m.allDescendants?r=m.collectionId:t=t.child(m.collectionId)}let o=[];e.where&&(o=function(E){let b=Rd(E);return b instanceof $t&&ud(b)?b.getFilters():[b]}(e.where));let a=[];e.orderBy&&(a=function(E){return E.map(b=>function(N){return new je(_n(N.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(e.orderBy));let c=null;e.limit&&(c=function(E){let b;return b=typeof E=="object"?E.value:E,as(b)?null:b}(e.limit));let h=null;e.startAt&&(h=function(E){let b=!!E.before,x=E.values||[];return new Cn(x,b)}(e.startAt));let f=null;return e.endAt&&(f=function(E){let b=!E.before,x=E.values||[];return new Cn(x,b)}(e.endAt)),_m(t,r,a,o,c,"F",h,f)}function Hm(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Rd(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=_n(e.unaryFilter.field);return ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=_n(e.unaryFilter.field);return ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_n(e.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=_n(e.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(n):n.fieldFilter!==void 0?function(e){return ct.create(_n(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return $t.create(e.compositeFilter.filters.map(i=>Rd(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return O()}}(e.compositeFilter.op))}(n):O()}function Km(n){return Mm[n]}function Qm(n){return Fm[n]}function Wm(n){return Om[n]}function gn(n){return{fieldPath:n.canonicalString()}}function _n(n){return Pt.fromServerFormat(n.fieldPath)}function Pd(n){return n instanceof ct?function(e){if(e.op==="=="){if(oh(e.value))return{unaryFilter:{field:gn(e.field),op:"IS_NAN"}};if(sh(e.value))return{unaryFilter:{field:gn(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(oh(e.value))return{unaryFilter:{field:gn(e.field),op:"IS_NOT_NAN"}};if(sh(e.value))return{unaryFilter:{field:gn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gn(e.field),op:Qm(e.op),value:e.value}}}(n):n instanceof $t?function(e){let i=e.getFilters().map(r=>Pd(r));return i.length===1?i[0]:{compositeFilter:{op:Wm(e.op),filters:i}}}(n):O()}function Ym(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function kd(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ci=class n{constructor(t,e,i,r,o=B.min(),a=B.min(),c=bt.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var ua=class{constructor(t){this.Tt=t}};function Xm(n){let t=jm({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wo(t,t.limit,"L"):t}var Lr=class{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(et(t.integerValue));else if("doubleValue"in t){let i=et(t.doubleValue);isNaN(i)?this.ft(e,13):(this.ft(e,15),Ii(i)?e.gt(0):e.gt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.ft(e,20),typeof i=="string"&&(i=pe(i)),e.yt(`${i.seconds||""}`),e.gt(i.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(me(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.ft(e,45),e.gt(i.latitude||0),e.gt(i.longitude||0)}else"mapValue"in t?od(t)?this.ft(e,Number.MAX_SAFE_INTEGER):sd(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):O()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){let i=t.fields||{};this.ft(e,55);for(let r of Object.keys(i))this.wt(r,e),this.Rt(i[r],e)}vt(t,e){var i,r;let o=t.fields||{};this.ft(e,53);let a=Tn,c=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.ft(e,15),e.gt(et(c)),this.wt(a,e),this.Rt(o[a],e)}Ft(t,e){let i=t.values||[];this.ft(e,50);for(let r of i)this.Rt(r,e)}Dt(t,e){this.ft(e,37),F.fromName(t).path.forEach(i=>{this.ft(e,60),this.Mt(i,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}};Lr.xt=new Lr;var ca=class{constructor(){this.Tn=new ha}addToCollectionParentIndex(t,e){return this.Tn.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve($e.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve($e.min())}updateCollectionGroup(t,e,i){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}},ha=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new mt(nt.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new mt(nt.comparator)).toArray()}};var Xy=new Uint8Array(0);var wh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nd=41943040,Lt=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(Nd,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var Vi=class n{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new n(0)}static Un(){return new n(-1)}};var Ih="LruGarbageCollector",Zm=1048576;function Eh([n,t],[e,i]){let r=U(n,e);return r===0?U(t,i):r}var da=class{constructor(t){this.Hn=t,this.buffer=new mt(Eh),this.Jn=0}Yn(){return++this.Jn}Zn(t){let e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();Eh(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},fa=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){k(Ih,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>P(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mn(e)?k(Ih,"Ignoring IndexedDB error during garbage collection: ",e):yield Nn(e)}yield this.er(3e5)}))}},pa=class{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return V.resolve(cl.ae);let i=new da(e);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.tr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(wh)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wh):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let i,r,o,a,c,h,f,m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,a=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,c=Date.now(),this.removeTargets(t,i,e))).next(E=>(o=E,h=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(f=Date.now(),pn()<=Kt.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${E} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:E})))}};function Jm(n,t){return new pa(n,t)}var ma=class{constructor(){this.changes=new ge(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Gt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?V.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var ga=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var _a=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&vi(i.mutation,r,Qt.empty(),yt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,q()).next(()=>i))}getLocalViewOfDocuments(t,e,i=q()){let r=ze();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let a=mi();return o.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){let i=ze();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,q()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((a,c)=>{e.set(a,c)})})}computeViews(t,e,i,r){let o=_e(),a=yi(),c=function(){return yi()}();return e.forEach((h,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof ye)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),vi(m.mutation,f,m.mutation.getFieldMask(),yt.now())):a.set(f.key,Qt.empty())}),this.recalculateAndSaveOverlays(t,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),e.forEach((f,m)=>{var E;return c.set(f,new ga(m,(E=a.get(f))!==null&&E!==void 0?E:null))}),c))}recalculateAndSaveOverlays(t,e){let i=yi(),r=new ot((a,c)=>a-c),o=q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(let c of a)c.keys().forEach(h=>{let f=e.get(h);if(f===null)return;let m=i.get(h)||Qt.empty();m=c.applyToLocalView(f,m),i.set(h,m);let E=(r.get(c.batchId)||q()).add(h);r=r.insert(c.batchId,E)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let h=c.getNext(),f=h.key,m=h.value,E=yd();m.forEach(b=>{if(!o.has(b)){let x=bd(e.get(b),i.get(b));x!==null&&E.set(b,x),o=o.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,E))}return V.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fd(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):V.resolve(ze()),c=wi,h=o;return a.next(f=>V.forEach(f,(m,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),o.get(m)?V.resolve():this.remoteDocumentCache.getEntry(t,m).next(b=>{h=h.insert(m,b)}))).next(()=>this.populateOverlays(t,f,o)).next(()=>this.computeViews(t,h,f,q())).next(m=>({batchId:c,changes:_d(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new F(e)).next(i=>{let r=mi();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,a=mi();return this.indexManager.getCollectionParents(t,o).next(c=>V.forEach(c,h=>{let f=function(E,b){return new xe(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(e,h.child(o));return this.getDocumentsMatchingCollectionQuery(t,f,i,r).next(m=>{m.forEach((E,b)=>{a=a.insert(E,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(a=>{o.forEach((h,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,Gt.newInvalidDocument(m)))});let c=mi();return a.forEach((h,f)=>{let m=o.get(h);m!==void 0&&vi(m.mutation,f,Qt.empty(),yt.now()),cs(e,f)&&(c=c.insert(h,f))}),c})}};var ya=class{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return V.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Xt(r.createTime)}}(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:Xm(r.bundledQuery),readTime:Xt(r.readTime)}}(e)),V.resolve()}};var va=class{constructor(){this.overlays=new ot(F.comparator),this.Rr=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){let i=ze();return V.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.Et(t,e,o)}),V.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Rr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),V.resolve()}getOverlaysForCollection(t,e,i){let r=ze(),o=e.length+1,a=new F(e.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let h=c.getNext().value,f=h.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return V.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new ot((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=ze(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let c=ze(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return V.resolve(c)}Et(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new ta(e,i));let o=this.Rr.get(e);o===void 0&&(o=q(),this.Rr.set(e,o)),this.Rr.set(e,o.add(i.key))}};var wa=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}};var xi=class{constructor(){this.Vr=new mt(ut.mr),this.gr=new mt(ut.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){let i=new ut(t,e);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.wr(new ut(t,e))}Sr(t,e){t.forEach(i=>this.removeReference(i,e))}br(t){let e=new F(new nt([])),i=new ut(e,t),r=new ut(e,t+1),o=[];return this.gr.forEachInRange([i,r],a=>{this.wr(a),o.push(a.key)}),o}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){let e=new F(new nt([])),i=new ut(e,t),r=new ut(e,t+1),o=q();return this.gr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(t){let e=new ut(t,0),i=this.Vr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},ut=class{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return F.comparator(t.key,e.key)||U(t.Cr,e.Cr)}static pr(t,e){return U(t.Cr,e.Cr)||F.comparator(t.key,e.key)}};var Ia=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new mt(ut.mr)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Zo(o,e,i,r);this.mutationQueue.push(a);for(let c of r)this.Mr=this.Mr.add(new ut(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,e){return V.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.Nr(i),o=r<0?0:r;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?hl:this.Fr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new ut(e,0),r=new ut(e,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,r],a=>{let c=this.Or(a.Cr);o.push(c)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new mt(U);return e.forEach(r=>{let o=new ut(r,0),a=new ut(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,a],c=>{i=i.add(c.Cr)})}),V.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;F.isDocumentKey(o)||(o=o.child(""));let a=new ut(new F(o),0),c=new mt(U);return this.Mr.forEachWhile(h=>{let f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.Cr)),!0)},a),V.resolve(this.Br(c))}Br(t){let e=[];return t.forEach(i=>{let r=this.Or(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){W(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return V.forEach(e.mutations,r=>{let o=new ut(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,e){let i=new ut(e,0),r=this.Mr.firstAfterOrEqual(i);return V.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){let e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Ea=class{constructor(t){this.kr=t,this.docs=function(){return new ot(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,a=this.kr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return V.resolve(i?i.document.mutableCopy():Gt.newInvalidDocument(e))}getEntries(t,e){let i=_e();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Gt.newInvalidDocument(r))}),V.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=_e(),a=e.path,c=new F(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){let{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Zp(Xp(m),i)<=0||(r.has(m.key)||cs(e,m))&&(o=o.insert(m.key,m.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(t,e,i,r){O()}qr(t,e){return V.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Ta(this)}getSize(t){return V.resolve(this.size)}},Ta=class extends ma{constructor(t){super(),this.Ir=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),V.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}};var ba=class{constructor(t){this.persistence=t,this.Qr=new ge(e=>gl(e),_l),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.$r=0,this.Kr=new xi,this.targetCount=0,this.Ur=Vi.Kn()}forEachTarget(t,e){return this.Qr.forEach((i,r)=>e(r)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.$r&&(this.$r=e),V.resolve()}zn(t){this.Qr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Ur=new Vi(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.zn(e),V.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.br(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Qr.forEach((a,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.Qr.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),V.waitFor(o).next(()=>r)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){let i=this.Qr.get(e)||null;return V.resolve(i)}addMatchingKeys(t,e,i){return this.Kr.yr(e,i),V.resolve()}removeMatchingKeys(t,e,i){this.Kr.Sr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(a=>{o.push(r.markPotentiallyOrphaned(t,a))}),V.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Kr.br(e),V.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Kr.vr(e);return V.resolve(i)}containsKey(t,e){return V.resolve(this.Kr.containsKey(e))}};var Br=class{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new cl(0),this.zr=!1,this.zr=!0,this.jr=new wa,this.referenceDelegate=t(this),this.Hr=new ba(this),this.indexManager=new ca,this.remoteDocumentCache=function(r){return new Ea(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new ua(e),this.Yr=new ya(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new va,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Wr[t.toKey()];return i||(i=new Ia(e,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,i){k("MemoryPersistence","Starting transaction:",t);let r=new Aa(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(o=>this.referenceDelegate.Xr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}ei(t,e){return V.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,e)))}},Aa=class extends No{constructor(t){super(),this.currentSequenceNumber=t}},Ca=class n{constructor(t){this.persistence=t,this.ti=new xi,this.ni=null}static ri(t){return new n(t)}get ii(){if(this.ni)return this.ni;throw O()}addReference(t,e,i){return this.ti.addReference(i,e),this.ii.delete(i.toString()),V.resolve()}removeReference(t,e,i){return this.ti.removeReference(i,e),this.ii.add(i.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),V.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(r=>this.ii.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,i=>{let r=F.fromPath(i);return this.si(t,r).next(o=>{o||e.removeEntry(r,B.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(i=>{i?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return V.or([()=>V.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}},zr=class n{constructor(t,e){this.persistence=t,this.oi=new ge(i=>nm(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Jm(this,e)}static ri(t,e){return new n(t,e)}Zr(){}Xr(t){return V.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){let e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}sr(t){let e=0;return this.rr(t,i=>{e++}).next(()=>e)}rr(t,e){return V.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(o=>o?V.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.qr(t,a=>this.ar(t,a,e).next(c=>{c||(i++,o.removeEntry(a,B.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),V.resolve()}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),V.resolve()}removeReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),V.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ir(t.data.value)),e}ar(t,e,i){return V.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{let r=this.oi.get(e);return V.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};var Va=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hi=i,this.Ji=r}static Yi(t,e){let i=q(),r=q();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var xa=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Da=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return yc()?8:tm(_c())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.rs(t,e).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ss(t,e,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new xa;return this._s(t,e,a).next(c=>{if(o.result=c,this.Xi)return this.us(t,e,a,c.size)})}).next(()=>o.result)}us(t,e,i,r){return i.documentReadCount<this.es?(pn()<=Kt.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",mn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(pn()<=Kt.DEBUG&&k("QueryEngine","Query:",mn(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(pn()<=Kt.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",mn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Yt(e))):V.resolve())}rs(t,e){if(ch(e))return V.resolve(null);let i=Yt(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Wo(e,null,"F"),i=Yt(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let a=q(...o);return this.ns.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(h=>{let f=this.cs(e,c);return this.ls(e,f,a,h.readTime)?this.rs(t,Wo(e,null,"F")):this.hs(t,f,e,h)}))})))}ss(t,e,i,r){return ch(e)||r.isEqual(B.min())?V.resolve(null):this.ns.getDocuments(t,i).next(o=>{let a=this.cs(e,o);return this.ls(e,a,i,r)?V.resolve(null):(pn()<=Kt.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mn(e)),this.hs(t,a,e,Yp(r,wi)).next(c=>c))})}cs(t,e){let i=new mt(md(t));return e.forEach((r,o)=>{cs(t,o)&&(i=i.add(o))}),i}ls(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}_s(t,e,i){return pn()<=Kt.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",mn(e)),this.ns.getDocumentsMatchingQuery(t,e,$e.min(),i)}hs(t,e,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(a=>{o=o.insert(a.key,a)}),o))}};var Il="LocalStore",tg=3e8,Sa=class{constructor(t,e,i,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new ot(U),this.Is=new ge(o=>gl(o),_l),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _a(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}};function eg(n,t,e,i){return new Sa(n,t,e,i)}function Md(n,t){return P(this,null,function*(){let e=L(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.As(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],h=q();for(let f of r){a.push(f.batchId);for(let m of f.mutations)h=h.add(m.key)}for(let f of o){c.push(f.batchId);for(let m of f.mutations)h=h.add(m.key)}return e.localDocuments.getDocuments(i,h).next(f=>({Rs:f,removedBatchIds:a,addedBatchIds:c}))})})})}function ng(n,t){let e=L(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.ds.newChangeBuffer({trackRemovals:!0});return function(c,h,f,m){let E=f.batch,b=E.keys(),x=V.resolve();return b.forEach(N=>{x=x.next(()=>m.getEntry(h,N)).next(M=>{let S=f.docVersions.get(N);W(S!==null),M.version.compareTo(S)<0&&(E.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),m.addEntry(M)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(h,E))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=q();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Fd(n){let t=L(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function ig(n,t){let e=L(n),i=t.snapshotVersion,r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;let c=[];t.targetChanges.forEach((m,E)=>{let b=r.get(E);if(!b)return;c.push(e.Hr.removeMatchingKeys(o,m.removedDocuments,E).next(()=>e.Hr.addMatchingKeys(o,m.addedDocuments,E)));let x=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(E)!==null?x=x.withResumeToken(bt.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,i)),r=r.insert(E,x),function(M,S,H){return M.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=tg?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(b,x,m)&&c.push(e.Hr.updateTargetData(o,x))});let h=_e(),f=q();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(rg(o,a,t.documentUpdates).next(m=>{h=m.Vs,f=m.fs})),!i.isEqual(B.min())){let m=e.Hr.getLastRemoteSnapshotVersion(o).next(E=>e.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return V.waitFor(c).next(()=>a.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(e.Ts=r,o))}function rg(n,t,e){let i=q(),r=q();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let a=_e();return e.forEach((c,h)=>{let f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(B.min())?(t.removeEntry(c,h.readTime),a=a.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(h),a=a.insert(c,h)):k(Il,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{Vs:a,fs:r}})}function sg(n,t){let e=L(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=hl),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function og(n,t){let e=L(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Hr.getTargetData(i,t).next(o=>o?(r=o,V.resolve(r)):e.Hr.allocateTargetId(i).next(a=>(r=new Ci(t,a,"TargetPurposeListen",i.currentSequenceNumber),e.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(i.targetId,i),e.Is.set(t,i.targetId)),i})}function Ra(n,t,e){return P(this,null,function*(){let i=L(n),r=i.Ts.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Mn(a))throw a;k(Il,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)})}function Th(n,t,e){let i=L(n),r=B.min(),o=q();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){let E=L(h),b=E.Is.get(m);return b!==void 0?V.resolve(E.Ts.get(b)):E.Hr.getTargetData(f,m)}(i,a,Yt(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,c.targetId).next(h=>{o=h})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,t,e?r:B.min(),e?o:q())).next(c=>(ag(i,vm(t),c),{documents:c,gs:o})))}function ag(n,t,e){let i=n.Es.get(t)||B.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(t,i)}var qr=class{constructor(){this.activeTargetIds=Am()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Pa=class{constructor(){this.ho=new qr,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,i){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new qr,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var ka=class{To(t){}shutdown(){}};var bh="ConnectivityMonitor",Ur=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){k(bh,"Network connectivity changed: AVAILABLE");for(let t of this.Vo)t(0)}Ro(){k(bh,"Network connectivity changed: UNAVAILABLE");for(let t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wr=null;function Na(){return wr===null?wr=function(){return 268435456+Math.round(2147483648*Math.random())}():wr++,"0x"+wr.toString(16)}var bo="RestConnection",lg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ma=class{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===Sr?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,e,i,r,o){let a=Na(),c=this.bo(t,e.toUriEncodedString());k(bo,`Sending RPC '${t}' ${a}:`,c,i);let h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,r,o),this.vo(t,c,h,i).then(f=>(k(bo,`Received RPC '${t}' ${a}: `,f),f),f=>{throw In(bo,`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}Co(t,e,i,r,o,a){return this.So(t,e,i,r,o)}Do(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}bo(t,e){let i=lg[t];return`${this.po}/v1/${e}:${i}`}terminate(){}};var Fa=class{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}};var Tt="WebChannelConnection",Oa=class extends Ma{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,i,r){let o=Na();return new Promise((a,c)=>{let h=new yo;h.setWithCredentials(!0),h.listenOnce(vo.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case pi.NO_ERROR:let m=h.getResponseJson();k(Tt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(m)),a(m);break;case pi.TIMEOUT:k(Tt,`RPC '${t}' ${o} timed out`),c(new R(C.DEADLINE_EXCEEDED,"Request time out"));break;case pi.HTTP_ERROR:let E=h.getStatus();if(k(Tt,`RPC '${t}' ${o} failed with status:`,E,"response text:",h.getResponseText()),E>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);let x=b?.error;if(x&&x.status&&x.message){let N=function(S){let H=S.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(H)>=0?H:C.UNKNOWN}(x.status);c(new R(N,x.message))}else c(new R(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new R(C.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{k(Tt,`RPC '${t}' ${o} completed.`)}});let f=JSON.stringify(r);k(Tt,`RPC '${t}' ${o} sending request:`,r),h.send(e,"POST",f,i,15)})}Wo(t,e,i){let r=Na(),o=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Eo(),c=Io(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;let m=o.join("");k(Tt,`Creating RPC '${t}' stream ${r}: ${m}`,h);let E=a.createWebChannel(m,h),b=!1,x=!1,N=new Fa({Fo:S=>{x?k(Tt,`Not sending because RPC '${t}' stream ${r} is closed:`,S):(b||(k(Tt,`Opening RPC '${t}' stream ${r} transport.`),E.open(),b=!0),k(Tt,`RPC '${t}' stream ${r} sending:`,S),E.send(S))},Mo:()=>E.close()}),M=(S,H,$)=>{S.listen(H,K=>{try{$(K)}catch(it){setTimeout(()=>{throw it},0)}})};return M(E,fn.EventType.OPEN,()=>{x||(k(Tt,`RPC '${t}' stream ${r} transport opened.`),N.Qo())}),M(E,fn.EventType.CLOSE,()=>{x||(x=!0,k(Tt,`RPC '${t}' stream ${r} transport closed`),N.Ko())}),M(E,fn.EventType.ERROR,S=>{x||(x=!0,In(Tt,`RPC '${t}' stream ${r} transport errored:`,S),N.Ko(new R(C.UNAVAILABLE,"The operation could not be completed")))}),M(E,fn.EventType.MESSAGE,S=>{var H;if(!x){let $=S.data[0];W(!!$);let K=$,it=K?.error||((H=K[0])===null||H===void 0?void 0:H.error);if(it){k(Tt,`RPC '${t}' stream ${r} received error:`,it);let kt=it.status,Z=function(_){let y=lt[_];if(y!==void 0)return Cd(y)}(kt),w=it.message;Z===void 0&&(Z=C.INTERNAL,w="Unknown error status: "+kt+" with message "+it.message),x=!0,N.Ko(new R(Z,w)),E.close()}else k(Tt,`RPC '${t}' stream ${r} received:`,$),N.Uo($)}}),M(c,wo.STAT_EVENT,S=>{S.stat===_r.PROXY?k(Tt,`RPC '${t}' stream ${r} detected buffering proxy`):S.stat===_r.NOPROXY&&k(Tt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}};function Ao(){return typeof document<"u"?document:null}function hs(n){return new ra(n,!0)}var Gr=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Ti=t,this.timerId=e,this.Go=i,this.zo=r,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();let e=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-i);r>0&&k("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var Ah="PersistentStream",$r=class{constructor(t,e,i,r,o,a,c,h){this.Ti=t,this.n_=i,this.r_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Gr(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return P(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}T_(){return P(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(t,e){return P(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===C.RESOURCE_EXHAUSTED?(fe(e.toString()),fe("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Lo(e)})}A_(){}auth(){this.state=1;let t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===e&&this.V_(i,r)},i=>{t(()=>{let r=new R(C.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,e){let i=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(()=>P(this,null,function*(){this.state=0,this.start()}))}m_(t){return k(Ah,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(k(Ah,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},La=class extends $r{constructor(t,e,i,r,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,a),this.serializer=o}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();let e=zm(this.serializer,t),i=function(o){if(!("targetChange"in o))return B.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?B.min():a.readTime?Xt(a.readTime):B.min()}(t);return this.listener.p_(e,i)}y_(t){let e={};e.database=la(this.serializer),e.addTarget=function(o,a){let c,h=a.target;if(c=Ko(h)?{documents:Gm(o,h)}:{query:$m(o,h).ht},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Vd(o,a.resumeToken);let f=sa(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(B.min())>0){c.readTime=Or(o,a.snapshotVersion.toTimestamp());let f=sa(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,t);let i=Hm(this.serializer,t);i&&(e.labels=i),this.I_(e)}w_(t){let e={};e.database=la(this.serializer),e.removeTarget=t,this.I_(e)}},Ba=class extends $r{constructor(t,e,i,r,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,a),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return W(!!t.streamToken),this.lastStreamToken=t.streamToken,W(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){W(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();let e=Um(t.writeResults,t.commitTime),i=Xt(t.commitTime);return this.listener.v_(i,e)}C_(){let t={};t.database=la(this.serializer),this.I_(t)}b_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>qm(this.serializer,i))};this.I_(e)}};var za=class{},qa=class extends za{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new R(C.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.So(t,oa(e,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(C.UNKNOWN,o.toString())})}Co(t,e,i,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Co(t,oa(e,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new R(C.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},Ua=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fe(e),this.N_=!1):k("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var We="RemoteStore",Ga=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(a=>{i.enqueueAndForget(()=>P(this,null,function*(){Ze(this)&&(k(We,"Restarting streams for network reachability change."),yield function(h){return P(this,null,function*(){let f=L(h);f.W_.add(4),yield Ni(f),f.j_.set("Unknown"),f.W_.delete(4),yield ds(f)})}(this))}))}),this.j_=new Ua(i,r)}};function ds(n){return P(this,null,function*(){if(Ze(n))for(let t of n.G_)yield t(!0)})}function Ni(n){return P(this,null,function*(){for(let t of n.G_)yield t(!1)})}function Od(n,t){let e=L(n);e.U_.has(t.targetId)||(e.U_.set(t.targetId,t),Al(e)?bl(e):Fn(e).c_()&&Tl(e,t))}function El(n,t){let e=L(n),i=Fn(e);e.U_.delete(t),i.c_()&&Ld(e,t),e.U_.size===0&&(i.c_()?i.P_():Ze(e)&&e.j_.set("Unknown"))}function Tl(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(B.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Fn(n).y_(t)}function Ld(n,t){n.H_.Ne(t),Fn(n).w_(t)}function bl(n){n.H_=new ia({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.U_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Fn(n).start(),n.j_.B_()}function Al(n){return Ze(n)&&!Fn(n).u_()&&n.U_.size>0}function Ze(n){return L(n).W_.size===0}function Bd(n){n.H_=void 0}function ug(n){return P(this,null,function*(){n.j_.set("Online")})}function cg(n){return P(this,null,function*(){n.U_.forEach((t,e)=>{Tl(n,t)})})}function hg(n,t){return P(this,null,function*(){Bd(n),Al(n)?(n.j_.q_(t),bl(n)):n.j_.set("Unknown")})}function dg(n,t,e){return P(this,null,function*(){if(n.j_.set("Online"),t instanceof Mr&&t.state===2&&t.cause)try{yield function(r,o){return P(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.U_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.U_.delete(c),r.H_.removeTarget(c))})}(n,t)}catch(i){k(We,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield jr(n,i)}else if(t instanceof vn?n.H_.We(t):t instanceof Nr?n.H_.Ze(t):n.H_.je(t),!e.isEqual(B.min()))try{let i=yield Fd(n.localStore);e.compareTo(i)>=0&&(yield function(o,a){let c=o.H_.ot(a);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){let m=o.U_.get(f);m&&o.U_.set(f,m.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,f)=>{let m=o.U_.get(h);if(!m)return;o.U_.set(h,m.withResumeToken(bt.EMPTY_BYTE_STRING,m.snapshotVersion)),Ld(o,h);let E=new Ci(m.target,h,f,m.sequenceNumber);Tl(o,E)}),o.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){k(We,"Failed to raise snapshot:",i),yield jr(n,i)}})}function jr(n,t,e){return P(this,null,function*(){if(!Mn(t))throw t;n.W_.add(1),yield Ni(n),n.j_.set("Offline"),e||(e=()=>Fd(n.localStore)),n.asyncQueue.enqueueRetryable(()=>P(this,null,function*(){k(We,"Retrying IndexedDB access"),yield e(),n.W_.delete(1),yield ds(n)}))})}function zd(n,t){return t().catch(e=>jr(n,e,t))}function fs(n){return P(this,null,function*(){let t=L(n),e=De(t),i=t.K_.length>0?t.K_[t.K_.length-1].batchId:hl;for(;fg(t);)try{let r=yield sg(t.localStore,i);if(r===null){t.K_.length===0&&e.P_();break}i=r.batchId,pg(t,r)}catch(r){yield jr(t,r)}qd(t)&&Ud(t)})}function fg(n){return Ze(n)&&n.K_.length<10}function pg(n,t){n.K_.push(t);let e=De(n);e.c_()&&e.S_&&e.b_(t.mutations)}function qd(n){return Ze(n)&&!De(n).u_()&&n.K_.length>0}function Ud(n){De(n).start()}function mg(n){return P(this,null,function*(){De(n).C_()})}function gg(n){return P(this,null,function*(){let t=De(n);for(let e of n.K_)t.b_(e.mutations)})}function _g(n,t,e){return P(this,null,function*(){let i=n.K_.shift(),r=Jo.from(i,t,e);yield zd(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield fs(n)})}function yg(n,t){return P(this,null,function*(){t&&De(n).S_&&(yield function(i,r){return P(this,null,function*(){if(function(a){return Pm(a)&&a!==C.ABORTED}(r.code)){let o=i.K_.shift();De(i).h_(),yield zd(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield fs(i)}})}(n,t)),qd(n)&&Ud(n)})}function Ch(n,t){return P(this,null,function*(){let e=L(n);e.asyncQueue.verifyOperationInProgress(),k(We,"RemoteStore received new credentials");let i=Ze(e);e.W_.add(3),yield Ni(e),i&&e.j_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),yield ds(e)})}function vg(n,t){return P(this,null,function*(){let e=L(n);t?(e.W_.delete(2),yield ds(e)):t||(e.W_.add(2),yield Ni(e),e.j_.set("Unknown"))})}function Fn(n){return n.J_||(n.J_=function(e,i,r){let o=L(e);return o.M_(),new La(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{xo:ug.bind(null,n),No:cg.bind(null,n),Lo:hg.bind(null,n),p_:dg.bind(null,n)}),n.G_.push(t=>P(this,null,function*(){t?(n.J_.h_(),Al(n)?bl(n):n.j_.set("Unknown")):(yield n.J_.stop(),Bd(n))}))),n.J_}function De(n){return n.Y_||(n.Y_=function(e,i,r){let o=L(e);return o.M_(),new Ba(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:mg.bind(null,n),Lo:yg.bind(null,n),D_:gg.bind(null,n),v_:_g.bind(null,n)}),n.G_.push(t=>P(this,null,function*(){t?(n.Y_.h_(),yield fs(n)):(yield n.Y_.stop(),n.K_.length>0&&(k(We,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))}))),n.Y_}var $a=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let a=Date.now()+i,c=new n(t,e,a,r,o);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(C.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Cl(n,t){if(fe("AsyncQueue",`${t}: ${n}`),Mn(n))return new R(C.UNAVAILABLE,`${t}: ${n}`);throw n}var Hr=class n{static emptySet(t){return new n(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||F.comparator(e.key,i.key):(e,i)=>F.comparator(e.key,i.key),this.keyedMap=mi(),this.sortedSet=new ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Kr=class{constructor(){this.Z_=new ot(F.comparator)}track(t){let e=t.doc.key,i=this.Z_.get(e);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(e):t.type===1&&i.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):O():this.Z_=this.Z_.insert(e,t)}X_(){let t=[];return this.Z_.inorderTraversal((e,i)=>{t.push(i)}),t}},Rn=class n{constructor(t,e,i,r,o,a,c,h,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,r,o){let a=[];return e.forEach(c=>{a.push({type:0,doc:c})}),new n(t,e,Hr.emptySet(e),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&us(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var ja=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}},Ha=class{constructor(){this.queries=Vh(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,i){let r=L(e),o=r.queries;r.queries=Vh(),o.forEach((a,c)=>{for(let h of c.ta)h.onError(i)})})(this,new R(C.ABORTED,"Firestore shutting down"))}};function Vh(){return new ge(n=>pd(n),us)}function Gd(n,t){return P(this,null,function*(){let e=L(n),i=3,r=t.query,o=e.queries.get(r);o?!o.na()&&t.ra()&&(i=2):(o=new ja,i=t.ra()?0:1);try{switch(i){case 0:o.ea=yield e.onListen(r,!0);break;case 1:o.ea=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(a){let c=Cl(a,`Initialization of query '${mn(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,o),o.ta.push(t),t.sa(e.onlineState),o.ea&&t.oa(o.ea)&&Vl(e)})}function $d(n,t){return P(this,null,function*(){let e=L(n),i=t.query,r=3,o=e.queries.get(i);if(o){let a=o.ta.indexOf(t);a>=0&&(o.ta.splice(a,1),o.ta.length===0?r=t.ra()?0:1:!o.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function wg(n,t){let e=L(n),i=!1;for(let r of t){let o=r.query,a=e.queries.get(o);if(a){for(let c of a.ta)c.oa(r)&&(i=!0);a.ea=r}}i&&Vl(e)}function Ig(n,t,e){let i=L(n),r=i.queries.get(t);if(r)for(let o of r.ta)o.onError(e);i.queries.delete(t)}function Vl(n){n.ia.forEach(t=>{t.next()})}var Ka,xh;(xh=Ka||(Ka={}))._a="default",xh.Cache="cache";var Qr=class{constructor(t,e,i){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Rn(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;let i=e!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;let e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=Rn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Ka.Cache}};var Wr=class{constructor(t){this.key=t}},Yr=class{constructor(t){this.key=t}},Qa=class{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=q(),this.mutatedKeys=q(),this.ya=md(t),this.wa=new Hr(this.ya)}get Sa(){return this.fa}ba(t,e){let i=e?e.Da:new Kr,r=e?e.wa:this.wa,o=e?e.mutatedKeys:this.mutatedKeys,a=r,c=!1,h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((m,E)=>{let b=r.get(m),x=cs(this.query,E)?E:null,N=!!b&&this.mutatedKeys.has(b.key),M=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations),S=!1;b&&x?b.data.isEqual(x.data)?N!==M&&(i.track({type:3,doc:x}),S=!0):this.va(b,x)||(i.track({type:2,doc:x}),S=!0,(h&&this.ya(x,h)>0||f&&this.ya(x,f)<0)&&(c=!0)):!b&&x?(i.track({type:0,doc:x}),S=!0):b&&!x&&(i.track({type:1,doc:b}),S=!0,(h||f)&&(c=!0)),S&&(x?(a=a.add(x),o=M?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{wa:a,Da:i,ls:c,mutatedKeys:o}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;let a=t.Da.X_();a.sort((m,E)=>function(x,N){let M=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return M(x)-M(N)}(m.type,E.type)||this.ya(m.doc,E.doc)),this.Ca(i),r=r!=null&&r;let c=e&&!r?this.Fa():[],h=this.pa.size===0&&this.current&&!r?1:0,f=h!==this.ga;return this.ga=h,a.length!==0||f?{snapshot:new Rn(this.query,t.wa,o,a,t.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Kr,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];let t=this.pa;this.pa=q(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});let e=[];return t.forEach(i=>{this.pa.has(i)||e.push(new Yr(i))}),this.pa.forEach(i=>{t.has(i)||e.push(new Wr(i))}),e}Oa(t){this.fa=t.gs,this.pa=q();let e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return Rn.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},xl="SyncEngine",Wa=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Ya=class{constructor(t){this.key=t,this.Ba=!1}},Xa=class{constructor(t,e,i,r,o,a){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new ge(c=>pd(c),us),this.qa=new Map,this.Qa=new Set,this.$a=new ot(F.comparator),this.Ka=new Map,this.Ua=new xi,this.Wa={},this.Ga=new Map,this.za=Vi.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function Eg(n,t,e=!0){return P(this,null,function*(){let i=Yd(n),r,o=i.ka.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Na()):r=yield jd(i,t,e,!0),r})}function Tg(n,t){return P(this,null,function*(){let e=Yd(n);yield jd(e,t,!0,!1)})}function jd(n,t,e,i){return P(this,null,function*(){let r=yield og(n.localStore,Yt(t)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,e),c;return i&&(c=yield bg(n,t,o,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&Od(n.remoteStore,r),c})}function bg(n,t,e,i,r){return P(this,null,function*(){n.Ha=(E,b,x)=>function(M,S,H,$){return P(this,null,function*(){let K=S.view.ba(H);K.ls&&(K=yield Th(M.localStore,S.query,!1).then(({documents:w})=>S.view.ba(w,K)));let it=$&&$.targetChanges.get(S.targetId),kt=$&&$.targetMismatches.get(S.targetId)!=null,Z=S.view.applyChanges(K,M.isPrimaryClient,it,kt);return Sh(M,S.targetId,Z.Ma),Z.snapshot})}(n,E,b,x);let o=yield Th(n.localStore,t,!0),a=new Qa(t,o.gs),c=a.ba(o.documents),h=Ai.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),f=a.applyChanges(c,n.isPrimaryClient,h);Sh(n,e,f.Ma);let m=new Wa(t,e,a);return n.ka.set(t,m),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),f.snapshot})}function Ag(n,t,e){return P(this,null,function*(){let i=L(n),r=i.ka.get(t),o=i.qa.get(r.targetId);if(o.length>1)return i.qa.set(r.targetId,o.filter(a=>!us(a,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ra(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&El(i.remoteStore,r.targetId),Za(i,r.targetId)}).catch(Nn))):(Za(i,r.targetId),yield Ra(i.localStore,r.targetId,!0))})}function Cg(n,t){return P(this,null,function*(){let e=L(n),i=e.ka.get(t),r=e.qa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),El(e.remoteStore,i.targetId))})}function Vg(n,t,e){return P(this,null,function*(){let i=Ng(n);try{let r=yield function(a,c){let h=L(a),f=yt.now(),m=c.reduce((x,N)=>x.add(N.key),q()),E,b;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=_e(),M=q();return h.ds.getEntries(x,m).next(S=>{N=S,N.forEach((H,$)=>{$.isValidDocument()||(M=M.add(H))})}).next(()=>h.localDocuments.getOverlayedDocuments(x,N)).next(S=>{E=S;let H=[];for(let $ of c){let K=Rm($,E.get($.key).overlayedDocument);K!=null&&H.push(new ye($.key,K,ad(K.value.mapValue),de.exists(!0)))}return h.mutationQueue.addMutationBatch(x,f,H,c)}).next(S=>{b=S;let H=S.applyToLocalDocumentSet(E,M);return h.documentOverlayCache.saveOverlays(x,S.batchId,H)})}).then(()=>({batchId:b.batchId,changes:_d(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,h){let f=a.Wa[a.currentUser.toKey()];f||(f=new ot(U)),f=f.insert(c,h),a.Wa[a.currentUser.toKey()]=f}(i,r.batchId,e),yield Mi(i,r.changes),yield fs(i.remoteStore)}catch(r){let o=Cl(r,"Failed to persist write");e.reject(o)}})}function Hd(n,t){return P(this,null,function*(){let e=L(n);try{let i=yield ig(e.localStore,t);t.targetChanges.forEach((r,o)=>{let a=e.Ka.get(o);a&&(W(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ba=!0:r.modifiedDocuments.size>0?W(a.Ba):r.removedDocuments.size>0&&(W(a.Ba),a.Ba=!1))}),yield Mi(e,i,t)}catch(i){yield Nn(i)}})}function Dh(n,t,e){let i=L(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ka.forEach((o,a)=>{let c=a.view.sa(t);c.snapshot&&r.push(c.snapshot)}),function(a,c){let h=L(a);h.onlineState=c;let f=!1;h.queries.forEach((m,E)=>{for(let b of E.ta)b.sa(c)&&(f=!0)}),f&&Vl(h)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function xg(n,t,e){return P(this,null,function*(){let i=L(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Ka.get(t),o=r&&r.key;if(o){let a=new ot(F.comparator);a=a.insert(o,Gt.newNoDocument(o,B.min()));let c=q().add(o),h=new kr(B.min(),new Map,new ot(U),a,c);yield Hd(i,h),i.$a=i.$a.remove(o),i.Ka.delete(t),Dl(i)}else yield Ra(i.localStore,t,!1).then(()=>Za(i,t,e)).catch(Nn)})}function Dg(n,t){return P(this,null,function*(){let e=L(n),i=t.batch.batchId;try{let r=yield ng(e.localStore,t);Qd(e,i,null),Kd(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Mi(e,r)}catch(r){yield Nn(r)}})}function Sg(n,t,e){return P(this,null,function*(){let i=L(n);try{let r=yield function(a,c){let h=L(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next(E=>(W(E!==null),m=E.keys(),h.mutationQueue.removeMutationBatch(f,E))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,t);Qd(i,t,e),Kd(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Mi(i,r)}catch(r){yield Nn(r)}})}function Kd(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function Qd(n,t,e){let i=L(n),r=i.Wa[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Wa[i.currentUser.toKey()]=r}}function Za(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.qa.get(t))n.ka.delete(i),e&&n.La.Ja(i,e);n.qa.delete(t),n.isPrimaryClient&&n.Ua.br(t).forEach(i=>{n.Ua.containsKey(i)||Wd(n,i)})}function Wd(n,t){n.Qa.delete(t.path.canonicalString());let e=n.$a.get(t);e!==null&&(El(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ka.delete(e),Dl(n))}function Sh(n,t,e){for(let i of e)i instanceof Wr?(n.Ua.addReference(i.key,t),Rg(n,i)):i instanceof Yr?(k(xl,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,t),n.Ua.containsKey(i.key)||Wd(n,i.key)):O()}function Rg(n,t){let e=t.key,i=e.path.canonicalString();n.$a.get(e)||n.Qa.has(i)||(k(xl,"New document in limbo: "+e),n.Qa.add(i),Dl(n))}function Dl(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let t=n.Qa.values().next().value;n.Qa.delete(t);let e=new F(nt.fromString(t)),i=n.za.next();n.Ka.set(i,new Ya(e)),n.$a=n.$a.insert(e,i),Od(n.remoteStore,new Ci(Yt(yl(e.path)),i,"TargetPurposeLimboResolution",cl.ae))}}function Mi(n,t,e){return P(this,null,function*(){let i=L(n),r=[],o=[],a=[];i.ka.isEmpty()||(i.ka.forEach((c,h)=>{a.push(i.Ha(h,t,e).then(f=>{var m;if((f||e)&&i.isPrimaryClient){let E=f?!f.fromCache:(m=e?.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(f){r.push(f);let E=Va.Yi(h.targetId,f);o.push(E)}}))}),yield Promise.all(a),i.La.p_(r),yield function(h,f){return P(this,null,function*(){let m=L(h);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>V.forEach(f,b=>V.forEach(b.Hi,x=>m.persistence.referenceDelegate.addReference(E,b.targetId,x)).next(()=>V.forEach(b.Ji,x=>m.persistence.referenceDelegate.removeReference(E,b.targetId,x)))))}catch(E){if(!Mn(E))throw E;k(Il,"Failed to update sequence numbers: "+E)}for(let E of f){let b=E.targetId;if(!E.fromCache){let x=m.Ts.get(b),N=x.snapshotVersion,M=x.withLastLimboFreeSnapshotVersion(N);m.Ts=m.Ts.insert(b,M)}}})}(i.localStore,o))})}function Pg(n,t){return P(this,null,function*(){let e=L(n);if(!e.currentUser.isEqual(t)){k(xl,"User change. New user:",t.toKey());let i=yield Md(e.localStore,t);e.currentUser=t,function(o,a){o.Ga.forEach(c=>{c.forEach(h=>{h.reject(new R(C.CANCELLED,a))})}),o.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Mi(e,i.Rs)}})}function kg(n,t){let e=L(n),i=e.Ka.get(t);if(i&&i.Ba)return q().add(i.key);{let r=q(),o=e.qa.get(t);if(!o)return r;for(let a of o){let c=e.ka.get(a);r=r.unionWith(c.view.Sa)}return r}}function Yd(n){let t=L(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xg.bind(null,t),t.La.p_=wg.bind(null,t.eventManager),t.La.Ja=Ig.bind(null,t.eventManager),t}function Ng(n){let t=L(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sg.bind(null,t),t}var Xd=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return P(this,null,function*(){this.serializer=hs(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),yield this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)})}tu(e,i){return null}nu(e,i){return null}eu(e){return eg(this.persistence,new Da,e.initialUser,this.serializer)}Xa(e){return new Br(Ca.ri,this.serializer)}Za(e){return new Pa}terminate(){return P(this,null,function*(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Ja=class extends Xd{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){W(this.persistence.referenceDelegate instanceof zr);let i=this.persistence.referenceDelegate.garbageCollector;return new fa(i,t.asyncQueue,e)}Xa(t){let e=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new Br(i=>zr.ri(i,e),this.serializer)}};var Mg=(()=>{class n{initialize(e,i){return P(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pg.bind(null,this.syncEngine),yield vg(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ha}()}createDatastore(e){let i=hs(e.databaseInfo.databaseId),r=function(a){return new Oa(a)}(e.databaseInfo);return function(a,c,h,f){return new qa(a,c,h,f)}(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return function(r,o,a,c,h){return new Ga(r,o,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,i=>Dh(this.syncEngine,i,0),function(){return Ur.D()?new Ur:new ka}())}createSyncEngine(e,i){return function(o,a,c,h,f,m,E){let b=new Xa(o,a,c,h,f,m);return E&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return P(this,null,function*(){var e,i;yield function(o){return P(this,null,function*(){let a=L(o);k(We,"RemoteStore shutting down."),a.W_.add(5),yield Ni(a),a.z_.shutdown(),a.j_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Xr=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):fe("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}};var Se="FirestoreClient",tl=class{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=Cr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>P(this,null,function*(){k(Se,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(k(Se,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>P(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=Cl(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Co(n,t){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k(Se,"Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>P(this,null,function*(){i.isEqual(r)||(yield Md(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function Rh(n,t){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield Fg(n);k(Se,"Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Ch(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Ch(t.remoteStore,r)),n._onlineComponents=t})}function Fg(n){return P(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k(Se,"Using user provided OfflineComponentProvider");try{yield Co(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!function(r){return r.name==="FirebaseError"?r.code===C.FAILED_PRECONDITION||r.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;In("Error using user provided cache. Falling back to memory cache: "+e),yield Co(n,new Xd)}}else k(Se,"Using default OfflineComponentProvider"),yield Co(n,new Ja(void 0));return n._offlineComponents})}function Zd(n){return P(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k(Se,"Using user provided OnlineComponentProvider"),yield Rh(n,n._uninitializedComponentsProvider._online)):(k(Se,"Using default OnlineComponentProvider"),yield Rh(n,new Mg))),n._onlineComponents})}function Og(n){return Zd(n).then(t=>t.syncEngine)}function Jd(n){return P(this,null,function*(){let t=yield Zd(n),e=t.eventManager;return e.onListen=Eg.bind(null,t.syncEngine),e.onUnlisten=Ag.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Tg.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Cg.bind(null,t.syncEngine),e})}function Lg(n,t,e={}){let i=new Ut;return n.asyncQueue.enqueueAndForget(()=>P(this,null,function*(){return function(o,a,c,h,f){let m=new Xr({next:b=>{m.su(),a.enqueueAndForget(()=>$d(o,E));let x=b.docs.has(c);!x&&b.fromCache?f.reject(new R(C.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&b.fromCache&&h&&h.source==="server"?f.reject(new R(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),E=new Qr(yl(c.path),m,{includeMetadataChanges:!0,Ta:!0});return Gd(o,E)}(yield Jd(n),n.asyncQueue,t,e,i)})),i.promise}function Bg(n,t,e={}){let i=new Ut;return n.asyncQueue.enqueueAndForget(()=>P(this,null,function*(){return function(o,a,c,h,f){let m=new Xr({next:b=>{m.su(),a.enqueueAndForget(()=>$d(o,E)),b.fromCache&&h.source==="server"?f.reject(new R(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),E=new Qr(c,m,{includeMetadataChanges:!0,Ta:!0});return Gd(o,E)}(yield Jd(n),n.asyncQueue,t,e,i)})),i.promise}function tf(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var Ph=new Map;function ef(n,t,e){if(!e)throw new R(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function zg(n,t,e,i){if(t===!0&&i===!0)throw new R(C.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function kh(n){if(!F.isDocumentKey(n))throw new R(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nh(n){if(F.isDocumentKey(n))throw new R(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ps(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":O()}function ve(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new R(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=ps(n);throw new R(C.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var nf="firestore.googleapis.com",Mh=!0,Zr=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new R(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nf,this.ssl=Mh}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Mh;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Nd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Zm)throw new R(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tf((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new R(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new R(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new R(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Pn=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zr({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new R(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new R(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zr(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Vo;switch(i.type){case"firstParty":return new Ro(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new R(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return P(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=Ph.get(e);i&&(k("ComponentProvider","Removing Datastore"),Ph.delete(e),i.terminate())}(this),Promise.resolve()}};function rf(n,t,e,i={}){var r;let o=(n=ve(n,Pn))._getSettings(),a=`${t}:${e}`;if(o.host!==nf&&o.host!==a&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,h;if(typeof i.mockUserToken=="string")c=i.mockUserToken,h=pt.MOCK_USER;else{c=gc(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new R(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new pt(f)}n._authCredentials=new xo(new br(c,h))}}var Ye=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},Dt=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ce(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},Ce=class n extends Ye{constructor(t,e,i){super(t,e,yl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Dt(this.firestore,null,new F(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function sf(n,t,...e){if(n=Le(n),ef("collection","path",t),n instanceof Pn){let i=nt.fromString(t,...e);return Nh(i),new Ce(n,null,i)}{if(!(n instanceof Dt||n instanceof Ce))throw new R(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(nt.fromString(t,...e));return Nh(i),new Ce(n.firestore,null,i)}}function Sl(n,t,...e){if(n=Le(n),arguments.length===1&&(t=Cr.newId()),ef("doc","path",t),n instanceof Pn){let i=nt.fromString(t,...e);return kh(i),new Dt(n,null,new F(i))}{if(!(n instanceof Dt||n instanceof Ce))throw new R(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(nt.fromString(t,...e));return kh(i),new Dt(n.firestore,n instanceof Ce?n.converter:null,new F(i))}}var Fh="AsyncQueue",Jr=class{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Gr(this,"async_queue_retry"),this.Su=()=>{let i=Ao();i&&k(Fh,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;let e=Ao();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;let e=Ao();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});let e=new Ut;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}Cu(){return P(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Mn(t))throw t;k(Fh,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(t){let e=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw fe("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=e,e}enqueueAfterDelay(t,e,i){this.Du(),this.wu.indexOf(t)>-1&&(e=0);let r=$a.createAndSchedule(this,t,e,i,o=>this.Fu(o));return this.fu.push(r),r}Du(){this.gu&&O()}verifyOperationInProgress(){}Mu(){return P(this,null,function*(){let t;do t=this.bu,yield t;while(t!==this.bu)})}xu(t){for(let e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){let e=this.fu.indexOf(t);this.fu.splice(e,1)}};var Re=class extends Pn{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Jr,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return P(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Jr(t),this._firestoreClient=void 0,yield t}})}};function of(n,t){let e=typeof n=="object"?n:Cc(),i=typeof n=="string"?n:t||Sr,r=Tc(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=mc("firestore");o&&rf(r,...o)}return r}function Rl(n){if(n._terminated)throw new R(C.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qg(n),n._firestoreClient}function qg(n){var t,e,i;let r=n._freezeSettings(),o=function(c,h,f,m){return new Mo(c,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,tf(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new tl(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let h=c?._online.build();return{_offline:c?._offline.build(h),_online:h}}(n._componentsProvider))}var Di=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(bt.fromBase64String(t))}catch(e){throw new R(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(bt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Si=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new R(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var ts=class{constructor(t){this._methodName=t}};var Ri=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new R(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new R(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return U(this._lat,t._lat)||U(this._long,t._long)}};var Pi=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var Ug=/^__.*__$/,el=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new ye(t,this.data,this.fieldMask,e,this.fieldTransforms):new Qe(t,this.data,e,this.fieldTransforms)}};function af(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}var nl=class n{constructor(t,e,i,r,o,a){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return es(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(af(this.Lu)&&Ug.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}},il=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||hs(t)}ju(t,e,i,r=!1){return new nl({Lu:t,methodName:e,zu:i,path:Pt.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Pl(n){let t=n._freezeSettings(),e=hs(n._databaseId);return new il(n._databaseId,!!t.ignoreUndefinedProperties,e)}function lf(n,t,e,i,r,o={}){let a=n.ju(o.merge||o.mergeFields?2:0,t,e,r);hf("Data must be an object, but it was:",a,i);let c=uf(i,a),h,f;if(o.merge)h=new Qt(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let E of o.mergeFields){let b=$g(t,E,e);if(!a.contains(b))throw new R(C.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Hg(m,b)||m.push(b)}h=new Qt(m),f=a.fieldTransforms.filter(E=>h.covers(E.field))}else h=null,f=a.fieldTransforms;return new el(new qt(c),h,f)}function Gg(n,t,e,i=!1){return kl(e,n.ju(i?4:3,t))}function kl(n,t){if(cf(n=Le(n)))return hf("Unsupported field value:",t,n),uf(n,t);if(n instanceof ts)return function(i,r){if(!af(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let h=kl(c,r.Uu(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=Le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Cm(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=yt.fromDate(i);return{timestampValue:Or(r.serializer,o)}}if(i instanceof yt){let o=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Or(r.serializer,o)}}if(i instanceof Ri)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Di)return{bytesValue:Vd(r.serializer,i._byteString)};if(i instanceof Dt){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wl(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Pi)return function(a,c){return{mapValue:{fields:{[fl]:{stringValue:pl},[Tn]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw c.Wu("VectorValues must only contain numeric values.");return vl(c.serializer,f)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${ps(i)}`)}(n,t)}function uf(n,t){let e={};return Jh(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xe(n,(i,r)=>{let o=kl(r,t.qu(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function cf(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Ri||n instanceof Di||n instanceof Dt||n instanceof ts||n instanceof Pi)}function hf(n,t,e){if(!cf(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=ps(e);throw i==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+i)}}function $g(n,t,e){if((t=Le(t))instanceof Si)return t._internalPath;if(typeof t=="string")return df(n,t);throw es("Field path arguments must be of type string or ",n,!1,void 0,e)}var jg=new RegExp("[~\\*/\\[\\]]");function df(n,t,e){if(t.search(jg)>=0)throw es(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Si(...t.split("."))._internalPath}catch{throw es(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function es(n,t,e,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new R(C.INVALID_ARGUMENT,c+n+h)}function Hg(n,t){return n.some(e=>e.isEqual(t))}var ns=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new rl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(ms("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},rl=class extends ns{data(){return super.data()}};function ms(n,t){return typeof t=="string"?df(n,t):t instanceof Si?t._internalPath:t._delegate._internalPath}function Kg(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new R(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ki=class{},is=class extends ki{};function ff(n,t,...e){let i=[];t instanceof ki&&i.push(t),i=i.concat(e),function(o){let a=o.filter(h=>h instanceof sl).length,c=o.filter(h=>h instanceof rs).length;if(a>1||a>0&&c>0)throw new R(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var rs=class n extends is{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return gf(t._query,e),new Ye(t.firestore,t.converter,Qo(t._query,e))}_parse(t){let e=Pl(t.firestore);return function(o,a,c,h,f,m,E){let b;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new R(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Lh(E,m);let N=[];for(let M of E)N.push(Oh(h,o,M));b={arrayValue:{values:N}}}else b=Oh(h,o,E)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Lh(E,m),b=Gg(c,a,E,m==="in"||m==="not-in");return ct.create(f,m,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function pf(n,t,e){let i=t,r=ms("where",n);return rs._create(r,i,e)}var sl=class n extends ki{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:$t.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let h of c)gf(a,h),a=Qo(a,h)}(t._query,e),new Ye(t.firestore,t.converter,Qo(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ol=class n extends is{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,o,a){if(r.startAt!==null)throw new R(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new R(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new je(o,a)}(t._query,this._field,this._direction);return new Ye(t.firestore,t.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new xe(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function mf(n,t="asc"){let e=t,i=ms("orderBy",n);return ol._create(i,e)}function Oh(n,t,e){if(typeof(e=Le(e))=="string"){if(e==="")throw new R(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fd(t)&&e.indexOf("/")!==-1)throw new R(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(nt.fromString(e));if(!F.isDocumentKey(i))throw new R(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return rh(n,new F(i))}if(e instanceof Dt)return rh(n,e._key);throw new R(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ps(e)}.`)}function Lh(n,t){if(!Array.isArray(n)||n.length===0)throw new R(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function gf(n,t){let e=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new R(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new R(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var al=class{convertValue(t,e="none"){switch(Ve(t)){case 0:return null;case 1:return t.booleanValue;case 2:return et(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(me(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw O()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return Xe(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;let o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e[Tn].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>et(a.doubleValue));return new Pi(o)}convertGeoPoint(t){return new Ri(et(t.latitude),et(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=ls(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ei(t));default:return null}}convertTimestamp(t){let e=pe(t);return new yt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=nt.fromString(t);W(kd(i));let r=new Rr(i.get(1),i.get(3)),o=new F(i.popFirst(5));return r.isEqual(e)||fe(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function _f(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var Ue=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},ss=class extends ns{constructor(t,e,i,r,o,a){super(t,e,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new wn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(ms("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},wn=class extends ss{data(t={}){return super.data(t)}},ll=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ue(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new wn(this._firestore,this._userDataWriter,i.key,i,new Ue(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new R(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let h=new wn(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ue(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let h=new wn(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ue(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:Qg(c.type),doc:h,oldIndex:f,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Qg(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}function yf(n){n=ve(n,Dt);let t=ve(n.firestore,Re);return Lg(Rl(t),n._key).then(e=>Wg(t,n,e))}var os=class extends al{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Dt(this.firestore,null,e)}};function vf(n){n=ve(n,Ye);let t=ve(n.firestore,Re),e=Rl(t),i=new os(t);return Kg(n._query),Bg(e,n._query).then(r=>new ll(t,i,n,r))}function wf(n,t,e){n=ve(n,Dt);let i=ve(n.firestore,Re),r=_f(n.converter,t,e);return Nl(i,[lf(Pl(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,de.none())])}function If(n){return Nl(ve(n.firestore,Re),[new bi(n._key,de.none())])}function Ef(n,t){let e=ve(n.firestore,Re),i=Sl(n),r=_f(n.converter,t);return Nl(e,[lf(Pl(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,de.exists(!1))]).then(()=>i)}function Nl(n,t){return function(i,r){let o=new Ut;return i.asyncQueue.enqueueAndForget(()=>P(this,null,function*(){return Vg(yield Og(i),r,o)})),o.promise}(Rl(n),t)}function Wg(n,t,e){let i=e.docs.get(t._key),r=new os(n);return new ss(n,r,t._key,i,new Ue(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){kn=r})(Ac),Ec(new wc("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new Re(new Do(i.getProvider("auth-internal")),new Po(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new R(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rr(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:e},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),di(Wc,Yc,t),di(Wc,Yc,"esm2017")})();var Fi=class{constructor(t){return t}},Tf="firestore",Ml=class{constructor(){return Dc(Tf)}};var Fl=new ie("angularfire2.firestore-instances");function Yg(n,t){let e=xc(Tf,n,t);return e&&new Fi(e)}function Xg(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Fi(i)}}var Zg={provide:Ml,deps:[[new oi,Fl]]},Jg={provide:Fi,useFactory:Yg,deps:[[new oi,Fl],Rc]};function n0(n,...t){return di("angularfire",Vc.full,"fst"),Zu([Jg,Zg,{provide:Fl,useFactory:Xg(n),multi:!0,deps:[ar,Zs,Sc,Pc,[new oi,Nc],[new oi,kc],...t]}])}var i0=Ot(Ef,!0,2);var r0=Ot(sf,!0,2);var s0=Ot(If,!0,2);var o0=Ot(Sl,!0,2);var a0=Ot(yf,!0);var l0=Ot(vf,!0);var u0=Ot(of,!0);var c0=Ot(mf,!0,2),h0=Ot(ff,!0,2);var d0=Ot(wf,!0,2);var f0=Ot(pf,!0,2);var kf=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(tt(to),tt(Js))};static \u0275dir=xt({type:n})}return n})(),t_=(()=>{class n extends kf{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275dir=xt({type:n,features:[dt]})}return n})(),ql=new ie("");var e_={provide:ql,useExisting:ri(()=>Nf),multi:!0};function n_(){let n=so()?so().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var i_=new ie(""),Nf=(()=>{class n extends kf{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!n_())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(tt(to),tt(Js),tt(i_,8))};static \u0275dir=xt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&zt("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[ue([e_]),dt]})}return n})();function Pe(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Mf(n){return n!=null&&typeof n.length=="number"}var Ul=new ie(""),Gl=new ie(""),r_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bf=class{static min(t){return s_(t)}static max(t){return o_(t)}static required(t){return a_(t)}static requiredTrue(t){return l_(t)}static email(t){return u_(t)}static minLength(t){return c_(t)}static maxLength(t){return h_(t)}static pattern(t){return d_(t)}static nullValidator(t){return Ff(t)}static compose(t){return Uf(t)}static composeAsync(t){return $f(t)}};function s_(n){return t=>{if(Pe(t.value)||Pe(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function o_(n){return t=>{if(Pe(t.value)||Pe(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function a_(n){return Pe(n.value)?{required:!0}:null}function l_(n){return n.value===!0?null:{required:!0}}function u_(n){return Pe(n.value)||r_.test(n.value)?null:{email:!0}}function c_(n){return t=>Pe(t.value)||!Mf(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function h_(n){return t=>Mf(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function d_(n){if(!n)return Ff;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Pe(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Ff(n){return null}function Of(n){return n!=null}function Lf(n){return tc(n)?Wu(n):n}function Bf(n){let t={};return n.forEach(e=>{t=e!=null?ht(ht({},t),e):t}),Object.keys(t).length===0?null:t}function zf(n,t){return t.map(e=>e(n))}function f_(n){return!n.validate}function qf(n){return n.map(t=>f_(t)?t:e=>t.validate(e))}function Uf(n){if(!n)return null;let t=n.filter(Of);return t.length==0?null:function(e){return Bf(zf(e,t))}}function Gf(n){return n!=null?Uf(qf(n)):null}function $f(n){if(!n)return null;let t=n.filter(Of);return t.length==0?null:function(e){let i=zf(e,t).map(Lf);return Xu(i).pipe(Yu(Bf))}}function jf(n){return n!=null?$f(qf(n)):null}function Af(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Hf(n){return n._rawValidators}function Kf(n){return n._rawAsyncValidators}function Ol(n){return n?Array.isArray(n)?n:[n]:[]}function _s(n,t){return Array.isArray(n)?n.includes(t):n===t}function Cf(n,t){let e=Ol(t);return Ol(n).forEach(r=>{_s(e,r)||e.push(r)}),e}function Vf(n,t){return Ol(t).filter(e=>!_s(n,e))}var ys=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Gf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=jf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Je=class extends ys{name;get formDirective(){return null}get path(){return null}},tn=class extends ys{_parent=null;name=null;valueAccessor=null},vs=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},p_={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},P0=jt(ht({},p_),{"[class.ng-submitted]":"isSubmitted"}),k0=(()=>{class n extends vs{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(tt(tn,2))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&li("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[dt]})}return n})(),N0=(()=>{class n extends vs{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(tt(Je,10))};static \u0275dir=xt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&li("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[dt]})}return n})();var Oi="VALID",gs="INVALID",On="PENDING",Li="DISABLED",ke=class{},ws=class extends ke{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Bi=class extends ke{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},zi=class extends ke{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Ln=class extends ke{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Ll=class extends ke{source;constructor(t){super(),this.source=t}},Bl=class extends ke{source;constructor(t){super(),this.source=t}};function Qf(n){return(bs(n)?n.validators:n)||null}function m_(n){return Array.isArray(n)?Gf(n):n||null}function Wf(n,t){return(bs(t)?t.asyncValidators:n)||null}function g_(n){return Array.isArray(n)?jf(n):n||null}function bs(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function __(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new sr(1e3,"");if(!i[e])throw new sr(1001,"")}function y_(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new sr(1002,"")})}var Is=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ae(this.statusReactive)}set status(t){Ae(()=>this.statusReactive.set(t))}_status=ci(()=>this.statusReactive());statusReactive=ai(void 0);get valid(){return this.status===Oi}get invalid(){return this.status===gs}get pending(){return this.status==On}get disabled(){return this.status===Li}get enabled(){return this.status!==Li}errors;get pristine(){return Ae(this.pristineReactive)}set pristine(t){Ae(()=>this.pristineReactive.set(t))}_pristine=ci(()=>this.pristineReactive());pristineReactive=ai(!0);get dirty(){return!this.pristine}get touched(){return Ae(this.touchedReactive)}set touched(t){Ae(()=>this.touchedReactive.set(t))}_touched=ci(()=>this.touchedReactive());touchedReactive=ai(!1);get untouched(){return!this.touched}_events=new Qu;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Cf(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Cf(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Vf(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Vf(t,this._rawAsyncValidators))}hasValidator(t){return _s(this._rawValidators,t)}hasAsyncValidator(t){return _s(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(jt(ht({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new zi(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new zi(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(jt(ht({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Bi(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Bi(!0,i))}markAsPending(t={}){this.status=On;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ln(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(jt(ht({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Li,this.errors=null,this._forEachChild(r=>{r.disable(jt(ht({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ws(this.value,i)),this._events.next(new Ln(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(jt(ht({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Oi,this._forEachChild(i=>{i.enable(jt(ht({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(jt(ht({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oi||this.status===On)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ws(this.value,e)),this._events.next(new Ln(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(jt(ht({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Li:Oi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=On,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=Lf(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Ln(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Vt,this.statusChanges=new Vt}_calculateStatus(){return this._allControlsDisabled()?Li:this.errors?gs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(On)?On:this._anyControlsHaveStatus(gs)?gs:Oi}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Bi(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new zi(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){bs(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=m_(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=g_(this._rawAsyncValidators)}},xf=class extends Is{constructor(t,e,i){super(Qf(e),Wf(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){y_(this,!0,t),Object.keys(t).forEach(i=>{__(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var As=new ie("",{providedIn:"root",factory:()=>Cs}),Cs="always";function Yf(n,t){return[...t.path,n]}function zl(n,t,e=Cs){$l(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),w_(n,t),E_(n,t),I_(n,t),v_(n,t)}function Df(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Ts(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Es(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function v_(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function $l(n,t){let e=Hf(n);t.validator!==null?n.setValidators(Af(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Kf(n);t.asyncValidator!==null?n.setAsyncValidators(Af(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Es(t._rawValidators,r),Es(t._rawAsyncValidators,r)}function Ts(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=Hf(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=Kf(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Es(t._rawValidators,i),Es(t._rawAsyncValidators,i),e}function w_(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Xf(n,t)})}function I_(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Xf(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Xf(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function E_(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function T_(n,t){n==null,$l(n,t)}function b_(n,t){return Ts(n,t)}function Zf(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function A_(n){return Object.getPrototypeOf(n.constructor)===t_}function C_(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Jf(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Nf?e=o:A_(o)?i=o:r=o}),r||i||e||null}function V_(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Sf(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Rf(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var tp=class extends Is{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Qf(e),Wf(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bs(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Rf(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Sf(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Sf(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Rf(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var x_=n=>n instanceof tp;var D_={provide:tn,useExisting:ri(()=>jl)},Pf=Promise.resolve(),jl=(()=>{class n extends tn{_changeDetectorRef;callSetDisabledState;control=new tp;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Vt;constructor(e,i,r,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Jf(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Zf(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){zl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Pf.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&at(i);Pf.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Yf(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(tt(Je,9),tt(Ul,10),tt(Gl,10),tt(ql,10),tt(lc,8),tt(As,8))};static \u0275dir=xt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ue([D_]),dt,on]})}return n})(),F0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var ep=new ie("");var S_={provide:Je,useExisting:ri(()=>R_)},R_=(()=>{class n extends Je{callSetDisabledState;get submitted(){return Ae(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ci(()=>this._submittedReactive());_submittedReactive=ai(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Vt;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ts(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return zl(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Df(e.control||null,e,!1),V_(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),C_(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Ll(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Bl(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Df(i||null,e),x_(r)&&(zl(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);T_(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&b_(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$l(this.form,this),this._oldForm&&Ts(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(tt(Ul,10),tt(Gl,10),tt(As,8))};static \u0275dir=xt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&zt("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ue([S_]),dt,on]})}return n})();var P_={provide:tn,useExisting:ri(()=>k_)},k_=(()=>{class n extends tn{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Vt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Jf(this,o)}ngOnChanges(e){this._added||this._setUpControl(),Zf(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Yf(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(tt(Je,13),tt(Ul,10),tt(Gl,10),tt(ql,10),tt(ep,8))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ue([P_]),dt,on]})}return n})();var np=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ae({type:n});static \u0275inj=ne({})}return n})();var O0=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:As,useValue:e.callSetDisabledState??Cs}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ae({type:n});static \u0275inj=ne({imports:[np]})}return n})(),L0=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ep,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:As,useValue:e.callSetDisabledState??Cs}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ae({type:n});static \u0275inj=ne({imports:[np]})}return n})();var ip=(()=>{class n extends mr{pathId;ngOnInit(){this.pathId="url(#"+Be()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275cmp=an({type:n,selectors:[["WindowMaximizeIcon"]],features:[dt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14ZM9.77805 7.42192C9.89013 7.534 10.0415 7.59788 10.2 7.59995C10.3585 7.59788 10.5099 7.534 10.622 7.42192C10.7341 7.30985 10.798 7.15844 10.8 6.99995V3.94242C10.8066 3.90505 10.8096 3.86689 10.8089 3.82843C10.8079 3.77159 10.7988 3.7157 10.7824 3.6623C10.756 3.55552 10.701 3.45698 10.622 3.37798C10.5099 3.2659 10.3585 3.20202 10.2 3.19995H7.00002C6.84089 3.19995 6.68828 3.26317 6.57576 3.37569C6.46324 3.48821 6.40002 3.64082 6.40002 3.79995C6.40002 3.95908 6.46324 4.11169 6.57576 4.22422C6.68828 4.33674 6.84089 4.39995 7.00002 4.39995H8.80006L6.19997 7.00005C6.10158 7.11005 6.04718 7.25246 6.04718 7.40005C6.04718 7.54763 6.10158 7.69004 6.19997 7.80005C6.30202 7.91645 6.44561 7.98824 6.59997 8.00005C6.75432 7.98824 6.89791 7.91645 6.99997 7.80005L9.60002 5.26841V6.99995C9.6021 7.15844 9.66598 7.30985 9.77805 7.42192ZM1.4 14H3.8C4.17066 13.9979 4.52553 13.8498 4.78763 13.5877C5.04973 13.3256 5.1979 12.9707 5.2 12.6V10.2C5.1979 9.82939 5.04973 9.47452 4.78763 9.21242C4.52553 8.95032 4.17066 8.80215 3.8 8.80005H1.4C1.02934 8.80215 0.674468 8.95032 0.412371 9.21242C0.150274 9.47452 0.00210008 9.82939 0 10.2V12.6C0.00210008 12.9707 0.150274 13.3256 0.412371 13.5877C0.674468 13.8498 1.02934 13.9979 1.4 14ZM1.25858 10.0586C1.29609 10.0211 1.34696 10 1.4 10H3.8C3.85304 10 3.90391 10.0211 3.94142 10.0586C3.97893 10.0961 4 10.147 4 10.2V12.6C4 12.6531 3.97893 12.704 3.94142 12.7415C3.90391 12.779 3.85304 12.8 3.8 12.8H1.4C1.34696 12.8 1.29609 12.779 1.25858 12.7415C1.22107 12.704 1.2 12.6531 1.2 12.6V10.2C1.2 10.147 1.22107 10.0961 1.25858 10.0586Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(or(),ft(0,"svg",0)(1,"g"),Nt(2,"path",1),_t(),ft(3,"defs")(4,"clipPath",2),Nt(5,"rect",3),_t()()()),i&2&&(be(r.getClassNames()),Ht("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),j(),Ht("clip-path",r.pathId),j(3),z("id",r.pathId))},encapsulation:2})}return n})();var rp=(()=>{class n extends mr{pathId;ngOnInit(){this.pathId="url(#"+Be()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275cmp=an({type:n,selectors:[["WindowMinimizeIcon"]],features:[dt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0ZM6.368 7.952C6.44137 7.98326 6.52025 7.99958 6.6 8H9.8C9.95913 8 10.1117 7.93678 10.2243 7.82426C10.3368 7.71174 10.4 7.55913 10.4 7.4C10.4 7.24087 10.3368 7.08826 10.2243 6.97574C10.1117 6.86321 9.95913 6.8 9.8 6.8H8.048L10.624 4.224C10.73 4.11026 10.7877 3.95982 10.7849 3.80438C10.7822 3.64894 10.7192 3.50063 10.6093 3.3907C10.4994 3.28077 10.3511 3.2178 10.1956 3.21506C10.0402 3.21232 9.88974 3.27002 9.776 3.376L7.2 5.952V4.2C7.2 4.04087 7.13679 3.88826 7.02426 3.77574C6.91174 3.66321 6.75913 3.6 6.6 3.6C6.44087 3.6 6.28826 3.66321 6.17574 3.77574C6.06321 3.88826 6 4.04087 6 4.2V7.4C6.00042 7.47975 6.01674 7.55862 6.048 7.632C6.07656 7.70442 6.11971 7.7702 6.17475 7.82524C6.2298 7.88029 6.29558 7.92344 6.368 7.952ZM1.4 8.80005H3.8C4.17066 8.80215 4.52553 8.95032 4.78763 9.21242C5.04973 9.47452 5.1979 9.82939 5.2 10.2V12.6C5.1979 12.9707 5.04973 13.3256 4.78763 13.5877C4.52553 13.8498 4.17066 13.9979 3.8 14H1.4C1.02934 13.9979 0.674468 13.8498 0.412371 13.5877C0.150274 13.3256 0.00210008 12.9707 0 12.6V10.2C0.00210008 9.82939 0.150274 9.47452 0.412371 9.21242C0.674468 8.95032 1.02934 8.80215 1.4 8.80005ZM3.94142 12.7415C3.97893 12.704 4 12.6531 4 12.6V10.2C4 10.147 3.97893 10.0961 3.94142 10.0586C3.90391 10.0211 3.85304 10 3.8 10H1.4C1.34696 10 1.29609 10.0211 1.25858 10.0586C1.22107 10.0961 1.2 10.147 1.2 10.2V12.6C1.2 12.6531 1.22107 12.704 1.25858 12.7415C1.29609 12.779 1.34696 12.8 1.4 12.8H3.8C3.85304 12.8 3.90391 12.779 3.94142 12.7415Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(or(),ft(0,"svg",0)(1,"g"),Nt(2,"path",1),_t(),ft(3,"defs")(4,"clipPath",2),Nt(5,"rect",3),_t()()()),i&2&&(be(r.getClassNames()),Ht("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),j(),Ht("clip-path",r.pathId),j(3),z("id",r.pathId))},encapsulation:2})}return n})();var op=(()=>{class n extends dn{pFocusTrapDisabled=!1;platformId=re(Ju);document=re(uc);firstHiddenFocusableElement;lastHiddenFocusableElement;ngOnInit(){super.ngOnInit(),hi(this.platformId)&&!this.pFocusTrapDisabled&&!this.firstHiddenFocusableElement&&!this.lastHiddenFocusableElement&&this.createHiddenFocusableElements()}ngOnChanges(e){super.ngOnChanges(e),e.pFocusTrapDisabled&&hi(this.platformId)&&(e.pFocusTrapDisabled.currentValue?this.removeHiddenFocusableElements():this.createHiddenFocusableElements())}removeHiddenFocusableElements(){this.firstHiddenFocusableElement&&this.firstHiddenFocusableElement.parentNode&&this.firstHiddenFocusableElement.parentNode.removeChild(this.firstHiddenFocusableElement),this.lastHiddenFocusableElement&&this.lastHiddenFocusableElement.parentNode&&this.lastHiddenFocusableElement.parentNode.removeChild(this.lastHiddenFocusableElement)}getComputedSelector(e){return`:not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])${e??""}`}createHiddenFocusableElements(){let e="0",i=r=>Oc("span",{class:"p-hidden-accessible p-hidden-focusable",tabindex:e,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:r?.bind(this)});this.firstHiddenFocusableElement=i(this.onFirstHiddenElementFocus),this.lastHiddenFocusableElement=i(this.onLastHiddenElementFocus),this.firstHiddenFocusableElement.setAttribute("data-pc-section","firstfocusableelement"),this.lastHiddenFocusableElement.setAttribute("data-pc-section","lastfocusableelement"),this.el.nativeElement.prepend(this.firstHiddenFocusableElement),this.el.nativeElement.append(this.lastHiddenFocusableElement)}onFirstHiddenElementFocus(e){let{currentTarget:i,relatedTarget:r}=e,o=r===this.lastHiddenFocusableElement||!this.el.nativeElement?.contains(r)?Lc(i.parentElement,":not(.p-hidden-focusable)"):this.lastHiddenFocusableElement;go(o)}onLastHiddenElementFocus(e){let{currentTarget:i,relatedTarget:r}=e,o=r===this.firstHiddenFocusableElement||!this.el.nativeElement?.contains(r)?Bc(i.parentElement,":not(.p-hidden-focusable)"):this.firstHiddenFocusableElement;go(o)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","pFocusTrap",""]],inputs:{pFocusTrapDisabled:[2,"pFocusTrapDisabled","pFocusTrapDisabled",at]},features:[ln,dt,on]})}return n})();var ap=class n{static isArray(t,e=!0){return Array.isArray(t)&&(e||t.length!==0)}static isObject(t,e=!0){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&(e||Object.keys(t).length!==0)}static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Array.isArray(t),r=Array.isArray(e),o,a,c;if(i&&r){if(a=t.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!this.equalsByValue(t[o],e[o]))return!1;return!0}if(i!=r)return!1;var h=this.isDate(t),f=this.isDate(e);if(h!=f)return!1;if(h&&f)return t.getTime()==e.getTime();var m=t instanceof RegExp,E=e instanceof RegExp;if(m!=E)return!1;if(m&&E)return t.toString()==e.toString();var b=Object.keys(t);if(a=b.length,a!==Object.keys(e).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,b[o]))return!1;for(o=a;o--!==0;)if(c=b[o],!this.equalsByValue(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(e.indexOf(".")==-1)return t[e];{let i=e.split("."),r=t;for(let o=0,a=i.length;o<a;++o){if(r==null)return null;r=r[i[o]]}return r}}else return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){let r;t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let o=!1;for(let a=0;a<i.length;a++)if(this.findIndexInList(i[a],r)>e){i.splice(a,0,t),o=!0;break}o||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e){for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}}return i}static contains(t,e){if(t!=null&&e&&e.length){for(let i of e)if(this.equals(t,i))return!0}return!1}static removeAccents(t){return t&&(t=t.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),t}static isDate(t){return Object.prototype.toString.call(t)==="[object Date]"}static isEmpty(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!this.isDate(t)&&typeof t=="object"&&Object.keys(t).length===0}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let o=-1,a=this.isEmpty(t),c=this.isEmpty(e);return a&&c?o=0:a?o=r:c?o=-r:typeof t=="string"&&typeof e=="string"?o=t.localeCompare(e,i,{numeric:!0}):o=t<e?-1:t>e?1:0,o}static sort(t,e,i=1,r,o=1){let a=n.compare(t,e,r,i),c=i;return(n.isEmpty(t)||n.isEmpty(e))&&(c=o===1?i:o),c*a}static merge(t,e){if(!(t==null&&e==null)){{if((t==null||typeof t=="object")&&(e==null||typeof e=="object"))return ht(ht({},t||{}),e||{});if((t==null||typeof t=="string")&&(e==null||typeof e=="string"))return[t||"",e||""].join(" ")}return e||t}}static isPrintableCharacter(t=""){return this.isNotEmpty(t)&&t.length===1&&t.match(/\S| /)}static getItemValue(t,...e){return this.isFunction(t)?t(...e):t}static findLastIndex(t,e){let i=-1;if(this.isNotEmpty(t))try{i=t.findLastIndex(e)}catch{i=t.lastIndexOf([...t].reverse().find(e))}return i}static findLast(t,e){let i;if(this.isNotEmpty(t))try{i=t.findLast(e)}catch{i=[...t].reverse().find(e)}return i}static deepEquals(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Array.isArray(t),r=Array.isArray(e),o,a,c;if(i&&r){if(a=t.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!this.deepEquals(t[o],e[o]))return!1;return!0}if(i!=r)return!1;var h=t instanceof Date,f=e instanceof Date;if(h!=f)return!1;if(h&&f)return t.getTime()==e.getTime();var m=t instanceof RegExp,E=e instanceof RegExp;if(m!=E)return!1;if(m&&E)return t.toString()==e.toString();var b=Object.keys(t);if(a=b.length,a!==Object.keys(e).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,b[o]))return!1;for(o=a;o--!==0;)if(c=b[o],!this.deepEquals(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}static minifyCSS(t){return t&&t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}static toFlatCase(t){return this.isString(t)?t.replace(/(-|_)/g,"").toLowerCase():t}static isString(t,e=!0){return typeof t=="string"&&(e||t!=="")}},lp=0;function tw(n="pn_id_"){return lp++,`${n}${lp}`}function M_(){let n=[],t=(o,a)=>{let c=n.length>0?n[n.length-1]:{key:o,value:a},h=c.value+(c.key===o?0:a)+2;return n.push({key:o,value:h}),h},e=o=>{n=n.filter(a=>a.value!==o)},i=()=>n.length>0?n[n.length-1].value:0,r=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:r,set:(o,a,c)=>{a&&(a.style.zIndex=String(t(o,c)))},clear:o=>{o&&(e(r(o)),o.style.zIndex="")},getCurrent:()=>i(),generateZIndex:t,revertZIndex:e}}var Hl=M_();var F_=({dt:n})=>`
.p-dialog {
    max-height: 90%;
    transform: scale(1);
    border-radius: ${n("dialog.border.radius")};
    box-shadow: ${n("dialog.shadow")};
    background: ${n("dialog.background")};
    border: 1px solid ${n("dialog.border.color")};
    color: ${n("dialog.color")};
    display: flex;
    flex-direction: column;
    pointer-events: auto
}

.p-dialog-content {
    overflow-y: auto;
    padding: ${n("dialog.content.padding")};
    flex-grow: 1;
}

.p-dialog-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    padding: ${n("dialog.header.padding")};
}

.p-dialog-title {
    font-weight: ${n("dialog.title.font.weight")};
    font-size: ${n("dialog.title.font.size")};
}

.p-dialog-footer {
    flex-shrink: 0;
    padding: ${n("dialog.footer.padding")};
    display: flex;
    justify-content: flex-end;
    gap: ${n("dialog.footer.gap")};
}

.p-dialog-header-actions {
    display: flex;
    align-items: center;
    gap: ${n("dialog.header.gap")};
}

.p-dialog-enter-active {
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}

.p-dialog-leave-active {
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.p-dialog-enter-from,
.p-dialog-leave-to {
    opacity: 0;
    transform: scale(0.7);
}

.p-dialog-top .p-dialog,
.p-dialog-bottom .p-dialog,
.p-dialog-left .p-dialog,
.p-dialog-right .p-dialog,
.p-dialog-topleft .p-dialog,
.p-dialog-topright .p-dialog,
.p-dialog-bottomleft .p-dialog,
.p-dialog-bottomright .p-dialog {
    margin: 0.75rem;
    transform: translate3d(0px, 0px, 0px);
}

.p-dialog-top .p-dialog-enter-active,
.p-dialog-top .p-dialog-leave-active,
.p-dialog-bottom .p-dialog-enter-active,
.p-dialog-bottom .p-dialog-leave-active,
.p-dialog-left .p-dialog-enter-active,
.p-dialog-left .p-dialog-leave-active,
.p-dialog-right .p-dialog-enter-active,
.p-dialog-right .p-dialog-leave-active,
.p-dialog-topleft .p-dialog-enter-active,
.p-dialog-topleft .p-dialog-leave-active,
.p-dialog-topright .p-dialog-enter-active,
.p-dialog-topright .p-dialog-leave-active,
.p-dialog-bottomleft .p-dialog-enter-active,
.p-dialog-bottomleft .p-dialog-leave-active,
.p-dialog-bottomright .p-dialog-enter-active,
.p-dialog-bottomright .p-dialog-leave-active {
    transition: all 0.3s ease-out;
}

.p-dialog-top .p-dialog-enter-from,
.p-dialog-top .p-dialog-leave-to {
    transform: translate3d(0px, -100%, 0px);
}

.p-dialog-bottom .p-dialog-enter-from,
.p-dialog-bottom .p-dialog-leave-to {
    transform: translate3d(0px, 100%, 0px);
}

.p-dialog-left .p-dialog-enter-from,
.p-dialog-left .p-dialog-leave-to,
.p-dialog-topleft .p-dialog-enter-from,
.p-dialog-topleft .p-dialog-leave-to,
.p-dialog-bottomleft .p-dialog-enter-from,
.p-dialog-bottomleft .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}

.p-dialog-right .p-dialog-enter-from,
.p-dialog-right .p-dialog-leave-to,
.p-dialog-topright .p-dialog-enter-from,
.p-dialog-topright .p-dialog-leave-to,
.p-dialog-bottomright .p-dialog-enter-from,
.p-dialog-bottomright .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

.p-dialog-left:dir(rtl) .p-dialog-enter-from,
.p-dialog-left:dir(rtl) .p-dialog-leave-to,
.p-dialog-topleft:dir(rtl) .p-dialog-enter-from,
.p-dialog-topleft:dir(rtl) .p-dialog-leave-to,
.p-dialog-bottomleft:dir(rtl) .p-dialog-enter-from,
.p-dialog-bottomleft:dir(rtl) .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

.p-dialog-right:dir(rtl) .p-dialog-enter-from,
.p-dialog-right:dir(rtl) .p-dialog-leave-to,
.p-dialog-topright:dir(rtl) .p-dialog-enter-from,
.p-dialog-topright:dir(rtl) .p-dialog-leave-to,
.p-dialog-bottomright:dir(rtl) .p-dialog-enter-from,
.p-dialog-bottomright:dir(rtl) .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}

.p-dialog-maximized {
    width: 100vw !important;
    height: 100vh !important;
    top: 0px !important;
    left: 0px !important;
    max-height: 100%;
    height: 100%;
    border-radius: 0;
}

.p-dialog-maximized .p-dialog-content {
    flex-grow: 1;
}

.p-overlay-mask:dir(rtl) {
    flex-direction: row-reverse;
}

/* For PrimeNG */

.p-dialog .p-resizable-handle {
    position: absolute;
    font-size: 0.1px;
    display: block;
    cursor: se-resize;
    width: 12px;
    height: 12px;
    right: 1px;
    bottom: 1px;
}

.p-confirm-dialog .p-dialog-content {
    display: flex;
    align-items: center;
}
`,O_={mask:({instance:n})=>({position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:n.position==="left"||n.position==="topleft"||n.position==="bottomleft"?"flex-start":n.position==="right"||n.position==="topright"||n.position==="bottomright"?"flex-end":"center",alignItems:n.position==="top"||n.position==="topleft"||n.position==="topright"?"flex-start":n.position==="bottom"||n.position==="bottomleft"||n.position==="bottomright"?"flex-end":"center",pointerEvents:n.modal?"auto":"none"}),root:{display:"flex",flexDirection:"column",pointerEvents:"auto"}},L_={mask:({instance:n})=>{let e=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(i=>i===n.position);return{"p-dialog-mask":!0,"p-overlay-mask p-overlay-mask-enter":n.modal,[`p-dialog-${e}`]:e}},root:({instance:n})=>({"p-dialog p-component":!0,"p-dialog-maximized":n.maximizable&&n.maximized}),header:"p-dialog-header",title:"p-dialog-title",resizeHandle:"p-resizable-handle",headerActions:"p-dialog-header-actions",pcMaximizeButton:"p-dialog-maximize-button",pcCloseButton:"p-dialog-close-button",content:"p-dialog-content",footer:"p-dialog-footer"},up=(()=>{class n extends pr{name="dialog";theme=F_;classes=L_;inlineStyles=O_;static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275prov=si({token:n,factory:n.\u0275fac})}return n})();var B_=["header"],cp=["content"],hp=["footer"],z_=["closeicon"],q_=["maximizeicon"],U_=["minimizeicon"],G_=["headless"],$_=["titlebar"],j_=["*",[["p-footer"]]],H_=["*","p-footer"],K_=(n,t,e)=>({position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex","justify-content":n,"align-items":t,"pointer-events":e}),Q_=n=>({"p-dialog p-component":!0,"p-dialog-maximized":n}),W_=()=>({display:"flex","flex-direction":"column","pointer-events":"auto"}),Y_=(n,t)=>({transform:n,transition:t}),X_=n=>({value:"visible",params:n});function Z_(n,t){n&1&&ui(0)}function J_(n,t){if(n&1&&(un(0),st(1,Z_,1,0,"ng-container",11),cn()),n&2){let e=X(3);j(),z("ngTemplateOutlet",e._headlessTemplate||e.headlessTemplate||e.headlessT)}}function ty(n,t){if(n&1){let e=hn();ft(0,"div",19),zt("mousedown",function(r){se(e);let o=X(4);return oe(o.initResize(r))}),_t()}if(n&2){let e=X(4);z("ngClass",e.cx("resizeHandle"))}}function ey(n,t){if(n&1&&(ft(0,"span",20),ic(1),_t()),n&2){let e=X(4);z("id",e.ariaLabelledBy)("ngClass",e.cx("title")),j(),rc(e.header)}}function ny(n,t){n&1&&ui(0)}function iy(n,t){if(n&1&&Nt(0,"span",15),n&2){let e=X(5);z("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function ry(n,t){n&1&&Nt(0,"WindowMaximizeIcon")}function sy(n,t){n&1&&Nt(0,"WindowMinimizeIcon")}function oy(n,t){if(n&1&&(un(0),st(1,ry,1,0,"WindowMaximizeIcon",22)(2,sy,1,0,"WindowMinimizeIcon",22),cn()),n&2){let e=X(5);j(),z("ngIf",!e.maximized&&!e._maximizeiconTemplate&&!e.maximizeIconTemplate&&!e.maximizeIconT),j(),z("ngIf",e.maximized&&!e._minimizeiconTemplate&&!e.minimizeIconTemplate&&!e.minimizeIconT)}}function ay(n,t){}function ly(n,t){n&1&&st(0,ay,0,0,"ng-template")}function uy(n,t){if(n&1&&(un(0),st(1,ly,1,0,null,11),cn()),n&2){let e=X(5);j(),z("ngTemplateOutlet",e._maximizeiconTemplate||e.maximizeIconTemplate||e.maximizeIconT)}}function cy(n,t){}function hy(n,t){n&1&&st(0,cy,0,0,"ng-template")}function dy(n,t){if(n&1&&(un(0),st(1,hy,1,0,null,11),cn()),n&2){let e=X(5);j(),z("ngTemplateOutlet",e._minimizeiconTemplate||e.minimizeIconTemplate||e.minimizeIconT)}}function fy(n,t){if(n&1){let e=hn();ft(0,"p-button",21),zt("onClick",function(){se(e);let r=X(4);return oe(r.maximize())})("keydown.enter",function(){se(e);let r=X(4);return oe(r.maximize())}),st(1,iy,1,1,"span",18)(2,oy,3,2,"ng-container",22)(3,uy,2,1,"ng-container",22)(4,dy,2,1,"ng-container",22),_t()}if(n&2){let e=X(4);z("styleClass",e.cx("pcMaximizeButton"))("tabindex",e.maximizable?"0":"-1")("ariaLabel",e.maximizeLabel)("buttonProps",e.maximizeButtonProps),j(),z("ngIf",e.maximizeIcon&&!e._maximizeiconTemplate&&!e._minimizeiconTemplate),j(),z("ngIf",!e.maximizeIcon&&!(e.maximizeButtonProps!=null&&e.maximizeButtonProps.icon)),j(),z("ngIf",!e.maximized),j(),z("ngIf",e.maximized)}}function py(n,t){if(n&1&&Nt(0,"span",15),n&2){let e=X(7);z("ngClass",e.closeIcon)}}function my(n,t){n&1&&Nt(0,"TimesIcon")}function gy(n,t){if(n&1&&(un(0),st(1,py,1,1,"span",18)(2,my,1,0,"TimesIcon",22),cn()),n&2){let e=X(6);j(),z("ngIf",e.closeIcon),j(),z("ngIf",!e.closeIcon)}}function _y(n,t){}function yy(n,t){n&1&&st(0,_y,0,0,"ng-template")}function vy(n,t){if(n&1&&(ft(0,"span"),st(1,yy,1,0,null,11),_t()),n&2){let e=X(6);j(),z("ngTemplateOutlet",e._closeiconTemplate||e.closeIconTemplate||e.closeIconT)}}function wy(n,t){if(n&1&&st(0,gy,3,2,"ng-container",22)(1,vy,2,1,"span",22),n&2){let e=X(5);z("ngIf",!e._closeiconTemplate&&!e.closeIconTemplate&&!e.closeIconT&&!(e.closeButtonProps!=null&&e.closeButtonProps.icon)),j(),z("ngIf",e._closeiconTemplate||e.closeIconTemplate||e.closeIconT)}}function Iy(n,t){if(n&1){let e=hn();ft(0,"p-button",23),zt("onClick",function(r){se(e);let o=X(4);return oe(o.close(r))})("keydown.enter",function(r){se(e);let o=X(4);return oe(o.close(r))}),st(1,wy,2,2,"ng-template",null,4,ro),_t()}if(n&2){let e=X(4);z("styleClass",e.cx("pcCloseButton"))("ariaLabel",e.closeAriaLabel)("tabindex",e.closeTabindex)("buttonProps",e.closeButtonProps)}}function Ey(n,t){n&1&&ui(0)}function Ty(n,t){n&1&&ui(0)}function by(n,t){if(n&1&&(ft(0,"div",15,5),no(2,1),st(3,Ty,1,0,"ng-container",11),_t()),n&2){let e=X(4);z("ngClass",e.cx("footer")),j(3),z("ngTemplateOutlet",e._footerTemplate||e.footerTemplate||e.footerT)}}function Ay(n,t){if(n&1){let e=hn();st(0,ty,1,1,"div",12),ft(1,"div",13,2),zt("mousedown",function(r){se(e);let o=X(3);return oe(o.initDrag(r))}),st(3,ey,2,3,"span",14)(4,ny,1,0,"ng-container",11),ft(5,"div",15),st(6,fy,5,8,"p-button",16)(7,Iy,3,4,"p-button",17),_t()(),ft(8,"div",7,3),no(10),st(11,Ey,1,0,"ng-container",11),_t(),st(12,by,4,2,"div",18)}if(n&2){let e=X(3);z("ngIf",e.resizable),j(),z("ngClass",e.cx("header")),j(2),z("ngIf",!e._headerTemplate&&!e.headerTemplate&&!e.headerT),j(),z("ngTemplateOutlet",e._headerTemplate||e.headerTemplate||e.headerT),j(),z("ngClass",e.cx("headerActions")),j(),z("ngIf",e.maximizable),j(),z("ngIf",e.closable),j(),be(e.contentStyleClass),z("ngClass",e.cx("content"))("ngStyle",e.contentStyle),Ht("data-pc-section","content"),j(3),z("ngTemplateOutlet",e._contentTemplate||e.contentTemplate||e.contentT),j(),z("ngIf",e._footerTemplate||e.footerTemplate||e.footerT)}}function Cy(n,t){if(n&1){let e=hn();ft(0,"div",9,0),zt("@animation.start",function(r){se(e);let o=X(2);return oe(o.onAnimationStart(r))})("@animation.done",function(r){se(e);let o=X(2);return oe(o.onAnimationEnd(r))}),st(2,J_,2,1,"ng-container",10)(3,Ay,13,14,"ng-template",null,1,ro),_t()}if(n&2){let e=nc(4),i=X(2);eo(i.style),be(i.styleClass),z("ngClass",io(13,Q_,i.maximizable&&i.maximized))("ngStyle",sc(15,W_))("pFocusTrapDisabled",i.focusTrap===!1)("@animation",io(19,X_,oc(16,Y_,i.transformOptions,i.transitionOptions))),Ht("role",i.role)("aria-labelledby",i.ariaLabelledBy)("aria-modal",!0),j(2),z("ngIf",i._headlessTemplate||i.headlessTemplate||i.headlessT)("ngIfElse",e)}}function Vy(n,t){if(n&1&&(ft(0,"div",7),st(1,Cy,5,21,"div",8),_t()),n&2){let e=X();eo(e.maskStyle),be(e.maskStyleClass),z("ngClass",e.maskClass)("ngStyle",ac(7,K_,e.position==="left"||e.position==="topleft"||e.position==="bottomleft"?"flex-start":e.position==="right"||e.position==="topright"||e.position==="bottomright"?"flex-end":"center",e.position==="top"||e.position==="topleft"||e.position==="topright"?"flex-start":e.position==="bottom"||e.position==="bottomleft"||e.position==="bottomright"?"flex-end":"center",e.modal?"auto":"none")),j(),z("ngIf",e.visible)}}var xy=uo([ao({transform:"{{transform}}",opacity:0}),oo("{{transition}}")]),Dy=uo([oo("{{transition}}",ao({transform:"{{transform}}",opacity:0}))]),Sy=(()=>{class n extends dn{header;draggable=!0;resizable=!0;get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}contentStyle;contentStyleClass;modal=!1;closeOnEscape=!0;dismissableMask=!1;rtl=!1;closable=!0;get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}appendTo;breakpoints;styleClass;maskStyleClass;maskStyle;showHeader=!0;get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}blockScroll=!1;autoZIndex=!0;baseZIndex=0;minX=0;minY=0;focusOnShow=!0;maximizable=!1;keepInViewport=!0;focusTrap=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";closeIcon;closeAriaLabel;closeTabindex="0";minimizeIcon;maximizeIcon;closeButtonProps={severity:"secondary",text:!0,rounded:!0};maximizeButtonProps={severity:"secondary",text:!0,rounded:!0};get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style=ht({},e),this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}role="dialog";onShow=new Vt;onHide=new Vt;visibleChange=new Vt;onResizeInit=new Vt;onResizeEnd=new Vt;onDragEnd=new Vt;onMaximize=new Vt;headerViewChild;contentViewChild;footerViewChild;headerTemplate;contentTemplate;footerTemplate;closeIconTemplate;maximizeIconTemplate;minimizeIconTemplate;headlessTemplate;_headerTemplate;_contentTemplate;_footerTemplate;_closeiconTemplate;_maximizeiconTemplate;_minimizeiconTemplate;_headlessTemplate;_visible=!1;maskVisible;container;wrapper;dragging;ariaLabelledBy=this.getAriaLabelledBy();documentDragListener;documentDragEndListener;resizing;documentResizeListener;documentResizeEndListener;documentEscapeListener;maskClickListener;lastPageX;lastPageY;preventVisibleChangePropagation;maximized;preMaximizeContentHeight;preMaximizeContainerWidth;preMaximizeContainerHeight;preMaximizePageX;preMaximizePageY;id=Be("pn_id_");_style={};_position="center";originalStyle;transformOptions="scale(0.7)";styleElement;window;_componentStyle=re(up);headerT;contentT;footerT;closeIconT;maximizeIconT;minimizeIconT;headlessT;get maximizeLabel(){return this.config.getTranslation(Gc.ARIA).maximizeLabel}zone=re(ar);get maskClass(){let i=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(r=>r===this.position);return{"p-dialog-mask":!0,"p-overlay-mask p-overlay-mask-enter":this.modal||this.dismissableMask,[`p-dialog-${i}`]:i}}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle()}templates;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerT=e.template;break;case"content":this.contentT=e.template;break;case"footer":this.footerT=e.template;break;case"closeicon":this.closeIconT=e.template;break;case"maximizeicon":this.maximizeIconT=e.template;break;case"minimizeicon":this.minimizeIconT=e.template;break;case"headless":this.headlessT=e.template;break;default:this.contentT=e.template;break}})}getAriaLabelledBy(){return this.header!==null?Be("pn_id_")+"_header":null}parseDurationToMilliseconds(e){let i=/([\d\.]+)(ms|s)\b/g,r=0,o;for(;(o=i.exec(e))!==null;){let a=parseFloat(o[1]),c=o[2];c==="ms"?r+=a:c==="s"&&(r+=a*1e3)}if(r!==0)return r}_focus(e){if(e){let i=this.parseDurationToMilliseconds(this.transitionOptions),r=$c.getFocusableElements(e);if(r&&r.length>0)return this.zone.runOutsideAngular(()=>{setTimeout(()=>r[0].focus(),i||5)}),!0}return!1}focus(e){let i=this._focus(e);i||(i=this._focus(this.footerViewChild?.nativeElement),i||(i=this._focus(this.headerViewChild?.nativeElement),i||this._focus(this.contentViewChild?.nativeElement)))}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&ho()}disableModality(){if(this.wrapper){this.dismissableMask&&this.unbindMaskClickListener();let e=document.querySelectorAll(".p-dialog-mask-scrollblocker");this.modal&&e&&e.length==1&&fo(),this.cd.destroyed||this.cd.detectChanges()}}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?ho():fo()),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Hl.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(hi(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let i in this.breakpoints)e+=`
                        @media screen and (max-width: ${i}) {
                            .p-dialog[${this.id}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[i]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e),zc(this.styleElement,"nonce",this.config?.csp()?.nonce)}}initDrag(e){fi(e.target,"p-dialog-maximize-icon")||fi(e.target,"p-dialog-header-close-icon")||fi(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",cr(this.document.body,"p-unselectable-text"))}onDrag(e){if(this.dragging){let i=mo(this.container),r=dr(this.container),o=e.pageX-this.lastPageX,a=e.pageY-this.lastPageY,c=this.container.getBoundingClientRect(),h=getComputedStyle(this.container),f=parseFloat(h.marginLeft),m=parseFloat(h.marginTop),E=c.left+o-f,b=c.top+a-m,x=po();this.container.style.position="fixed",this.keepInViewport?(E>=this.minX&&E+i<x.width&&(this._style.left=`${E}px`,this.lastPageX=e.pageX,this.container.style.left=`${E}px`),b>=this.minY&&b+r<x.height&&(this._style.top=`${b}px`,this.lastPageY=e.pageY,this.container.style.top=`${b}px`)):(this.lastPageX=e.pageX,this.container.style.left=`${E}px`,this.lastPageY=e.pageY,this.container.style.top=`${b}px`)}}endDrag(e){this.dragging&&(this.dragging=!1,hr(this.document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,cr(this.document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let i=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,o=mo(this.container),a=dr(this.container),c=dr(this.contentViewChild?.nativeElement),h=o+i,f=a+r,m=this.container.style.minWidth,E=this.container.style.minHeight,b=this.container.getBoundingClientRect(),x=po();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(h+=i,f+=r),(!m||h>parseInt(m))&&b.left+h<x.width&&(this._style.width=h+"px",this.container.style.width=this._style.width),(!E||f>parseInt(E))&&b.top+f<x.height&&(this.contentViewChild.nativeElement.style.height=c+f-a+"px",this._style.height&&(this._style.height=f+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,hr(this.document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.documentDragListener||this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.document.defaultView,"mousemove",this.onDrag.bind(this))})}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentDragEndListener(){this.documentDragEndListener||this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.document.defaultView,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragEndListener=null)}bindDocumentResizeListeners(){!this.documentResizeListener&&!this.documentResizeEndListener&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.document.defaultView,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.document.defaultView,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",i=>{i.key=="Escape"&&this.close(i)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.wrapper):Fc(this.appendTo,this.wrapper))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container?.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.modal&&this.enableModality(),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&cr(this.wrapper,"p-overlay-mask-leave");break}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({}),this.cd.markForCheck();break;case"visible":this.onShow.emit({});break}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(this.document.body.style.removeProperty("--scrollbar;-width"),this.maximized=!1),this.modal&&this.disableModality(),fi(this.document.body,"p-overflow-hidden")&&hr(this.document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Hl.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?ht({},this.originalStyle):{}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle(),super.ngOnDestroy()}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275cmp=an({type:n,selectors:[["p-dialog"]],contentQueries:function(i,r,o){if(i&1&&(le(o,B_,4),le(o,cp,4),le(o,hp,4),le(o,z_,4),le(o,q_,4),le(o,U_,4),le(o,G_,4),le(o,Uc,4)),i&2){let a;Mt(a=Ft())&&(r._headerTemplate=a.first),Mt(a=Ft())&&(r._contentTemplate=a.first),Mt(a=Ft())&&(r._footerTemplate=a.first),Mt(a=Ft())&&(r._closeiconTemplate=a.first),Mt(a=Ft())&&(r._maximizeiconTemplate=a.first),Mt(a=Ft())&&(r._minimizeiconTemplate=a.first),Mt(a=Ft())&&(r._headlessTemplate=a.first),Mt(a=Ft())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(lr($_,5),lr(cp,5),lr(hp,5)),i&2){let o;Mt(o=Ft())&&(r.headerViewChild=o.first),Mt(o=Ft())&&(r.contentViewChild=o.first),Mt(o=Ft())&&(r.footerViewChild=o.first)}},inputs:{header:"header",draggable:[2,"draggable","draggable",at],resizable:[2,"resizable","resizable",at],positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:[2,"modal","modal",at],closeOnEscape:[2,"closeOnEscape","closeOnEscape",at],dismissableMask:[2,"dismissableMask","dismissableMask",at],rtl:[2,"rtl","rtl",at],closable:[2,"closable","closable",at],responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",maskStyle:"maskStyle",showHeader:[2,"showHeader","showHeader",at],breakpoint:"breakpoint",blockScroll:[2,"blockScroll","blockScroll",at],autoZIndex:[2,"autoZIndex","autoZIndex",at],baseZIndex:[2,"baseZIndex","baseZIndex",ur],minX:[2,"minX","minX",ur],minY:[2,"minY","minY",ur],focusOnShow:[2,"focusOnShow","focusOnShow",at],maximizable:[2,"maximizable","maximizable",at],keepInViewport:[2,"keepInViewport","keepInViewport",at],focusTrap:[2,"focusTrap","focusTrap",at],transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",closeButtonProps:"closeButtonProps",maximizeButtonProps:"maximizeButtonProps",visible:"visible",style:"style",position:"position",role:"role",headerTemplate:[0,"content","headerTemplate"],contentTemplate:"contentTemplate",footerTemplate:"footerTemplate",closeIconTemplate:"closeIconTemplate",maximizeIconTemplate:"maximizeIconTemplate",minimizeIconTemplate:"minimizeIconTemplate",headlessTemplate:"headlessTemplate"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},features:[ue([up]),ln,dt],ngContentSelectors:H_,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["titlebar",""],["content",""],["icon",""],["footer",""],[3,"ngClass","class","ngStyle","style",4,"ngIf"],[3,"ngClass","ngStyle"],["pFocusTrap","",3,"class","ngClass","ngStyle","style","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","",3,"ngClass","ngStyle","pFocusTrapDisabled"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["style","z-index: 90;",3,"ngClass","mousedown",4,"ngIf"],[3,"mousedown","ngClass"],[3,"id","ngClass",4,"ngIf"],[3,"ngClass"],[3,"styleClass","tabindex","ariaLabel","buttonProps","onClick","keydown.enter",4,"ngIf"],[3,"styleClass","ariaLabel","tabindex","buttonProps","onClick","keydown.enter",4,"ngIf"],[3,"ngClass",4,"ngIf"],[2,"z-index","90",3,"mousedown","ngClass"],[3,"id","ngClass"],[3,"onClick","keydown.enter","styleClass","tabindex","ariaLabel","buttonProps"],[4,"ngIf"],[3,"onClick","keydown.enter","styleClass","ariaLabel","tabindex","buttonProps"]],template:function(i,r){i&1&&(ec(j_),st(0,Vy,2,11,"div",6)),i&2&&z("ngIf",r.maskVisible)},dependencies:[pc,cc,hc,fc,dc,Hc,op,jc,ip,rp,fr],encapsulation:2,data:{animation:[Mc("animation",[lo("void => visible",[co(xy)]),lo("visible => void",[co(Dy)])])]},changeDetection:0})}return n})(),Cw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ae({type:n});static \u0275inj=ne({imports:[Sy,fr,fr]})}return n})();var Ry=({dt:n})=>`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: ${n("inputtext.color")};
    background: ${n("inputtext.background")};
    padding-block: ${n("inputtext.padding.y")};
    padding-inline: ${n("inputtext.padding.x")};
    border: 1px solid ${n("inputtext.border.color")};
    transition: background ${n("inputtext.transition.duration")}, color ${n("inputtext.transition.duration")}, border-color ${n("inputtext.transition.duration")}, outline-color ${n("inputtext.transition.duration")}, box-shadow ${n("inputtext.transition.duration")};
    appearance: none;
    border-radius: ${n("inputtext.border.radius")};
    outline-color: transparent;
    box-shadow: ${n("inputtext.shadow")};
}

.p-inputtext.ng-invalid.ng-dirty {
    border-color: ${n("inputtext.invalid.border.color")};
}

.p-inputtext:enabled:hover {
    border-color: ${n("inputtext.hover.border.color")};
}

.p-inputtext:enabled:focus {
    border-color: ${n("inputtext.focus.border.color")};
    box-shadow: ${n("inputtext.focus.ring.shadow")};
    outline: ${n("inputtext.focus.ring.width")} ${n("inputtext.focus.ring.style")} ${n("inputtext.focus.ring.color")};
    outline-offset: ${n("inputtext.focus.ring.offset")};
}

.p-inputtext.p-invalid {
    border-color: ${n("inputtext.invalid.border.color")};
}

.p-inputtext.p-variant-filled {
    background: ${n("inputtext.filled.background")};
}
    
.p-inputtext.p-variant-filled:enabled:hover {
    background: ${n("inputtext.filled.hover.background")};
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: ${n("inputtext.filled.focus.background")};
}

.p-inputtext:disabled {
    opacity: 1;
    background: ${n("inputtext.disabled.background")};
    color: ${n("inputtext.disabled.color")};
}

.p-inputtext::placeholder {
    color: ${n("inputtext.placeholder.color")};
}

.p-inputtext.ng-invalid.ng-dirty::placeholder {
    color: ${n("inputtext.invalid.placeholder.color")};
}

.p-inputtext-sm {
    font-size: ${n("inputtext.sm.font.size")};
    padding-block: ${n("inputtext.sm.padding.y")};
    padding-inline: ${n("inputtext.sm.padding.x")};
}

.p-inputtext-lg {
    font-size: ${n("inputtext.lg.font.size")};
    padding-block: ${n("inputtext.lg.padding.y")};
    padding-inline: ${n("inputtext.lg.padding.x")};
}

.p-inputtext-fluid {
    width: 100%;
}
`,Py={root:({instance:n,props:t})=>["p-inputtext p-component",{"p-filled":n.filled,"p-inputtext-sm":t.size==="small","p-inputtext-lg":t.size==="large","p-invalid":t.invalid,"p-variant-filled":t.variant==="filled","p-inputtext-fluid":t.fluid}]},dp=(()=>{class n extends pr{name="inputtext";theme=Ry;classes=Py;static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275prov=si({token:n,factory:n.\u0275fac})}return n})();var Bw=(()=>{class n extends dn{ngModel;variant;fluid;pSize;filled;_componentStyle=re(dp);get hasFluid(){let i=this.el.nativeElement.closest("p-fluid");return qc(this.fluid)?!!i:this.fluid}constructor(e){super(),this.ngModel=e}ngAfterViewInit(){super.ngAfterViewInit(),this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(i){return new(i||n)(tt(jl,8))};static \u0275dir=xt({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component"],hostVars:14,hostBindings:function(i,r){if(i&1&&zt("input",function(a){return r.onInput(a)}),i&2){let o;li("p-filled",r.filled)("p-variant-filled",((o=r.variant)!==null&&o!==void 0?o:r.config.inputStyle()||r.config.inputVariant())==="filled")("p-inputtext-fluid",r.hasFluid)("p-inputtext-sm",r.pSize==="small")("p-inputfield-sm",r.pSize==="small")("p-inputtext-lg",r.pSize==="large")("p-inputfield-lg",r.pSize==="large")}},inputs:{variant:"variant",fluid:[2,"fluid","fluid",at],pSize:"pSize"},features:[ue([dp]),ln,dt]})}return n})(),zw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ae({type:n});static \u0275inj=ne({})}return n})();export{Fi as a,n0 as b,i0 as c,r0 as d,s0 as e,o0 as f,a0 as g,l0 as h,u0 as i,c0 as j,h0 as k,d0 as l,f0 as m,ql as n,Nf as o,bf as p,tn as q,k0 as r,N0 as s,xf as t,tp as u,jl as v,F0 as w,R_ as x,k_ as y,O0 as z,L0 as A,op as B,ap as C,tw as D,Hl as E,Sy as F,Cw as G,Bw as H,zw as I};
