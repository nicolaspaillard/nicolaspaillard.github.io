import{a as x,c as _,d as n,e as l,f as a,h as f,j as y,k as b,l as m}from"./chunk-7HJCJGS6.js";import{V as h,_ as p,h as d}from"./chunk-IZSKTIJ7.js";import{h as r}from"./chunk-MG3ERZGY.js";var c=class{constructor(u){Object.assign(this,u)}},E=(()=>{class i{constructor(o){this.db=o,this.__experiences=[],this._experiences=new d(1),this.experiences=()=>this._experiences.asObservable(),this.createExperience=t=>r(this,null,function*(){try{t.id=(yield _(n(this.db,"data","experiences","experiences"),t)).id,this.__experiences.push(t),this.__experiences.sort((e,s)=>e.start==s.start?0:e.start<s.start?-1:1),this._experiences.next(this.__experiences)}catch(e){console.error(e)}}),this.updateExperience=t=>r(this,null,function*(){try{let e=new c(t);delete e.id,yield m(a(this.db,"data","experiences","experiences",t.id),Object.assign({},e)),this.__experiences[this.__experiences.findIndex(s=>s.id===t.id)]=t,this._experiences.next(this.__experiences)}catch(e){console.error(e)}}),this.deleteExperience=t=>r(this,null,function*(){try{yield l(a(this.db,"data","experiences","experiences",t.id)),this.__experiences.splice(this.__experiences.findIndex(e=>e.id===t.id),1),this._experiences.next(this.__experiences)}catch(e){console.error(e)}});try{f(b(n(this.db,"data","experiences","experiences"),y("start","desc"))).then(t=>{t.docs.forEach(e=>{let s=new c(e.data());s.id=e.id,s.start=e.data().start.toDate(),e.data().end&&(s.end=e.data().end.toDate()),this.__experiences.push(s)})})}catch(t){console.error(t)}finally{this._experiences.next(this.__experiences)}}static{this.\u0275fac=function(t){return new(t||i)(p(x))}}static{this.\u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{c as a,E as b};
