import{d as se,e as me,f as de,g as ue}from"./chunk-PWBW6KWR.js";import{a as ae,b as le}from"./chunk-GC6PJI25.js";import{a as ce}from"./chunk-FOLNYXTT.js";import{a as oe,b as pe}from"./chunk-5FEVT77X.js";import{b as xe,c as fe}from"./chunk-JFLNAZIB.js";import{A as ee,E as te,F as ie,G as ne,H as re,o as J,p as j,r as K,s as Q,t as U,u as v,w as X,x as Y,y as Z}from"./chunk-65J3IC6C.js";import{Sa as M,db as D,eb as F}from"./chunk-ZEAIHS67.js";import{Bb as a,Kb as r,Lb as p,Mb as x,Nb as O,Ob as z,Qb as C,Rb as _,Sb as m,Uc as L,Vc as T,Wc as k,Zc as H,_c as V,ac as y,bb as o,bc as l,cb as b,cc as g,ec as A,fc as B,gc as G,h as R,hc as P,kc as $,lc as W,nb as w,pa as d,qa as u,tb as f,tc as S,vc as I,wc as q,za as N}from"./chunk-4TPAJTK6.js";var be=(e,s)=>({"lg:before:absolute lg:before:top-1/2 lg:before:h-[2px] lg:before:w-5 lg:before:-translate-y-full lg:before:bg-[green] xl:before:w-10":!0,"lg:ml-auto lg:before:-left-[calc(theme(spacing.5)+1px)] xl:before:-left-[calc(theme(spacing.10)+1px)]":e,"lg:flex-row-reverse lg:before:-right-[calc(theme(spacing.5)+1px)] xl:before:-right-[calc(theme(spacing.10)+1px)]":s}),Ee=e=>({"text-start":e});function ye(e,s){if(e&1){let i=C();r(0,"p-button",10),_("onClick",function(){d(i);let t=m();return u(t.onExperienceEdit.emit(t.experience))}),p()}e&2&&a("text",!0)}function we(e,s){if(e&1){let i=C();r(0,"p-button",11),_("onClick",function(){d(i);let t=m();return u(t.onExperienceRemoved.emit(t.experience))}),p()}e&2&&a("text",!0)}function Se(e,s){if(e&1&&(O(0),l(1),S(2,"date"),S(3,"date"),z()),e&2){let i=m();o(),A("",I(2,2,i.experience.start,"MM/yyyy")," - ",I(3,5,i.experience.end,"MM/yyyy"),"")}}function Ie(e,s){if(e&1&&(l(0),S(1,"date")),e&2){let i=m();g(I(1,1,i.experience.start,"dd/MM/yyyy"))}}function Te(e,s){if(e&1&&(r(0,"span"),l(1),p()),e&2){let i=m();o(),g(i.experience.company)}}function ke(e,s){if(e&1&&(r(0,"span"),l(1),p()),e&2){let i=m();o(),g(i.experience.address)}}function Ve(e,s){if(e&1&&(r(0,"span"),l(1),p()),e&2){let i=m();o(),A("",i.experience.city," ",i.experience.postcode,"")}}function Me(e,s){if(e&1&&(r(0,"p"),l(1),p()),e&2){let i=m();o(),g(i.experience.text)}}function De(e,s){if(e&1&&(r(0,"li"),l(1),p()),e&2){let i=s.$implicit;o(),g(i)}}function Fe(e,s){if(e&1&&(r(0,"ul",12),f(1,De,2,1,"li",13),p()),e&2){let i=m();a("dir",i.right?"":"rtl")("ngClass",$(3,Ee,!i.right)),o(),a("ngForOf",i.experience.activities.split(";"))}}var _e=(()=>{class e{constructor(i){this.authService=i,this.onExperienceRemoved=new N,this.onExperienceEdit=new N,this.user=null,this.authService.user().subscribe(c=>this.user=c)}static{this.\u0275fac=function(c){return new(c||e)(b(M))}}static{this.\u0275cmp=w({type:e,selectors:[["app-experience"]],inputs:{experience:"experience",right:"right"},outputs:{onExperienceRemoved:"onExperienceRemoved",onExperienceEdit:"onExperienceEdit"},decls:17,vars:17,consts:[["day",""],[1,"group","card","relative","flex","w-full","p-5","lg:w-[calc(50%-theme(spacing.5))]","lg:before:content-['']","xl:w-[calc(50%-theme(spacing.10))]","xl:p-10",3,"ngClass"],[1,"absolute","top-0","transition-opacity","group-hover:opacity-100","lg:opacity-0",3,"ngClass"],["icon","pi pi-pencil","size","small",3,"text","onClick",4,"ngIf"],["icon","pi pi-trash","size","small","severity","danger",3,"text","onClick",4,"ngIf"],[1,"flex","shrink","flex-col","border-0","border-solid","border-white/25","lg:w-48","lg:shrink-0","xl:w-60","[&>*:last-child]:mb-0",3,"ngClass"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"[&>*:last-child]:mb-0",3,"ngClass"],[3,"dir","ngClass",4,"ngIf"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"],[3,"dir","ngClass"],[4,"ngFor","ngForOf"]],template:function(c,t){if(c&1&&(r(0,"div",1)(1,"div",2),f(2,ye,1,1,"p-button",3)(3,we,1,1,"p-button",4),p(),r(4,"div",5)(5,"h3"),f(6,Se,4,8,"ng-container",6)(7,Ie,2,4,"ng-template",null,0,q),p(),f(9,Te,2,1,"span",7)(10,ke,2,1,"span",7)(11,Ve,2,2,"span",7),p(),r(12,"div",8)(13,"h3"),l(14),p(),f(15,Me,2,1,"p",7)(16,Fe,2,5,"ul",9),p()()),c&2){let n=y(8);a("ngClass",W(14,be,t.right,!t.right)),o(),a("ngClass",t.right?"right-0 lg:left-0":"right-0"),o(),a("ngIf",t.user&&t.user.roles.includes("admin")),o(),a("ngIf",t.user&&t.user.roles.includes("admin")),o(),a("ngClass",t.right?"mr-5 border-r pr-5 text-end":"mr-5 border-r pr-5 text-end lg:ml-5 lg:mr-0 lg:border-l lg:border-r-0 lg:pl-5 lg:text-start"),o(2),a("ngIf",t.experience.end)("ngIfElse",n),o(3),a("ngIf",t.experience.company),o(),a("ngIf",t.experience.address),o(),a("ngIf",t.experience.city||t.experience.postcode),o(),a("ngClass",t.right?"":"lg:text-end"),o(2),g(t.experience.title),o(),a("ngIf",t.experience.text),o(),a("ngIf",t.experience.activities)}},dependencies:[V,L,T,k,H,F,D],encapsulation:2})}}return e})();function Ne(e,s){if(e&1){let i=C();r(0,"p-button",25),_("onClick",function(){d(i);let t=m();return u(t.openDialog())}),p()}e&2&&a("text",!0)}function Ae(e,s){if(e&1){let i=C();r(0,"app-experience",26),_("onExperienceRemoved",function(){let t=d(i).$implicit,n=m();return u(n.deleteExperience(t))})("onExperienceEdit",function(){let t=d(i).$implicit,n=m();return u(n.openDialog(t))}),p()}if(e&2){let i=s.$implicit,c=s.index;a("experience",i)("right",c%2!=0)}}function je(e,s){e&1&&(r(0,"span",27),l(1,"\xA0(Aucune activit\xE9)"),p())}function Re(e,s){if(e&1){let i=C();r(0,"div",28)(1,"span",29),l(2),p(),r(3,"p-button",30),_("onClick",function(){let t=d(i).$implicit,n=m();return u(n.removeActivity(t))}),p()()}if(e&2){let i=s.$implicit;a("pTooltip",i),o(2),g(i),o(),a("text",!0)}}var st=(()=>{class e{constructor(i,c,t){this.authService=i,this.confirmService=c,this.careerService=t,this.isDialogShown=!1,this.user=null,this.activities=[],this.idEdit="",this.formExperience=new U({start:new v(new Date,[j.required]),end:new v(new Date,[]),title:new v("",[j.required]),text:new v("",[]),company:new v("",[]),address:new v("",[]),postcode:new v("",[]),city:new v("",[]),activities:new v("",[])}),this.experiences=[],this.openDialog=n=>{if(n){this.idEdit=n.id,n.activities&&n.activities.length&&(this.activities=n.activities.split(";"));let h=new oe(n);delete h.id,this.formExperience.setValue(h)}else this.idEdit="",this.formExperience.reset(),this.activities=[];this.isDialogShown=!0},this.addActivity=n=>{this.activities.push(n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.removeActivity=n=>{this.activities=this.activities.filter(h=>h!=n),this.formExperience.patchValue({activities:this.activities.join(";")})},this.createExperience=()=>{this.careerService.createExperience(this.formExperience.value)},this.updateExperience=()=>{let n=this.formExperience.value;n.id=this.idEdit,this.careerService.updateExperience(n)},this.deleteExperience=n=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${n.title}' ?`,accept:()=>R(this,null,function*(){this.careerService.deleteExperience(n)})})},this.authService.user().subscribe(n=>this.user=n),this.careerService.experiences().subscribe(n=>this.experiences=n)}static{this.\u0275fac=function(c){return new(c||e)(b(M),b(ce),b(pe))}}static{this.\u0275cmp=w({type:e,selectors:[["app-career"]],decls:50,vars:13,consts:[["activity",""],[1,"flex","min-h-full","flex-col","items-center","justify-center","px-5","py-5","lg:px-0"],["size","large","class","block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[1,"relative","w-full","grow","py-10"],[1,"absolute","left-1/2","top-1","h-full","w-[2px]","-translate-x-[calc(100%-1px)]","rounded","bg-[green]"],[1,"absolute","left-1/2","top-0","-translate-x-[10px]","border-b-[15px]","border-l-[10px]","border-r-[10px]","border-t-0","border-solid","border-transparent","border-b-[green]"],["class","block [&:nth-child(n+4)]:mt-5 lg:[&:nth-child(n+4)]:-mt-10",3,"experience","right","onExperienceRemoved","onExperienceEdit",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&>label]:gap-0","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col",3,"formGroup"],["formControlName","start","appendTo","body","dateFormat","dd/mm/yy"],["formControlName","end","appendTo","body","dateFormat","dd/mm/yy"],["pInputText","","type","text","formControlName","title"],["pTextarea","","formControlName","text"],["pInputText","","formControlName","company"],["pInputText","","formControlName","address"],["pInputText","","formControlName","postcode"],["pInputText","","formControlName","city"],[1,"!block"],["class","opacity-50",4,"ngIf"],["class","group relative flex items-center justify-between ps-6 transition-colors after:absolute after:left-2 after:h-[6px] after:w-[6px] after:rounded-full after:bg-white after:opacity-50 after:content-[''] hover:bg-black/10","tooltipPosition","bottom",3,"pTooltip",4,"ngFor","ngForOf"],["pInputText","","placeholder","Activit\xE9"],["icon","pi pi-plus",3,"onClick","disabled"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"block","text-center",3,"onClick","text"],[1,"block","[&:nth-child(n+4)]:mt-5","lg:[&:nth-child(n+4)]:-mt-10",3,"onExperienceRemoved","onExperienceEdit","experience","right"],[1,"opacity-50"],["tooltipPosition","bottom",1,"group","relative","flex","items-center","justify-between","ps-6","transition-colors","after:absolute","after:left-2","after:h-[6px]","after:w-[6px]","after:rounded-full","after:bg-white","after:opacity-50","after:content-['']","hover:bg-black/10",3,"pTooltip"],[1,"block","max-w-[400px]","truncate","pe-2","opacity-50"],["icon","pi pi-trash","size","small","severity","danger",1,"opacity-0","transition-opacity","group-hover:opacity-100",3,"onClick","text"]],template:function(c,t){if(c&1){let n=C();r(0,"div",1),f(1,Ne,1,1,"p-button",2),r(2,"div",3),x(3,"div",4)(4,"div",5),f(5,Ae,1,2,"app-experience",6),p()(),r(6,"p-dialog",7),P("visibleChange",function(E){return d(n),G(t.isDialogShown,E)||(t.isDialogShown=E),u(E)}),r(7,"form",8)(8,"div")(9,"label"),l(10," D\xE9but "),x(11,"p-datepicker",9),p(),r(12,"label"),l(13," Fin "),x(14,"p-datepicker",10),p()(),r(15,"label"),l(16," Titre "),x(17,"input",11),p(),r(18,"label"),l(19," Texte "),x(20,"textarea",12),p(),r(21,"div")(22,"label"),l(23," Soci\xE9t\xE9 "),x(24,"input",13),p(),r(25,"label"),l(26," Adresse "),x(27,"input",14),p()(),r(28,"div")(29,"label"),l(30," Code postal "),x(31,"input",15),p(),r(32,"label"),l(33," Ville "),x(34,"input",16),p()(),r(35,"label",17),l(36," Activit\xE9s "),f(37,je,2,0,"span",18)(38,Re,4,3,"div",19),p(),r(39,"label"),l(40," Ajouter une activit\xE9 "),r(41,"p-inputGroup"),x(42,"input",20,0),r(44,"p-button",21),_("onClick",function(){d(n);let E=y(43);return u(t.addActivity(E.value))}),p()()()(),r(45,"div",22)(46,"p-button",23),_("onClick",function(){return d(n),u(t.isDialogShown=!1)}),l(47,"Annuler"),p(),r(48,"p-button",24),_("onClick",function(){return d(n),t.idEdit.length?t.updateExperience():t.createExperience(),u(t.isDialogShown=!1)}),l(49),p()()()}if(c&2){let n=y(43);o(),a("ngIf",t.user&&t.user.roles.includes("admin")),o(4),a("ngForOf",t.experiences),o(),a("modal",!0)("header",(t.idEdit.length?"Modifier":"Ajouter")+" une exp\xE9rience")("dismissableMask",!0),B("visible",t.isDialogShown),o(),a("formGroup",t.formExperience),o(30),a("ngIf",!t.activities.length),o(),a("ngForOf",t.activities),o(6),a("disabled",!n.value),o(2),a("text",!0),o(2),a("disabled",!t.formExperience.valid),o(),g(t.idEdit.length?"Modifier":"Ajouter")}},dependencies:[V,T,k,ee,X,J,K,Q,Y,Z,_e,ie,te,me,se,le,ae,re,ne,F,D,ue,de,fe,xe],encapsulation:2})}}return e})();export{st as CareerComponent};
