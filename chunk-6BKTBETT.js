import{a as J,b as K}from"./chunk-YZVGKIYX.js";import{a as Q,b as U}from"./chunk-Z4DGPOOH.js";import{a as X}from"./chunk-Q3WAPXBZ.js";import{a as Y,b as H}from"./chunk-C7OY2AD6.js";import{A as P,F as W,G as $,I as L,o as R,p as M,r as j,s as B,t as z,u as T,w as G,x as q,y as O}from"./chunk-SEJLOZK4.js";import{Ta as b,eb as w,fb as y}from"./chunk-JIESCAZN.js";import{Cb as c,Lb as r,Mb as a,Nb as D,Rb as h,Sb as l,Tb as u,Xc as N,Yc as C,ad as x,cb as s,cc as d,dc as g,h as V,hc as I,ib as _,ic as A,jc as F,ob as v,pa as p,qa as m,ub as S,za as k}from"./chunk-IGXIJTVN.js";function ne(i,E){if(i&1){let n=h();r(0,"div",3)(1,"p-button",4),l("onClick",function(){p(n);let e=u();return m(e.onSectionEdit.emit(e.section))}),a(),r(2,"p-button",5),l("onClick",function(){p(n);let e=u();return m(e.onSectionRemoved.emit(e.section))}),a()()}i&2&&(s(),c("text",!0),s(),c("text",!0))}var Z=(()=>{class i{constructor(n){this.authService=n,this.onSectionRemoved=new k,this.onSectionEdit=new k,this.user=null,this.authService.user().subscribe(o=>this.user=o)}static{this.\u0275fac=function(o){return new(o||i)(_(b))}}static{this.\u0275cmp=v({type:i,selectors:[["app-section"]],inputs:{section:"section"},outputs:{onSectionRemoved:"onSectionRemoved",onSectionEdit:"onSectionEdit"},decls:4,vars:2,consts:[[1,"group","card","relative","flex","h-full","items-center","p-5","md:p-10"],["class","absolute top-0 right-0 z-10 transition-opacity group-hover:opacity-100 lg:opacity-0",4,"ngIf"],[1,"m-0"],[1,"absolute","top-0","right-0","z-10","transition-opacity","group-hover:opacity-100","lg:opacity-0"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"]],template:function(o,e){o&1&&(r(0,"div",0),S(1,ne,3,2,"div",1),r(2,"p",2),d(3),a()()),o&2&&(s(),c("ngIf",e.user&&e.user.roles.includes("admin")),s(2),g(e.section.text))},dependencies:[x,C,y,w],encapsulation:2})}}return i})();function re(i,E){if(i&1){let n=h();r(0,"p-button",11),l("onClick",function(){p(n);let e=u();return m(e.openDialog())}),a()}i&2&&c("text",!0)}function se(i,E){if(i&1){let n=h();r(0,"app-section",12),l("onSectionEdit",function(){let e=p(n).$implicit,t=u();return m(t.openDialog(e))})("onSectionRemoved",function(){let e=p(n).$implicit,t=u();return m(t.deleteSection(e))}),a()}if(i&2){let n=E.$implicit;c("section",n)}}var Te=(()=>{class i{constructor(n,o,e){this.authService=n,this.sectionsService=o,this.confirmService=e,this.bubbles=[{icon:"heroMagnifyingGlassSolid",text:"Recherche CDI"},{icon:"heroCakeSolid",text:new Date().getFullYear()-1997+" ans"},{icon:"bootstrapCarFrontFill",text:"Permis B"},{icon:"heroMapPinSolid",text:"Montpellier, France"},{icon:"heroAcademicCapSolid",text:"BTS Syst\xE8mes Num\xE9riques, option Informatique et R\xE9seaux"},{icon:"heroEnvelopeSolid",text:"Contacter par mail",href:""}],this.user=null,this.isDialogSectionShown=!1,this.idEdit="",this.formSection=new z({rank:new T(0,[M.required]),text:new T("",[M.required])}),this.sections=[],this.openDialog=t=>{if(t){this.idEdit=t.id;let f=new Y(t);delete f.id,this.formSection.setValue(f)}else this.idEdit="",this.formSection.setValue({rank:this.sections[this.sections.length-1].rank+1,text:""});this.isDialogSectionShown=!0},this.createSection=()=>this.sectionsService.createSection(this.formSection.value).then(()=>this.isDialogSectionShown=!1),this.updateSection=()=>{let t=this.formSection.value;t.id=this.idEdit,this.sectionsService.updateSection(t).then(()=>this.isDialogSectionShown=!1)},this.deleteSection=t=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${t.text}' ?`,accept:()=>V(this,null,function*(){this.sectionsService.deleteSection(t)})})},this.authService.user().subscribe(t=>this.user=t),this.sectionsService.sections().subscribe(t=>this.sections=t)}static{this.\u0275fac=function(o){return new(o||i)(_(b),_(H),_(X))}}static{this.\u0275cmp=v({type:i,selectors:[["app-about"]],decls:17,vars:11,consts:[[1,"flex","min-h-full","flex-col","justify-center","p-5","md:p-10"],["size","large","class","block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[1,"flex","flex-wrap","justify-center","gap-5","md:gap-10"],["class","flex-[0_0_100%] sm:flex-[0_0_calc(50%-calc(var(--spacing)*2.5))] md:flex-[0_0_calc(50%-calc(var(--spacing)*5))]",3,"section","onSectionEdit","onSectionRemoved",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col","[&>label]:gap-0",3,"formGroup"],["formControlName","rank",3,"showButtons"],["pTextarea","","formControlName","text",1,"h-40","w-2xl"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"block","text-center",3,"onClick","text"],[1,"flex-[0_0_100%]","sm:flex-[0_0_calc(50%-calc(var(--spacing)*2.5))]","md:flex-[0_0_calc(50%-calc(var(--spacing)*5))]",3,"onSectionEdit","onSectionRemoved","section"]],template:function(o,e){o&1&&(r(0,"div",0),S(1,re,1,1,"p-button",1),r(2,"div",2),S(3,se,1,1,"app-section",3),a()(),r(4,"p-dialog",4),F("visibleChange",function(f){return A(e.isDialogSectionShown,f)||(e.isDialogSectionShown=f),f}),r(5,"form",5)(6,"label"),d(7," Rang "),D(8,"p-inputnumber",6),a(),r(9,"label"),d(10," Texte "),D(11,"textarea",7),a()(),r(12,"div",8)(13,"p-button",9),l("onClick",function(){return e.isDialogSectionShown=!1}),d(14,"Annuler"),a(),r(15,"p-button",10),l("onClick",function(){return e.idEdit.length?e.updateSection():e.createSection()}),d(16),a()()()),o&2&&(s(),c("ngIf",e.user&&e.user.roles.includes("admin")),s(2),c("ngForOf",e.sections),s(),c("modal",!0)("header",(e.idEdit.length?"Modifier":"Ajouter")+" un paragraphe")("dismissableMask",!0),I("visible",e.isDialogSectionShown),s(),c("formGroup",e.formSection),s(3),c("showButtons",!0),s(5),c("text",!0),s(2),c("disabled",!e.formSection.valid),s(),g(e.idEdit.length?"Modifier":"Ajouter"))},dependencies:[x,N,C,Z,P,G,R,j,B,q,O,$,W,y,w,L,U,Q,K,J],encapsulation:2})}}return i})();export{Te as AboutComponent};
