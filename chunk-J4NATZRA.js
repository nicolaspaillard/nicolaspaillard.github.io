import{a as J,b as K}from"./chunk-GC6PJI25.js";import{a as Q}from"./chunk-FOLNYXTT.js";import{a as Y,b as H}from"./chunk-IWAN54RV.js";import{A as P,E as W,F as $,H as L,o as F,p as R,r as N,s as j,t as z,u as B,w as G,x as O,y as q}from"./chunk-65J3IC6C.js";import{Sa as x,db as y,eb as w}from"./chunk-ZEAIHS67.js";import{Bb as s,Kb as c,Lb as l,Mb as M,Qb as _,Rb as a,Sb as u,Vc as I,Wc as C,_c as b,bb as r,bc as S,cb as f,cc as g,fc as T,gc as V,h as D,hc as A,nb as h,pa as p,qa as m,tb as v,za as k}from"./chunk-4TPAJTK6.js";function ie(i,E){if(i&1){let n=_();c(0,"div",2)(1,"p-button",3),a("onClick",function(){p(n);let e=u();return m(e.onSectionEdit.emit(e.section))}),l(),c(2,"p-button",4),a("onClick",function(){p(n);let e=u();return m(e.onSectionRemoved.emit(e.section))}),l()()}i&2&&(r(),s("text",!0),r(),s("text",!0))}var U=(()=>{class i{constructor(n){this.authService=n,this.onSectionRemoved=new k,this.onSectionEdit=new k,this.user=null,this.authService.user().subscribe(o=>this.user=o)}static{this.\u0275fac=function(o){return new(o||i)(f(x))}}static{this.\u0275cmp=h({type:i,selectors:[["app-section"]],inputs:{section:"section"},outputs:{onSectionRemoved:"onSectionRemoved",onSectionEdit:"onSectionEdit"},decls:4,vars:2,consts:[[1,"group","card","relative","h-full","p-10"],["class","absolute right-0 top-0 z-10 transition-opacity group-hover:opacity-100 lg:opacity-0",4,"ngIf"],[1,"absolute","right-0","top-0","z-10","transition-opacity","group-hover:opacity-100","lg:opacity-0"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"]],template:function(o,e){o&1&&(c(0,"div",0),v(1,ie,3,2,"div",1),c(2,"p"),S(3),l()()),o&2&&(r(),s("ngIf",e.user&&e.user.roles.includes("admin")),r(2),g(e.section.text))},dependencies:[b,C,w,y],encapsulation:2})}}return i})();function oe(i,E){if(i&1){let n=_();c(0,"p-button",9),a("onClick",function(){p(n);let e=u();return m(e.openDialogSection())}),l()}i&2&&s("text",!0)}function ne(i,E){if(i&1){let n=_();c(0,"app-section",10),a("onSectionEdit",function(){let e=p(n).$implicit,t=u();return m(t.openDialogSection(e))})("onSectionRemoved",function(){let e=p(n).$implicit,t=u();return m(t.deleteSection(e))}),l()}if(i&2){let n=E.$implicit;s("section",n)}}var Ee=(()=>{class i{constructor(n,o,e){this.authService=n,this.sectionsService=o,this.confirmService=e,this.bubbles=[{icon:"heroMagnifyingGlassSolid",text:"Recherche CDI"},{icon:"heroCakeSolid",text:new Date().getFullYear()-1997+" ans"},{icon:"bootstrapCarFrontFill",text:"Permis B"},{icon:"heroMapPinSolid",text:"Montpellier, France"},{icon:"heroAcademicCapSolid",text:"BTS Syst\xE8mes Num\xE9riques, option Informatique et R\xE9seaux"},{icon:"heroEnvelopeSolid",text:"Contacter par mail",href:""}],this.user=null,this.isDialogSectionShown=!1,this.idEdit="",this.formSection=new z({text:new B("",[R.required])}),this.sections=[],this.openDialogSection=t=>{if(t){this.idEdit=t.id;let d=new Y(t);delete d.id,this.formSection.setValue(d)}else this.idEdit="",this.formSection.reset();this.isDialogSectionShown=!0},this.createSection=()=>this.sectionsService.createSection(this.formSection.value).then(()=>this.isDialogSectionShown=!1),this.updateSection=()=>{let t=this.formSection.value;t.id=this.idEdit,this.sectionsService.updateSection(t).then(()=>this.isDialogSectionShown=!1)},this.deleteSection=t=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${t.text}' ?`,accept:()=>D(this,null,function*(){this.sectionsService.deleteSection(t)})})},this.authService.user().subscribe(t=>this.user=t),this.sectionsService.sections().subscribe(t=>this.sections=t)}static{this.\u0275fac=function(o){return new(o||i)(f(x),f(H),f(Q))}}static{this.\u0275cmp=h({type:i,selectors:[["app-about"]],decls:13,vars:10,consts:[[1,"flex","min-h-full","flex-col","items-center","justify-center","px-5","py-5","lg:px-0"],["size","large","class","mb-5 block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[3,"section","onSectionEdit","onSectionRemoved",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&>label]:gap-0","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col",3,"formGroup"],["pTextarea","","formControlName","text"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"mb-5","block","text-center",3,"onClick","text"],[3,"onSectionEdit","onSectionRemoved","section"]],template:function(o,e){o&1&&(c(0,"div",0),v(1,oe,1,1,"p-button",1)(2,ne,1,1,"app-section",2),l(),c(3,"p-dialog",3),A("visibleChange",function(d){return V(e.isDialogSectionShown,d)||(e.isDialogSectionShown=d),d}),c(4,"form",4)(5,"label"),S(6," Texte "),M(7,"textarea",5),l()(),c(8,"div",6)(9,"p-button",7),a("onClick",function(){return e.isDialogSectionShown=!1}),S(10,"Annuler"),l(),c(11,"p-button",8),a("onClick",function(){return e.idEdit.length?e.updateSection():e.createSection()}),S(12),l()()()),o&2&&(r(),s("ngIf",e.user&&e.user.roles.includes("admin")),r(),s("ngForOf",e.sections),r(),s("modal",!0)("header",(e.idEdit.length?"Modifier":"Ajouter")+" une exp\xE9rience")("dismissableMask",!0),T("visible",e.isDialogSectionShown),r(),s("formGroup",e.formSection),r(5),s("text",!0),r(2),s("disabled",!e.formSection.valid),r(),g(e.idEdit.length?"Modifier":"Ajouter"))},dependencies:[b,I,C,U,P,G,F,N,j,O,q,$,W,w,y,L,K,J],encapsulation:2})}}return i})();export{Ee as AboutComponent};
