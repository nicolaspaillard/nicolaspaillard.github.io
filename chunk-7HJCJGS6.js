import{A as fc,B as pc,C as mc,D as gc,Ea as Le,F as _c,G as Ot,H as yc,I as vc,M as wc,Ma as xc,Na as ur,Oa as Dc,Q as ci,R as or,S as io,Sa as cr,T as ar,U as ro,Ua as cn,V as so,Va as Sc,Ya as hr,_ as oo,_a as Rc,aa as Ec,ba as Tc,bb as Pc,c as nc,e as ic,f as rc,fa as ao,h as sc,ia as bc,l as oc,la as Ac,ma as lr,q as Oe,r as ac,s as Ht,t as lc,ua as Cc,v as uc,va as Vc,w as cc,x as hc,y as dc,z as ui}from"./chunk-WIGCV5ZO.js";import{$ as ie,$b as ae,A as Lu,Bb as ft,Cb as _t,Cc as Ju,Db as Nt,Eb as an,Fb as ln,Gb as oi,Hb as un,Ib as qt,Jb as X,Jc as Xu,Kb as Uu,Lb as Qs,Lc as Yu,Mc as Zu,Nb as oe,Nc as tc,Ob as rr,Oc as ec,Pb as Mt,Qb as Ft,Qc as li,T as er,Tb as Gu,U as ei,Ua as $,Ub as $u,V as ni,Va as tt,Vb as ju,W as Ie,Y as ne,Yc as Ic,Zc as Ys,_a as Ks,aa as ii,ab as ri,ac as Ku,ad as Zs,bc as Ws,ca as Bu,cc as Hu,cd as to,dc as Qu,dd as eo,eb as sn,f as Mu,fb as Ee,fd as no,gb as xt,ha as rn,ia as re,ib as dt,ja as se,jb as on,ka as nr,kb as st,la as Rt,lc as Js,mb as zu,na as $s,p as Fu,ra as Vt,rb as Kt,rc as Wu,sa as ir,sb as q,tc as at,u as Ou,ub as si,uc as sr,va as js,vb as Hs,vc as ai,wb as Te,wc as be,za as qu,zc as Xs}from"./chunk-IZSKTIJ7.js";import{a as ht,b as jt,h as P}from"./chunk-MG3ERZGY.js";var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nc={};var Ae,lo;(function(){var n;function t(w,p){function _(){}_.prototype=p.prototype,w.D=p.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(y,v,T){for(var g=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)g[Zt-2]=arguments[Zt];return p.prototype[v].apply(y,g)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,p,_){_||(_=0);var y=Array(16);if(typeof p=="string")for(var v=0;16>v;++v)y[v]=p.charCodeAt(_++)|p.charCodeAt(_++)<<8|p.charCodeAt(_++)<<16|p.charCodeAt(_++)<<24;else for(v=0;16>v;++v)y[v]=p[_++]|p[_++]<<8|p[_++]<<16|p[_++]<<24;p=w.g[0],_=w.g[1],v=w.g[2];var T=w.g[3],g=p+(T^_&(v^T))+y[0]+3614090360&4294967295;p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[1]+3905402710&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[2]+606105819&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[3]+3250441966&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(T^_&(v^T))+y[4]+4118548399&4294967295,p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[5]+1200080426&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[6]+2821735955&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[7]+4249261313&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(T^_&(v^T))+y[8]+1770035416&4294967295,p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[9]+2336552879&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[10]+4294925233&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[11]+2304563134&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(T^_&(v^T))+y[12]+1804603682&4294967295,p=_+(g<<7&4294967295|g>>>25),g=T+(v^p&(_^v))+y[13]+4254626195&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(_^T&(p^_))+y[14]+2792965006&4294967295,v=T+(g<<17&4294967295|g>>>15),g=_+(p^v&(T^p))+y[15]+1236535329&4294967295,_=v+(g<<22&4294967295|g>>>10),g=p+(v^T&(_^v))+y[1]+4129170786&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[6]+3225465664&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[11]+643717713&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[0]+3921069994&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(_^v))+y[5]+3593408605&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[10]+38016083&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[15]+3634488961&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[4]+3889429448&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(_^v))+y[9]+568446438&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[14]+3275163606&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[3]+4107603335&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[8]+1163531501&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(_^v))+y[13]+2850285829&4294967295,p=_+(g<<5&4294967295|g>>>27),g=T+(_^v&(p^_))+y[2]+4243563512&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^_&(T^p))+y[7]+1735328473&4294967295,v=T+(g<<14&4294967295|g>>>18),g=_+(T^p&(v^T))+y[12]+2368359562&4294967295,_=v+(g<<20&4294967295|g>>>12),g=p+(_^v^T)+y[5]+4294588738&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[8]+2272392833&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[11]+1839030562&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[14]+4259657740&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(_^v^T)+y[1]+2763975236&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[4]+1272893353&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[7]+4139469664&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[10]+3200236656&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(_^v^T)+y[13]+681279174&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[0]+3936430074&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[3]+3572445317&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[6]+76029189&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(_^v^T)+y[9]+3654602809&4294967295,p=_+(g<<4&4294967295|g>>>28),g=T+(p^_^v)+y[12]+3873151461&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^_)+y[15]+530742520&4294967295,v=T+(g<<16&4294967295|g>>>16),g=_+(v^T^p)+y[2]+3299628645&4294967295,_=v+(g<<23&4294967295|g>>>9),g=p+(v^(_|~T))+y[0]+4096336452&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[7]+1126891415&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[14]+2878612391&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[5]+4237533241&4294967295,_=v+(g<<21&4294967295|g>>>11),g=p+(v^(_|~T))+y[12]+1700485571&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[3]+2399980690&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[10]+4293915773&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[1]+2240044497&4294967295,_=v+(g<<21&4294967295|g>>>11),g=p+(v^(_|~T))+y[8]+1873313359&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[15]+4264355552&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[6]+2734768916&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[13]+1309151649&4294967295,_=v+(g<<21&4294967295|g>>>11),g=p+(v^(_|~T))+y[4]+4149444226&4294967295,p=_+(g<<6&4294967295|g>>>26),g=T+(_^(p|~v))+y[11]+3174756917&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~_))+y[2]+718787259&4294967295,v=T+(g<<15&4294967295|g>>>17),g=_+(T^(v|~p))+y[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(v+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+v&4294967295,w.g[3]=w.g[3]+T&4294967295}i.prototype.u=function(w,p){p===void 0&&(p=w.length);for(var _=p-this.blockSize,y=this.B,v=this.h,T=0;T<p;){if(v==0)for(;T<=_;)r(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<p;)if(y[v++]=w.charCodeAt(T++),v==this.blockSize){r(this,y),v=0;break}}else for(;T<p;)if(y[v++]=w[T++],v==this.blockSize){r(this,y),v=0;break}}this.h=v,this.o+=p},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;var _=8*this.o;for(p=w.length-8;p<w.length;++p)w[p]=_&255,_/=256;for(this.u(w),w=Array(16),p=_=0;4>p;++p)for(var y=0;32>y;y+=8)w[_++]=this.g[p]>>>y&255;return w};function o(w,p){var _=c;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=p(w)}function a(w,p){this.h=p;for(var _=[],y=!0,v=w.length-1;0<=v;v--){var T=w[v]|0;y&&T==p||(_[v]=T,y=!1)}this.g=_}var c={};function h(w){return-128<=w&&128>w?o(w,function(p){return new a([p|0],0>p?-1:0)}):new a([w|0],0>w?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return E;if(0>w)return S(f(-w));for(var p=[],_=1,y=0;w>=_;y++)p[y]=w/_|0,_*=4294967296;return new a(p,0)}function m(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return S(m(w.substring(1),p));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=f(Math.pow(p,8)),y=E,v=0;v<w.length;v+=8){var T=Math.min(8,w.length-v),g=parseInt(w.substring(v,v+T),p);8>T?(T=f(Math.pow(p,T)),y=y.j(T).add(f(g))):(y=y.j(_),y=y.add(f(g)))}return y}var E=h(0),b=h(1),V=h(16777216);n=a.prototype,n.m=function(){if(M(this))return-S(this).m();for(var w=0,p=1,_=0;_<this.g.length;_++){var y=this.i(_);w+=(0<=y?y:4294967296+y)*p,p*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(M(this))return"-"+S(this).toString(w);for(var p=f(Math.pow(w,6)),_=this,y="";;){var v=it(_,p).g;_=j(_,v.j(p));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=v,N(_))return T+y;for(;6>T.length;)T="0"+T;y=T+y}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(var p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=j(this,w),M(w)?-1:N(w)?0:1};function S(w){for(var p=w.g.length,_=[],y=0;y<p;y++)_[y]=~w.g[y];return new a(_,~w.h).add(b)}n.abs=function(){return M(this)?S(this):this},n.add=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0,v=0;v<=p;v++){var T=y+(this.i(v)&65535)+(w.i(v)&65535),g=(T>>>16)+(this.i(v)>>>16)+(w.i(v)>>>16);y=g>>>16,T&=65535,g&=65535,_[v]=g<<16|T}return new a(_,_[_.length-1]&-2147483648?-1:0)};function j(w,p){return w.add(S(p))}n.j=function(w){if(N(this)||N(w))return E;if(M(this))return M(w)?S(this).j(S(w)):S(S(this).j(w));if(M(w))return S(this.j(S(w)));if(0>this.l(V)&&0>w.l(V))return f(this.m()*w.m());for(var p=this.g.length+w.g.length,_=[],y=0;y<2*p;y++)_[y]=0;for(y=0;y<this.g.length;y++)for(var v=0;v<w.g.length;v++){var T=this.i(y)>>>16,g=this.i(y)&65535,Zt=w.i(v)>>>16,Fn=w.i(v)&65535;_[2*y+2*v]+=g*Fn,K(_,2*y+2*v),_[2*y+2*v+1]+=T*Fn,K(_,2*y+2*v+1),_[2*y+2*v+1]+=g*Zt,K(_,2*y+2*v+1),_[2*y+2*v+2]+=T*Zt,K(_,2*y+2*v+2)}for(y=0;y<p;y++)_[y]=_[2*y+1]<<16|_[2*y];for(y=p;y<2*p;y++)_[y]=0;return new a(_,0)};function K(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function Q(w,p){this.g=w,this.h=p}function it(w,p){if(N(p))throw Error("division by zero");if(N(w))return new Q(E,E);if(M(w))return p=it(S(w),p),new Q(S(p.g),S(p.h));if(M(p))return p=it(w,S(p)),new Q(S(p.g),p.h);if(30<w.g.length){if(M(w)||M(p))throw Error("slowDivide_ only works with positive integers.");for(var _=b,y=p;0>=y.l(w);)_=kt(_),y=kt(y);var v=Y(_,1),T=Y(y,1);for(y=Y(y,2),_=Y(_,2);!N(y);){var g=T.add(y);0>=g.l(w)&&(v=v.add(_),T=g),y=Y(y,1),_=Y(_,1)}return p=j(w,v.j(p)),new Q(v,p)}for(v=E;0<=w.l(p);){for(_=Math.max(1,Math.floor(w.m()/p.m())),y=Math.ceil(Math.log(_)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),T=f(_),g=T.j(p);M(g)||0<g.l(w);)_-=y,T=f(_),g=T.j(p);N(T)&&(T=b),v=v.add(T),w=j(w,g)}return new Q(v,w)}n.A=function(w){return it(this,w).h},n.and=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0;y<p;y++)_[y]=this.i(y)&w.i(y);return new a(_,this.h&w.h)},n.or=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0;y<p;y++)_[y]=this.i(y)|w.i(y);return new a(_,this.h|w.h)},n.xor=function(w){for(var p=Math.max(this.g.length,w.g.length),_=[],y=0;y<p;y++)_[y]=this.i(y)^w.i(y);return new a(_,this.h^w.h)};function kt(w){for(var p=w.g.length+1,_=[],y=0;y<p;y++)_[y]=w.i(y)<<1|w.i(y-1)>>>31;return new a(_,w.h)}function Y(w,p){var _=p>>5;p%=32;for(var y=w.g.length-_,v=[],T=0;T<y;T++)v[T]=0<p?w.i(T+_)>>>p|w.i(T+_+1)<<32-p:w.i(T+_);return new a(v,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,lo=Nc.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Ae=Nc.Integer=a}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},le={};var uo,ep,hn,co,hi,fr,ho,fo,po;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,u){return s==Array.prototype||s==Object.prototype||(s[l]=u.value),s};function e(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof dr=="object"&&dr];for(var l=0;l<s.length;++l){var u=s[l];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var i=e(this);function r(s,l){if(l)t:{var u=i;s=s.split(".");for(var d=0;d<s.length-1;d++){var I=s[d];if(!(I in u))break t;u=u[I]}s=s[s.length-1],d=u[s],l=l(d),l!=d&&l!=null&&t(u,s,{configurable:!0,writable:!0,value:l})}}function o(s,l){s instanceof String&&(s+="");var u=0,d=!1,I={next:function(){if(!d&&u<s.length){var A=u++;return{value:l(A,s[A]),done:!1}}return d=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(s){return s||function(){return o(this,function(l,u){return u})}});var a=a||{},c=this||self;function h(s){var l=typeof s;return l=l!="object"?l:s?Array.isArray(s)?"array":l:"null",l=="array"||l=="object"&&typeof s.length=="number"}function f(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function m(s,l,u){return s.call.apply(s.bind,arguments)}function E(s,l,u){if(!s)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,d),s.apply(l,I)}}return function(){return s.apply(l,arguments)}}function b(s,l,u){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:E,b.apply(null,arguments)}function V(s,l){var u=Array.prototype.slice.call(arguments,1);return function(){var d=u.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function N(s,l){function u(){}u.prototype=l.prototype,s.aa=l.prototype,s.prototype=new u,s.prototype.constructor=s,s.Qb=function(d,I,A){for(var D=Array(arguments.length-2),J=2;J<arguments.length;J++)D[J-2]=arguments[J];return l.prototype[I].apply(d,D)}}function M(s){let l=s.length;if(0<l){let u=Array(l);for(let d=0;d<l;d++)u[d]=s[d];return u}return[]}function S(s,l){for(let u=1;u<arguments.length;u++){let d=arguments[u];if(h(d)){let I=s.length||0,A=d.length||0;s.length=I+A;for(let D=0;D<A;D++)s[I+D]=d[D]}else s.push(d)}}class j{constructor(l,u){this.i=l,this.j=u,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function K(s){return/^[\s\xa0]*$/.test(s)}function Q(){var s=c.navigator;return s&&(s=s.userAgent)?s:""}function it(s){return it[" "](s),s}it[" "]=function(){};var kt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Y(s,l,u){for(let d in s)l.call(u,s[d],d,s)}function w(s,l){for(let u in s)l.call(void 0,s[u],u,s)}function p(s){let l={};for(let u in s)l[u]=s[u];return l}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(s,l){let u,d;for(let I=1;I<arguments.length;I++){d=arguments[I];for(u in d)s[u]=d[u];for(let A=0;A<_.length;A++)u=_[A],Object.prototype.hasOwnProperty.call(d,u)&&(s[u]=d[u])}}function v(s){var l=1;s=s.split(":");let u=[];for(;0<l&&s.length;)u.push(s.shift()),l--;return s.length&&u.push(s.join(":")),u}function T(s){c.setTimeout(()=>{throw s},0)}function g(){var s=vs;let l=null;return s.g&&(l=s.g,s.g=s.g.next,s.g||(s.h=null),l.next=null),l}class Zt{constructor(){this.h=this.g=null}add(l,u){let d=Fn.get();d.set(l,u),this.h?this.h.next=d:this.g=d,this.h=d}}var Fn=new j(()=>new If,s=>s.reset());class If{constructor(){this.next=this.g=this.h=null}set(l,u){this.h=l,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let On,Ln=!1,vs=new Zt,Nl=()=>{let s=c.Promise.resolve(void 0);On=()=>{s.then(Ef)}};var Ef=()=>{for(var s;s=g();){try{s.h.call(s.g)}catch(u){T(u)}var l=Fn;l.j(s),100>l.h&&(l.h++,s.next=l.g,l.g=s)}Ln=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vt(s,l){this.type=s,this.g=this.target=l,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var Tf=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let u=()=>{};c.addEventListener("test",u,l),c.removeEventListener("test",u,l)}catch{}return s}();function Bn(s,l){if(vt.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var u=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(kt){t:{try{it(l.nodeName);var I=!0;break t}catch{}I=!1}I||(l=null)}}else u=="mouseover"?l=s.fromElement:u=="mouseout"&&(l=s.toElement);this.relatedTarget=l,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:bf[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Bn.aa.h.call(this)}}N(Bn,vt);var bf={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var qn="closure_listenable_"+(1e6*Math.random()|0),Af=0;function Cf(s,l,u,d,I){this.listener=s,this.proxy=null,this.src=l,this.type=u,this.capture=!!d,this.ha=I,this.key=++Af,this.da=this.fa=!1}function Li(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Bi(s){this.src=s,this.g={},this.h=0}Bi.prototype.add=function(s,l,u,d,I){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var D=Is(s,l,d,I);return-1<D?(l=s[D],u||(l.fa=!1)):(l=new Cf(l,this.src,A,!!d,I),l.fa=u,s.push(l)),l};function ws(s,l){var u=l.type;if(u in s.g){var d=s.g[u],I=Array.prototype.indexOf.call(d,l,void 0),A;(A=0<=I)&&Array.prototype.splice.call(d,I,1),A&&(Li(l),s.g[u].length==0&&(delete s.g[u],s.h--))}}function Is(s,l,u,d){for(var I=0;I<s.length;++I){var A=s[I];if(!A.da&&A.listener==l&&A.capture==!!u&&A.ha==d)return I}return-1}var Es="closure_lm_"+(1e6*Math.random()|0),Ts={};function Ml(s,l,u,d,I){if(d&&d.once)return Ol(s,l,u,d,I);if(Array.isArray(l)){for(var A=0;A<l.length;A++)Ml(s,l[A],u,d,I);return null}return u=Vs(u),s&&s[qn]?s.K(l,u,f(d)?!!d.capture:!!d,I):Fl(s,l,u,!1,d,I)}function Fl(s,l,u,d,I,A){if(!l)throw Error("Invalid event type");var D=f(I)?!!I.capture:!!I,J=As(s);if(J||(s[Es]=J=new Bi(s)),u=J.add(l,u,d,D,A),u.proxy)return u;if(d=Vf(),u.proxy=d,d.src=s,d.listener=u,s.addEventListener)Tf||(I=D),I===void 0&&(I=!1),s.addEventListener(l.toString(),d,I);else if(s.attachEvent)s.attachEvent(Bl(l.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return u}function Vf(){function s(u){return l.call(s.src,s.listener,u)}let l=xf;return s}function Ol(s,l,u,d,I){if(Array.isArray(l)){for(var A=0;A<l.length;A++)Ol(s,l[A],u,d,I);return null}return u=Vs(u),s&&s[qn]?s.L(l,u,f(d)?!!d.capture:!!d,I):Fl(s,l,u,!0,d,I)}function Ll(s,l,u,d,I){if(Array.isArray(l))for(var A=0;A<l.length;A++)Ll(s,l[A],u,d,I);else d=f(d)?!!d.capture:!!d,u=Vs(u),s&&s[qn]?(s=s.i,l=String(l).toString(),l in s.g&&(A=s.g[l],u=Is(A,u,d,I),-1<u&&(Li(A[u]),Array.prototype.splice.call(A,u,1),A.length==0&&(delete s.g[l],s.h--)))):s&&(s=As(s))&&(l=s.g[l.toString()],s=-1,l&&(s=Is(l,u,d,I)),(u=-1<s?l[s]:null)&&bs(u))}function bs(s){if(typeof s!="number"&&s&&!s.da){var l=s.src;if(l&&l[qn])ws(l.i,s);else{var u=s.type,d=s.proxy;l.removeEventListener?l.removeEventListener(u,d,s.capture):l.detachEvent?l.detachEvent(Bl(u),d):l.addListener&&l.removeListener&&l.removeListener(d),(u=As(l))?(ws(u,s),u.h==0&&(u.src=null,l[Es]=null)):Li(s)}}}function Bl(s){return s in Ts?Ts[s]:Ts[s]="on"+s}function xf(s,l){if(s.da)s=!0;else{l=new Bn(l,this);var u=s.listener,d=s.ha||s.src;s.fa&&bs(s),s=u.call(d,l)}return s}function As(s){return s=s[Es],s instanceof Bi?s:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vs(s){return typeof s=="function"?s:(s[Cs]||(s[Cs]=function(l){return s.handleEvent(l)}),s[Cs])}function wt(){_e.call(this),this.i=new Bi(this),this.M=this,this.F=null}N(wt,_e),wt.prototype[qn]=!0,wt.prototype.removeEventListener=function(s,l,u,d){Ll(this,s,l,u,d)};function At(s,l){var u,d=s.F;if(d)for(u=[];d;d=d.F)u.push(d);if(s=s.M,d=l.type||l,typeof l=="string")l=new vt(l,s);else if(l instanceof vt)l.target=l.target||s;else{var I=l;l=new vt(d,s),y(l,I)}if(I=!0,u)for(var A=u.length-1;0<=A;A--){var D=l.g=u[A];I=qi(D,d,!0,l)&&I}if(D=l.g=s,I=qi(D,d,!0,l)&&I,I=qi(D,d,!1,l)&&I,u)for(A=0;A<u.length;A++)D=l.g=u[A],I=qi(D,d,!1,l)&&I}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var s=this.i,l;for(l in s.g){for(var u=s.g[l],d=0;d<u.length;d++)Li(u[d]);delete s.g[l],s.h--}}this.F=null},wt.prototype.K=function(s,l,u,d){return this.i.add(String(s),l,!1,u,d)},wt.prototype.L=function(s,l,u,d){return this.i.add(String(s),l,!0,u,d)};function qi(s,l,u,d){if(l=s.i.g[String(l)],!l)return!0;l=l.concat();for(var I=!0,A=0;A<l.length;++A){var D=l[A];if(D&&!D.da&&D.capture==u){var J=D.listener,gt=D.ha||D.src;D.fa&&ws(s.i,D),I=J.call(gt,d)!==!1&&I}}return I&&!d.defaultPrevented}function ql(s,l,u){if(typeof s=="function")u&&(s=b(s,u));else if(s&&typeof s.handleEvent=="function")s=b(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(s,l||0)}function zl(s){s.g=ql(()=>{s.g=null,s.i&&(s.i=!1,zl(s))},s.l);let l=s.h;s.h=null,s.m.apply(null,l)}class Df extends _e{constructor(l,u){super(),this.m=l,this.l=u,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:zl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(s){_e.call(this),this.h=s,this.g={}}N(zn,_e);var Ul=[];function Gl(s){Y(s.g,function(l,u){this.g.hasOwnProperty(u)&&bs(l)},s),s.g={}}zn.prototype.N=function(){zn.aa.N.call(this),Gl(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=c.JSON.stringify,Sf=c.JSON.parse,Rf=class{stringify(s){return c.JSON.stringify(s,void 0)}parse(s){return c.JSON.parse(s,void 0)}};function Ds(){}Ds.prototype.h=null;function $l(s){return s.h||(s.h=s.i())}function jl(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ss(){vt.call(this,"d")}N(Ss,vt);function Rs(){vt.call(this,"c")}N(Rs,vt);var ke={},Kl=null;function zi(){return Kl=Kl||new wt}ke.La="serverreachability";function Hl(s){vt.call(this,ke.La,s)}N(Hl,vt);function Gn(s){let l=zi();At(l,new Hl(l))}ke.STAT_EVENT="statevent";function Ql(s,l){vt.call(this,ke.STAT_EVENT,s),this.stat=l}N(Ql,vt);function Ct(s){let l=zi();At(l,new Ql(l,s))}ke.Ma="timingevent";function Wl(s,l){vt.call(this,ke.Ma,s),this.size=l}N(Wl,vt);function $n(s,l){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){s()},l)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function Pf(s,l,u,d,I,A){s.info(function(){if(s.g)if(A)for(var D="",J=A.split("&"),gt=0;gt<J.length;gt++){var H=J[gt].split("=");if(1<H.length){var It=H[0];H=H[1];var Et=It.split("_");D=2<=Et.length&&Et[1]=="type"?D+(It+"="+H+"&"):D+(It+"=redacted&")}}else D=null;else D=A;return"XMLHTTP REQ ("+d+") [attempt "+I+"]: "+l+`
`+u+`
`+D})}function kf(s,l,u,d,I,A,D){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+I+"]: "+l+`
`+u+`
`+A+" "+D})}function Ze(s,l,u,d){s.info(function(){return"XMLHTTP TEXT ("+l+"): "+Mf(s,u)+(d?" "+d:"")})}function Nf(s,l){s.info(function(){return"TIMEOUT: "+l})}jn.prototype.info=function(){};function Mf(s,l){if(!s.g)return l;if(!l)return null;try{var u=JSON.parse(l);if(u){for(s=0;s<u.length;s++)if(Array.isArray(u[s])){var d=u[s];if(!(2>d.length)){var I=d[1];if(Array.isArray(I)&&!(1>I.length)){var A=I[0];if(A!="noop"&&A!="stop"&&A!="close")for(var D=1;D<I.length;D++)I[D]=""}}}}return xs(u)}catch{return l}}var Ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ps;function Gi(){}N(Gi,Ds),Gi.prototype.g=function(){return new XMLHttpRequest},Gi.prototype.i=function(){return{}},Ps=new Gi;function ye(s,l,u,d){this.j=s,this.i=l,this.l=u,this.R=d||1,this.U=new zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xl}function Xl(){this.i=null,this.g="",this.h=!1}var Yl={},ks={};function Ns(s,l,u){s.L=1,s.v=Hi(te(l)),s.m=u,s.P=!0,Zl(s,null)}function Zl(s,l){s.F=Date.now(),$i(s),s.A=te(s.v);var u=s.A,d=s.R;Array.isArray(d)||(d=[String(d)]),fu(u.i,"t",d),s.C=0,u=s.j.J,s.h=new Xl,s.g=Ru(s.j,u?l:null,!s.m),0<s.O&&(s.M=new Df(b(s.Y,s,s.g),s.O)),l=s.U,u=s.g,d=s.ca;var I="readystatechange";Array.isArray(I)||(I&&(Ul[0]=I.toString()),I=Ul);for(var A=0;A<I.length;A++){var D=Ml(u,I[A],d||l.handleEvent,!1,l.h||l);if(!D)break;l.g[D.key]=D}l=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,l)):(s.u="GET",s.g.ea(s.A,s.u,null,l)),Gn(),Pf(s.i,s.u,s.A,s.l,s.R,s.m)}ye.prototype.ca=function(s){s=s.target;let l=this.M;l&&ee(s)==3?l.j():this.Y(s)},ye.prototype.Y=function(s){try{if(s==this.g)t:{let Et=ee(this.g);var l=this.g.Ba();let nn=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||wu(this.g)))){this.J||Et!=4||l==7||(l==8||0>=nn?Gn(3):Gn(2)),Ms(this);var u=this.g.Z();this.X=u;e:if(tu(this)){var d=wu(this.g);s="";var I=d.length,A=ee(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ne(this),Kn(this);var D="";break e}this.h.i=new c.TextDecoder}for(l=0;l<I;l++)this.h.h=!0,s+=this.h.i.decode(d[l],{stream:!(A&&l==I-1)});d.length=0,this.h.g+=s,this.C=0,D=this.h.g}else D=this.g.oa();if(this.o=u==200,kf(this.i,this.u,this.A,this.l,this.R,Et,u),this.o){if(this.T&&!this.K){e:{if(this.g){var J,gt=this.g;if((J=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(J)){var H=J;break e}}H=null}if(u=H)Ze(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fs(this,u);else{this.o=!1,this.s=3,Ct(12),Ne(this),Kn(this);break t}}if(this.P){u=!0;let Bt;for(;!this.J&&this.C<D.length;)if(Bt=Ff(this,D),Bt==ks){Et==4&&(this.s=4,Ct(14),u=!1),Ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Yl){this.s=4,Ct(15),Ze(this.i,this.l,D,"[Invalid Chunk]"),u=!1;break}else Ze(this.i,this.l,Bt,null),Fs(this,Bt);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||D.length!=0||this.h.h||(this.s=1,Ct(16),u=!1),this.o=this.o&&u,!u)Ze(this.i,this.l,D,"[Invalid Chunked Response]"),Ne(this),Kn(this);else if(0<D.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Us(It),It.M=!0,Ct(11))}}else Ze(this.i,this.l,D,null),Fs(this,D);Et==4&&Ne(this),this.o&&!this.J&&(Et==4?Vu(this.j,this):(this.o=!1,$i(this)))}else Zf(this.g),u==400&&0<D.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Ne(this),Kn(this)}}}catch{}finally{}};function tu(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function Ff(s,l){var u=s.C,d=l.indexOf(`
`,u);return d==-1?ks:(u=Number(l.substring(u,d)),isNaN(u)?Yl:(d+=1,d+u>l.length?ks:(l=l.slice(d,d+u),s.C=d+u,l)))}ye.prototype.cancel=function(){this.J=!0,Ne(this)};function $i(s){s.S=Date.now()+s.I,eu(s,s.I)}function eu(s,l){if(s.B!=null)throw Error("WatchDog timer not null");s.B=$n(b(s.ba,s),l)}function Ms(s){s.B&&(c.clearTimeout(s.B),s.B=null)}ye.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Nf(this.i,this.A),this.L!=2&&(Gn(),Ct(17)),Ne(this),this.s=2,Kn(this)):eu(this,this.S-s)};function Kn(s){s.j.G==0||s.J||Vu(s.j,s)}function Ne(s){Ms(s);var l=s.M;l&&typeof l.ma=="function"&&l.ma(),s.M=null,Gl(s.U),s.g&&(l=s.g,s.g=null,l.abort(),l.ma())}function Fs(s,l){try{var u=s.j;if(u.G!=0&&(u.g==s||Os(u.h,s))){if(!s.K&&Os(u.h,s)&&u.G==3){try{var d=u.Da.g.parse(l)}catch{d=null}if(Array.isArray(d)&&d.length==3){var I=d;if(I[0]==0){t:if(!u.u){if(u.g)if(u.g.F+3e3<s.F)Yi(u),Ji(u);else break t;zs(u),Ct(18)}}else u.za=I[1],0<u.za-u.T&&37500>I[2]&&u.F&&u.v==0&&!u.C&&(u.C=$n(b(u.Za,u),6e3));if(1>=ru(u.h)&&u.ca){try{u.ca()}catch{}u.ca=void 0}}else Fe(u,11)}else if((s.K||u.g==s)&&Yi(u),!K(l))for(I=u.Da.g.parse(l),l=0;l<I.length;l++){let H=I[l];if(u.T=H[0],H=H[1],u.G==2)if(H[0]=="c"){u.K=H[1],u.ia=H[2];let It=H[3];It!=null&&(u.la=It,u.j.info("VER="+u.la));let Et=H[4];Et!=null&&(u.Aa=Et,u.j.info("SVER="+u.Aa));let nn=H[5];nn!=null&&typeof nn=="number"&&0<nn&&(d=1.5*nn,u.L=d,u.j.info("backChannelRequestTimeoutMs_="+d)),d=u;let Bt=s.g;if(Bt){let tr=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tr){var A=d.h;A.g||tr.indexOf("spdy")==-1&&tr.indexOf("quic")==-1&&tr.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Ls(A,A.h),A.h=null))}if(d.D){let Gs=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(d.ya=Gs,Z(d.I,d.D,Gs))}}u.G=3,u.l&&u.l.ua(),u.ba&&(u.R=Date.now()-s.F,u.j.info("Handshake RTT: "+u.R+"ms")),d=u;var D=s;if(d.qa=Su(d,d.J?d.ia:null,d.W),D.K){su(d.h,D);var J=D,gt=d.L;gt&&(J.I=gt),J.B&&(Ms(J),$i(J)),d.g=D}else Au(d);0<u.i.length&&Xi(u)}else H[0]!="stop"&&H[0]!="close"||Fe(u,7);else u.G==3&&(H[0]=="stop"||H[0]=="close"?H[0]=="stop"?Fe(u,7):qs(u):H[0]!="noop"&&u.l&&u.l.ta(H),u.v=0)}}Gn(4)}catch{}}var Of=class{constructor(s,l){this.g=s,this.map=l}};function nu(s){this.l=s||10,c.PerformanceNavigationTiming?(s=c.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iu(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function ru(s){return s.h?1:s.g?s.g.size:0}function Os(s,l){return s.h?s.h==l:s.g?s.g.has(l):!1}function Ls(s,l){s.g?s.g.add(l):s.h=l}function su(s,l){s.h&&s.h==l?s.h=null:s.g&&s.g.has(l)&&s.g.delete(l)}nu.prototype.cancel=function(){if(this.i=ou(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function ou(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let l=s.i;for(let u of s.g.values())l=l.concat(u.D);return l}return M(s.i)}function Lf(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var l=[],u=s.length,d=0;d<u;d++)l.push(s[d]);return l}l=[],u=0;for(d in s)l[u++]=s[d];return l}function Bf(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var l=[];s=s.length;for(var u=0;u<s;u++)l.push(u);return l}l=[],u=0;for(let d in s)l[u++]=d;return l}}}function au(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,l,void 0);else for(var u=Bf(s),d=Lf(s),I=d.length,A=0;A<I;A++)l.call(void 0,d[A],u&&u[A],s)}var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qf(s,l){if(s){s=s.split("&");for(var u=0;u<s.length;u++){var d=s[u].indexOf("="),I=null;if(0<=d){var A=s[u].substring(0,d);I=s[u].substring(d+1)}else A=s[u];l(A,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Me(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Me){this.h=s.h,ji(this,s.j),this.o=s.o,this.g=s.g,Ki(this,s.s),this.l=s.l;var l=s.i,u=new Wn;u.i=l.i,l.g&&(u.g=new Map(l.g),u.h=l.h),uu(this,u),this.m=s.m}else s&&(l=String(s).match(lu))?(this.h=!1,ji(this,l[1]||"",!0),this.o=Hn(l[2]||""),this.g=Hn(l[3]||"",!0),Ki(this,l[4]),this.l=Hn(l[5]||"",!0),uu(this,l[6]||"",!0),this.m=Hn(l[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}Me.prototype.toString=function(){var s=[],l=this.j;l&&s.push(Qn(l,cu,!0),":");var u=this.g;return(u||l=="file")&&(s.push("//"),(l=this.o)&&s.push(Qn(l,cu,!0),"@"),s.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.s,u!=null&&s.push(":",String(u))),(u=this.l)&&(this.g&&u.charAt(0)!="/"&&s.push("/"),s.push(Qn(u,u.charAt(0)=="/"?Gf:Uf,!0))),(u=this.i.toString())&&s.push("?",u),(u=this.m)&&s.push("#",Qn(u,jf)),s.join("")};function te(s){return new Me(s)}function ji(s,l,u){s.j=u?Hn(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function Ki(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.s=l}else s.s=null}function uu(s,l,u){l instanceof Wn?(s.i=l,Kf(s.i,s.h)):(u||(l=Qn(l,$f)),s.i=new Wn(l,s.h))}function Z(s,l,u){s.i.set(l,u)}function Hi(s){return Z(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Hn(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Qn(s,l,u){return typeof s=="string"?(s=encodeURI(s).replace(l,zf),u&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function zf(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var cu=/[#\/\?@]/g,Uf=/[#\?:]/g,Gf=/[#\?]/g,$f=/[#\?@]/g,jf=/#/g;function Wn(s,l){this.h=this.g=null,this.i=s||null,this.j=!!l}function ve(s){s.g||(s.g=new Map,s.h=0,s.i&&qf(s.i,function(l,u){s.add(decodeURIComponent(l.replace(/\+/g," ")),u)}))}n=Wn.prototype,n.add=function(s,l){ve(this),this.i=null,s=tn(this,s);var u=this.g.get(s);return u||this.g.set(s,u=[]),u.push(l),this.h+=1,this};function hu(s,l){ve(s),l=tn(s,l),s.g.has(l)&&(s.i=null,s.h-=s.g.get(l).length,s.g.delete(l))}function du(s,l){return ve(s),l=tn(s,l),s.g.has(l)}n.forEach=function(s,l){ve(this),this.g.forEach(function(u,d){u.forEach(function(I){s.call(l,I,d,this)},this)},this)},n.na=function(){ve(this);let s=Array.from(this.g.values()),l=Array.from(this.g.keys()),u=[];for(let d=0;d<l.length;d++){let I=s[d];for(let A=0;A<I.length;A++)u.push(l[d])}return u},n.V=function(s){ve(this);let l=[];if(typeof s=="string")du(this,s)&&(l=l.concat(this.g.get(tn(this,s))));else{s=Array.from(this.g.values());for(let u=0;u<s.length;u++)l=l.concat(s[u])}return l},n.set=function(s,l){return ve(this),this.i=null,s=tn(this,s),du(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[l]),this.h+=1,this},n.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function fu(s,l,u){hu(s,l),0<u.length&&(s.i=null,s.g.set(tn(s,l),M(u)),s.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],l=Array.from(this.g.keys());for(var u=0;u<l.length;u++){var d=l[u];let A=encodeURIComponent(String(d)),D=this.V(d);for(d=0;d<D.length;d++){var I=A;D[d]!==""&&(I+="="+encodeURIComponent(String(D[d]))),s.push(I)}}return this.i=s.join("&")};function tn(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function Kf(s,l){l&&!s.j&&(ve(s),s.i=null,s.g.forEach(function(u,d){var I=d.toLowerCase();d!=I&&(hu(this,d),fu(this,I,u))},s)),s.j=l}function Hf(s,l){let u=new jn;if(c.Image){let d=new Image;d.onload=V(we,u,"TestLoadImage: loaded",!0,l,d),d.onerror=V(we,u,"TestLoadImage: error",!1,l,d),d.onabort=V(we,u,"TestLoadImage: abort",!1,l,d),d.ontimeout=V(we,u,"TestLoadImage: timeout",!1,l,d),c.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else l(!1)}function Qf(s,l){let u=new jn,d=new AbortController,I=setTimeout(()=>{d.abort(),we(u,"TestPingServer: timeout",!1,l)},1e4);fetch(s,{signal:d.signal}).then(A=>{clearTimeout(I),A.ok?we(u,"TestPingServer: ok",!0,l):we(u,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(I),we(u,"TestPingServer: error",!1,l)})}function we(s,l,u,d,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),d(u)}catch{}}function Wf(){this.g=new Rf}function Jf(s,l,u){let d=u||"";try{au(s,function(I,A){let D=I;f(I)&&(D=xs(I)),l.push(d+A+"="+encodeURIComponent(D))})}catch(I){throw l.push(d+"type="+encodeURIComponent("_badmap")),I}}function Jn(s){this.l=s.Ub||null,this.j=s.eb||!1}N(Jn,Ds),Jn.prototype.g=function(){return new Qi(this.l,this.j)},Jn.prototype.i=function(s){return function(){return s}}({});function Qi(s,l){wt.call(this),this.D=s,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Qi,wt),n=Qi.prototype,n.open=function(s,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=l,this.readyState=1,Yn(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(l.body=s),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xn(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pu(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function pu(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var l=s.value?s.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!s.done}))&&(this.response=this.responseText+=l)}s.done?Xn(this):Yn(this),this.readyState==3&&pu(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,Xn(this))},n.Qa=function(s){this.g&&(this.response=s,Xn(this))},n.ga=function(){this.g&&Xn(this)};function Xn(s){s.readyState=4,s.l=null,s.j=null,s.v=null,Yn(s)}n.setRequestHeader=function(s,l){this.u.append(s,l)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],l=this.h.entries();for(var u=l.next();!u.done;)u=u.value,s.push(u[0]+": "+u[1]),u=l.next();return s.join(`\r
`)};function Yn(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function mu(s){let l="";return Y(s,function(u,d){l+=d,l+=":",l+=u,l+=`\r
`}),l}function Bs(s,l,u){t:{for(d in u){var d=!1;break t}d=!0}d||(u=mu(u),typeof s=="string"?u!=null&&encodeURIComponent(String(u)):Z(s,l,u))}function rt(s){wt.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(rt,wt);var Xf=/^https?$/i,Yf=["POST","PUT"];n=rt.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,l,u,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);l=l?l.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ps.g(),this.v=this.o?$l(this.o):$l(Ps),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(l,String(s),!0),this.B=!1}catch(A){gu(this,A);return}if(s=u||"",u=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var I in d)u.set(I,d[I]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let A of d.keys())u.set(A,d.get(A));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(u.keys()).find(A=>A.toLowerCase()=="content-type"),I=c.FormData&&s instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yf,l,void 0))||d||I||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,D]of u)this.g.setRequestHeader(A,D);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vu(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){gu(this,A)}};function gu(s,l){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=l,s.m=5,_u(s),Wi(s)}function _u(s){s.A||(s.A=!0,At(s,"complete"),At(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,At(this,"complete"),At(this,"abort"),Wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},n.bb=function(){yu(this)};function yu(s){if(s.h&&typeof a<"u"&&(!s.v[1]||ee(s)!=4||s.Z()!=2)){if(s.u&&ee(s)==4)ql(s.Ea,0,s);else if(At(s,"readystatechange"),ee(s)==4){s.h=!1;try{let D=s.Z();t:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break t;default:l=!1}var u;if(!(u=l)){var d;if(d=D===0){var I=String(s.D).match(lu)[1]||null;!I&&c.self&&c.self.location&&(I=c.self.location.protocol.slice(0,-1)),d=!Xf.test(I?I.toLowerCase():"")}u=d}if(u)At(s,"complete"),At(s,"success");else{s.m=6;try{var A=2<ee(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",_u(s)}}finally{Wi(s)}}}}function Wi(s,l){if(s.g){vu(s);let u=s.g,d=s.v[0]?()=>{}:null;s.g=null,s.v=null,l||At(s,"ready");try{u.onreadystatechange=d}catch{}}}function vu(s){s.I&&(c.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function ee(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<ee(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var l=this.g.responseText;return s&&l.indexOf(s)==0&&(l=l.substring(s.length)),Sf(l)}};function wu(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Zf(s){let l={};s=(s.g&&2<=ee(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<s.length;d++){if(K(s[d]))continue;var u=v(s[d]);let I=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let A=l[I]||[];l[I]=A,A.push(u)}w(l,function(d){return d.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(s,l,u){return u&&u.internalChannelParams&&u.internalChannelParams[s]||l}function Iu(s){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,s),this.cb=Zn("retryDelaySeedMs",1e4,s),this.Wa=Zn("forwardChannelMaxRetries",2,s),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new nu(s&&s.concurrentRequestLimit),this.Da=new Wf,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Iu.prototype,n.la=8,n.G=1,n.connect=function(s,l,u,d){Ct(0),this.W=s,this.H=l||{},u&&d!==void 0&&(this.H.OSID=u,this.H.OAID=d),this.F=this.X,this.I=Su(this,null,this.W),Xi(this)};function qs(s){if(Eu(s),s.G==3){var l=s.U++,u=te(s.I);if(Z(u,"SID",s.K),Z(u,"RID",l),Z(u,"TYPE","terminate"),ti(s,u),l=new ye(s,s.j,l),l.L=2,l.v=Hi(te(u)),u=!1,c.navigator&&c.navigator.sendBeacon)try{u=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!u&&c.Image&&(new Image().src=l.v,u=!0),u||(l.g=Ru(l.j,null),l.g.ea(l.v)),l.F=Date.now(),$i(l)}Du(s)}function Ji(s){s.g&&(Us(s),s.g.cancel(),s.g=null)}function Eu(s){Ji(s),s.u&&(c.clearTimeout(s.u),s.u=null),Yi(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&c.clearTimeout(s.s),s.s=null)}function Xi(s){if(!iu(s.h)&&!s.s){s.s=!0;var l=s.Ga;On||Nl(),Ln||(On(),Ln=!0),vs.add(l,s),s.B=0}}function tp(s,l){return ru(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=l.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=$n(b(s.Ga,s,l),xu(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let I=new ye(this,this.j,s),A=this.o;if(this.S&&(A?(A=p(A),y(A,this.S)):A=this.S),this.m!==null||this.O||(I.H=A,A=null),this.P)t:{for(var l=0,u=0;u<this.i.length;u++){e:{var d=this.i[u];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break e}d=void 0}if(d===void 0)break;if(l+=d,4096<l){l=u;break t}if(l===4096||u===this.i.length-1){l=u+1;break t}}l=1e3}else l=1e3;l=bu(this,I,l),u=te(this.I),Z(u,"RID",s),Z(u,"CVER",22),this.D&&Z(u,"X-HTTP-Session-Id",this.D),ti(this,u),A&&(this.O?l="headers="+encodeURIComponent(String(mu(A)))+"&"+l:this.m&&Bs(u,this.m,A)),Ls(this.h,I),this.Ua&&Z(u,"TYPE","init"),this.P?(Z(u,"$req",l),Z(u,"SID","null"),I.T=!0,Ns(I,u,null)):Ns(I,u,l),this.G=2}}else this.G==3&&(s?Tu(this,s):this.i.length==0||iu(this.h)||Tu(this))};function Tu(s,l){var u;l?u=l.l:u=s.U++;let d=te(s.I);Z(d,"SID",s.K),Z(d,"RID",u),Z(d,"AID",s.T),ti(s,d),s.m&&s.o&&Bs(d,s.m,s.o),u=new ye(s,s.j,u,s.B+1),s.m===null&&(u.H=s.o),l&&(s.i=l.D.concat(s.i)),l=bu(s,u,1e3),u.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Ls(s.h,u),Ns(u,d,l)}function ti(s,l){s.H&&Y(s.H,function(u,d){Z(l,d,u)}),s.l&&au({},function(u,d){Z(l,d,u)})}function bu(s,l,u){u=Math.min(s.i.length,u);var d=s.l?b(s.l.Na,s.l,s):null;t:{var I=s.i;let A=-1;for(;;){let D=["count="+u];A==-1?0<u?(A=I[0].g,D.push("ofs="+A)):A=0:D.push("ofs="+A);let J=!0;for(let gt=0;gt<u;gt++){let H=I[gt].g,It=I[gt].map;if(H-=A,0>H)A=Math.max(0,I[gt].g-100),J=!1;else try{Jf(It,D,"req"+H+"_")}catch{d&&d(It)}}if(J){d=D.join("&");break t}}}return s=s.i.splice(0,u),l.D=s,d}function Au(s){if(!s.g&&!s.u){s.Y=1;var l=s.Fa;On||Nl(),Ln||(On(),Ln=!0),vs.add(l,s),s.v=0}}function zs(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=$n(b(s.Fa,s),xu(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,Cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=$n(b(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Ji(this),Cu(this))};function Us(s){s.A!=null&&(c.clearTimeout(s.A),s.A=null)}function Cu(s){s.g=new ye(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var l=te(s.qa);Z(l,"RID","rpc"),Z(l,"SID",s.K),Z(l,"AID",s.T),Z(l,"CI",s.F?"0":"1"),!s.F&&s.ja&&Z(l,"TO",s.ja),Z(l,"TYPE","xmlhttp"),ti(s,l),s.m&&s.o&&Bs(l,s.m,s.o),s.L&&(s.g.I=s.L);var u=s.g;s=s.ia,u.L=1,u.v=Hi(te(l)),u.m=null,u.P=!0,Zl(u,s)}n.Za=function(){this.C!=null&&(this.C=null,Ji(this),zs(this),Ct(19))};function Yi(s){s.C!=null&&(c.clearTimeout(s.C),s.C=null)}function Vu(s,l){var u=null;if(s.g==l){Yi(s),Us(s),s.g=null;var d=2}else if(Os(s.h,l))u=l.D,su(s.h,l),d=1;else return;if(s.G!=0){if(l.o)if(d==1){u=l.m?l.m.length:0,l=Date.now()-l.F;var I=s.B;d=zi(),At(d,new Wl(d,u)),Xi(s)}else Au(s);else if(I=l.s,I==3||I==0&&0<l.X||!(d==1&&tp(s,l)||d==2&&zs(s)))switch(u&&0<u.length&&(l=s.h,l.i=l.i.concat(u)),I){case 1:Fe(s,5);break;case 4:Fe(s,10);break;case 3:Fe(s,6);break;default:Fe(s,2)}}}function xu(s,l){let u=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(u*=2),u*l}function Fe(s,l){if(s.j.info("Error code "+l),l==2){var u=b(s.fb,s),d=s.Xa;let I=!d;d=new Me(d||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ji(d,"https"),Hi(d),I?Hf(d.toString(),u):Qf(d.toString(),u)}else Ct(2);s.G=0,s.l&&s.l.sa(l),Du(s),Eu(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Du(s){if(s.G=0,s.ka=[],s.l){let l=ou(s.h);(l.length!=0||s.i.length!=0)&&(S(s.ka,l),S(s.ka,s.i),s.h.i.length=0,M(s.i),s.i.length=0),s.l.ra()}}function Su(s,l,u){var d=u instanceof Me?te(u):new Me(u);if(d.g!="")l&&(d.g=l+"."+d.g),Ki(d,d.s);else{var I=c.location;d=I.protocol,l=l?l+"."+I.hostname:I.hostname,I=+I.port;var A=new Me(null);d&&ji(A,d),l&&(A.g=l),I&&Ki(A,I),u&&(A.l=u),d=A}return u=s.D,l=s.ya,u&&l&&Z(d,u,l),Z(d,"VER",s.la),ti(s,d),d}function Ru(s,l,u){if(l&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=s.Ca&&!s.pa?new rt(new Jn({eb:u})):new rt(s.pa),l.Ha(s.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pu(){}n=Pu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zi(){}Zi.prototype.g=function(s,l){return new St(s,l)};function St(s,l){wt.call(this),this.g=new Iu(l),this.l=s,this.h=l&&l.messageUrlParams||null,s=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(s?s["X-WebChannel-Content-Type"]=l.messageContentType:s={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(s?s["X-WebChannel-Client-Profile"]=l.va:s={"X-WebChannel-Client-Profile":l.va}),this.g.S=s,(s=l&&l.Sb)&&!K(s)&&(this.g.m=s),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!K(l)&&(this.g.D=l,s=this.h,s!==null&&l in s&&(s=this.h,l in s&&delete s[l])),this.j=new en(this)}N(St,wt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){qs(this.g)},St.prototype.o=function(s){var l=this.g;if(typeof s=="string"){var u={};u.__data__=s,s=u}else this.u&&(u={},u.__data__=xs(s),s=u);l.i.push(new Of(l.Ya++,s)),l.G==3&&Xi(l)},St.prototype.N=function(){this.g.l=null,delete this.j,qs(this.g),delete this.g,St.aa.N.call(this)};function ku(s){Ss.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var l=s.__sm__;if(l){t:{for(let u in l){s=u;break t}s=void 0}(this.i=s)&&(s=this.i,l=l!==null&&s in l?l[s]:void 0),this.data=l}else this.data=s}N(ku,Ss);function Nu(){Rs.call(this),this.status=1}N(Nu,Rs);function en(s){this.g=s}N(en,Pu),en.prototype.ua=function(){At(this.g,"a")},en.prototype.ta=function(s){At(this.g,new ku(s))},en.prototype.sa=function(s){At(this.g,new Nu)},en.prototype.ra=function(){At(this.g,"b")},Zi.prototype.createWebChannel=Zi.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,po=le.createWebChannelTransport=function(){return new Zi},fo=le.getStatEventTarget=function(){return zi()},ho=le.Event=ke,fr=le.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,hi=le.ErrorCode=Ui,Jl.COMPLETE="complete",co=le.EventType=Jl,jl.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",wt.prototype.listen=wt.prototype.K,hn=le.WebChannel=jl,ep=le.FetchXmlHttpFactory=Jn,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,uo=le.XhrIo=rt}).apply(typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{});var Mc="@firebase/firestore";var pt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var Sn="11.0.2";var Ue=new lc("@firebase/firestore");function dn(){return Ue.logLevel}function k(n,...t){if(Ue.logLevel<=Ht.DEBUG){let e=t.map(Za);Ue.debug(`Firestore (${Sn}): ${n}`,...e)}}function ce(n,...t){if(Ue.logLevel<=Ht.ERROR){let e=t.map(Za);Ue.error(`Firestore (${Sn}): ${n}`,...e)}}function vn(n,...t){if(Ue.logLevel<=Ht.WARN){let e=t.map(Za);Ue.warn(`Firestore (${Sn}): ${n}`,...e)}}function Za(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function O(n="Unexpected state"){let t=`FIRESTORE (${Sn}) INTERNAL ASSERTION FAILED: `+n;throw ce(t),new Error(t)}function W(n,t){n||O()}function L(n,t){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends oc{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ut=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var wr=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},vo=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(pt.UNAUTHENTICATED))}shutdown(){}},wo=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Io=class{constructor(t){this.t=t,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){W(this.o===void 0);let i=this.i,r=h=>this.i!==i?(i=this.i,e(h)):Promise.resolve(),o=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ut,t.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let h=o;t.enqueueRetryable(()=>P(this,null,function*(){yield h.promise,yield r(this.currentUser)}))},c=h=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?c(h):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ut)}},0),a()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(W(typeof i.accessToken=="string"),new wr(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return W(t===null||typeof t=="string"),new pt(t)}},Eo=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},To=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Eo(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bo=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ao=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){W(this.o===void 0);let i=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(W(typeof e.token=="string"),this.R=e.token,new bo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function np(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Ir=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=np(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}};function U(n,t){return n<t?-1:n>t?1:0}function wn(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var yt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new R(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new R(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new R(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new R(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?U(this.nanoseconds,t.nanoseconds):U(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class n{static fromTimestamp(t){return new n(t)}static min(){return new n(new yt(0,0))}static max(){return new n(new yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Er=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&O(),i===void 0?i=t.length-e:i>t.length-e&&O(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=t.get(r),a=e.get(r);if(o<a)return-1;if(o>a)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},nt=class n extends Er{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new R(C.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},ip=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class n extends Er{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return ip.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new R(C.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},a=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new R(C.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let h=t[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new R(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=h,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new R(C.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var F=class n{constructor(t){this.path=t}static fromPath(t){return new n(nt.fromString(t))}static fromName(t){return new n(nt.fromString(t).popFirst(5))}static empty(){return new n(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new nt(t.slice()))}};var Co=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};Co.UNKNOWN_ID=-1;function rp(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=B.fromTimestamp(i===1e9?new yt(e+1,0):new yt(e,i));return new Ge(r,F.empty(),t)}function sp(n){return new Ge(n.readTime,n.key,-1)}var Ge=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(B.min(),F.empty(),-1)}static max(){return new n(B.max(),F.empty(),-1)}};function op(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=F.comparator(n.documentKey,t.documentKey),e!==0?e:U(n.largestBatchId,t.largestBatchId))}var ap="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vo=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Rn(n){return P(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==ap)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,a=!1;t.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&e()},h=>i(h))}),a=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,a=new Array(o),c=0;for(let h=0;h<o;h++){let f=h;e(t[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};function lp(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Pn(n){return n.name==="IndexedDbTransactionError"}var tl=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function es(n){return n==null}function _i(n){return n===0&&1/n==-1/0}function up(n){return typeof n=="number"&&Number.isInteger(n)&&!_i(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function cp(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Fc(t)),t=hp(n.get(e),t);return Fc(t)}function hp(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":e+="";break;case"":e+="";break;default:e+=o}}return e}function Fc(n){return n+""}var dp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q_=[...dp,"documentOverlays"],fp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pp=fp,mp=[...pp,"indexConfiguration","indexState","indexEntries"];var W_=[...mp,"globals"];function Oc(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function We(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function gh(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var ot=class n{constructor(t,e){this.comparator=t,this.root=e||Wt.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gn(this.root,t,this.comparator,!1)}getReverseIterator(){return new gn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gn(this.root,t,this.comparator,!0)}},gn=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Wt=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();let t=this.left.check();if(t!==this.right.check())throw O();return t+(this.isRed()?0:1)}};Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(t,e,i,r,o){return this}insert(t,e,i){return new Wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(t){this.comparator=t,this.data=new ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Tr(this.data.getIterator())}getIteratorFrom(t){return new Tr(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Tr=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qt=class n{constructor(t){this.fields=t,t.sort(Pt.comparator)}static empty(){return new n([])}unionWith(t){let e=new mt(Pt.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return wn(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var br=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new br("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return U(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var gp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function he(n){if(W(!!n),typeof n=="string"){let t=0,e=gp.exec(n);if(W(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:et(n.seconds),nanos:et(n.nanos)}}function et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function de(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}function el(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function ns(n){let t=n.mapValue.fields.__previous_value__;return el(t)?ns(t):t}function yi(n){let t=he(n.mapValue.fields.__local_write_time__.timestampValue);return new yt(t.seconds,t.nanos)}var xo=class{constructor(t,e,i,r,o,a,c,h,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f}},Ar=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var pr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ve(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?el(n)?4:yh(n)?9007199254740991:_h(n)?10:11:O()}function Yt(n,t){if(n===t)return!0;let e=Ve(n);if(e!==Ve(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return yi(n).isEqual(yi(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=he(r.timestampValue),c=he(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return de(r.bytesValue).isEqual(de(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return et(r.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return et(r.integerValue)===et(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=et(r.doubleValue),c=et(o.doubleValue);return a===c?_i(a)===_i(c):isNaN(a)&&isNaN(c)}return!1}(n,t);case 9:return wn(n.arrayValue.values||[],t.arrayValue.values||[],Yt);case 10:case 11:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Oc(a)!==Oc(c))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!Yt(a[h],c[h])))return!1;return!0}(n,t);default:return O()}}function vi(n,t){return(n.values||[]).find(e=>Yt(e,t))!==void 0}function In(n,t){if(n===t)return 0;let e=Ve(n),i=Ve(t);if(e!==i)return U(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return U(n.booleanValue,t.booleanValue);case 2:return function(o,a){let c=et(o.integerValue||o.doubleValue),h=et(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return Lc(n.timestampValue,t.timestampValue);case 4:return Lc(yi(n),yi(t));case 5:return U(n.stringValue,t.stringValue);case 6:return function(o,a){let c=de(o),h=de(a);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(o,a){let c=o.split("/"),h=a.split("/");for(let f=0;f<c.length&&f<h.length;f++){let m=U(c[f],h[f]);if(m!==0)return m}return U(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,a){let c=U(et(o.latitude),et(a.latitude));return c!==0?c:U(et(o.longitude),et(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Bc(n.arrayValue,t.arrayValue);case 10:return function(o,a){var c,h,f,m;let E=o.fields||{},b=a.fields||{},V=(c=E.value)===null||c===void 0?void 0:c.arrayValue,N=(h=b.value)===null||h===void 0?void 0:h.arrayValue,M=U(((f=V?.values)===null||f===void 0?void 0:f.length)||0,((m=N?.values)===null||m===void 0?void 0:m.length)||0);return M!==0?M:Bc(V,N)}(n.mapValue,t.mapValue);case 11:return function(o,a){if(o===pr.mapValue&&a===pr.mapValue)return 0;if(o===pr.mapValue)return 1;if(a===pr.mapValue)return-1;let c=o.fields||{},h=Object.keys(c),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let E=0;E<h.length&&E<m.length;++E){let b=U(h[E],m[E]);if(b!==0)return b;let V=In(c[h[E]],f[m[E]]);if(V!==0)return V}return U(h.length,m.length)}(n.mapValue,t.mapValue);default:throw O()}}function Lc(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return U(n,t);let e=he(n),i=he(t),r=U(e.seconds,i.seconds);return r!==0?r:U(e.nanos,i.nanos)}function Bc(n,t){let e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){let o=In(e[r],i[r]);if(o)return o}return U(e.length,i.length)}function En(n){return Do(n)}function Do(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=he(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return de(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return F.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=Do(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${Do(e.fields[a])}`;return r+"}"}(n.mapValue):O()}function _r(n){switch(Ve(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=ns(n);return t?16+_r(t):16;case 5:return 2*n.stringValue.length;case 6:return de(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+_r(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return We(i.fields,(o,a)=>{r+=o.length+_r(a)}),r}(n.mapValue);default:throw O()}}function qc(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function So(n){return!!n&&"integerValue"in n}function nl(n){return!!n&&"arrayValue"in n}function zc(n){return!!n&&"nullValue"in n}function Uc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yr(n){return!!n&&"mapValue"in n}function _h(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function fi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return We(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=fi(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=fi(n.arrayValue.values[e]);return t}return Object.assign({},n)}function yh(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var zt=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!yr(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fi(e)}setAll(t){let e=Pt.emptyPath(),i={},r=[];t.forEach((a,c)=>{if(!e.isImmediateParentOf(c)){let h=this.getFieldsMap(e);this.applyChanges(h,i,r),i={},r=[],e=c.popLast()}a?i[c.lastSegment()]=fi(a):r.push(c.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());yr(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Yt(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];yr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){We(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(fi(this.value))}};function vh(n){let t=[];return We(n.fields,(e,i)=>{let r=new Pt([e]);if(yr(i)){let o=vh(i.mapValue).fields;if(o.length===0)t.push(r);else for(let a of o)t.push(r.child(a))}else t.push(r)}),new Qt(t)}var Gt=class n{constructor(t,e,i,r,o,a,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new n(t,0,B.min(),B.min(),B.min(),zt.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,B.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,B.min(),B.min(),zt.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,B.min(),B.min(),zt.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Tn=class{constructor(t,e){this.position=t,this.inclusive=e}};function Gc(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],a=n.position[r];if(o.field.isKeyField()?i=F.comparator(F.fromName(a.referenceValue),e.key):i=In(a,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function $c(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Yt(n.position[e],t.position[e]))return!1;return!0}var $e=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function _p(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Cr=class{},ct=class n extends Cr{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Po(t,e,i):e==="array-contains"?new Mo(t,i):e==="in"?new Fo(t,i):e==="not-in"?new Oo(t,i):e==="array-contains-any"?new Lo(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new ko(t,i):new No(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(In(e,this.value)):e!==null&&Ve(this.value)===Ve(e)&&this.matchesComparison(In(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends Cr{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return wh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wh(n){return n.op==="and"}function Ih(n){return yp(n)&&wh(n)}function yp(n){for(let t of n.filters)if(t instanceof $t)return!1;return!0}function Ro(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+En(n.value);if(Ih(n))return n.filters.map(t=>Ro(t)).join(",");{let t=n.filters.map(e=>Ro(e)).join(",");return`${n.op}(${t})`}}function Eh(n,t){return n instanceof ct?function(i,r){return r instanceof ct&&i.op===r.op&&i.field.isEqual(r.field)&&Yt(i.value,r.value)}(n,t):n instanceof $t?function(i,r){return r instanceof $t&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&Eh(a,r.filters[c]),!0):!1}(n,t):void O()}function Th(n){return n instanceof ct?function(e){return`${e.field.canonicalString()} ${e.op} ${En(e.value)}`}(n):n instanceof $t?function(e){return e.op.toString()+" {"+e.getFilters().map(Th).join(" ,")+"}"}(n):"Filter"}var Po=class extends ct{constructor(t,e,i){super(t,e,i),this.key=F.fromName(i.referenceValue)}matches(t){let e=F.comparator(t.key,this.key);return this.matchesComparison(e)}},ko=class extends ct{constructor(t,e){super(t,"in",e),this.keys=bh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},No=class extends ct{constructor(t,e){super(t,"not-in",e),this.keys=bh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function bh(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>F.fromName(i.referenceValue))}var Mo=class extends ct{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return nl(e)&&vi(e.arrayValue,this.value)}},Fo=class extends ct{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&vi(this.value.arrayValue,e)}},Oo=class extends ct{constructor(t,e){super(t,"not-in",e)}matches(t){if(vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!vi(this.value.arrayValue,e)}},Lo=class extends ct{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!nl(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>vi(this.value.arrayValue,i))}};var Bo=class{constructor(t,e=null,i=[],r=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function jc(n,t=null,e=[],i=[],r=null,o=null,a=null){return new Bo(n,t,e,i,r,o,a)}function il(n){let t=L(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Ro(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),es(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>En(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>En(i)).join(",")),t.ue=e}return t.ue}function rl(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!_p(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Eh(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!$c(n.startAt,t.startAt)&&$c(n.endAt,t.endAt)}function qo(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var xe=class{constructor(t,e=null,i=[],r=[],o=null,a="F",c=null,h=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function vp(n,t,e,i,r,o,a,c){return new xe(n,t,e,i,r,o,a,c)}function sl(n){return new xe(n)}function Kc(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ah(n){return n.collectionGroup!==null}function pi(n){let t=L(n);if(t.ce===null){t.ce=[];let e=new Set;for(let o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new mt(Pt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new $e(o,i))}),e.has(Pt.keyField().canonicalString())||t.ce.push(new $e(Pt.keyField(),i))}return t.ce}function Jt(n){let t=L(n);return t.le||(t.le=wp(t,pi(n))),t.le}function wp(n,t){if(n.limitType==="F")return jc(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new $e(r.field,o)});let e=n.endAt?new Tn(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Tn(n.startAt.position,n.startAt.inclusive):null;return jc(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function zo(n,t){let e=n.filters.concat([t]);return new xe(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Uo(n,t,e){return new xe(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function is(n,t){return rl(Jt(n),Jt(t))&&n.limitType===t.limitType}function Ch(n){return`${il(Jt(n))}|lt:${n.limitType}`}function fn(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>Th(r)).join(", ")}]`),es(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>En(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>En(r)).join(",")),`Target(${i})`}(Jt(n))}; limitType=${n.limitType})`}function rs(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):F.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of pi(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(a,c,h){let f=Gc(a,c,h);return a.inclusive?f<=0:f<0}(i.startAt,pi(i),r)||i.endAt&&!function(a,c,h){let f=Gc(a,c,h);return a.inclusive?f>=0:f>0}(i.endAt,pi(i),r))}(n,t)}function Ip(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vh(n){return(t,e)=>{let i=!1;for(let r of pi(n)){let o=Ep(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function Ep(n,t,e){let i=n.field.isKeyField()?F.comparator(t.key,e.key):function(o,a,c){let h=a.data.field(o),f=c.data.field(o);return h!==null&&f!==null?In(h,f):O()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return O()}}var fe=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){We(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return gh(this.inner)}size(){return this.innerSize}};var Tp=new ot(F.comparator);function pe(){return Tp}var xh=new ot(F.comparator);function di(...n){let t=xh;for(let e of n)t=t.insert(e.key,e);return t}function Dh(n){let t=xh;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Be(){return mi()}function Sh(){return mi()}function mi(){return new fe(n=>n.toString(),(n,t)=>n.isEqual(t))}var bp=new ot(F.comparator),Ap=new mt(F.comparator);function z(...n){let t=Ap;for(let e of n)t=t.add(e);return t}var Cp=new mt(U);function Vp(){return Cp}function ol(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_i(t)?"-0":t}}function Rh(n){return{integerValue:""+n}}function xp(n,t){return up(t)?Rh(t):ol(n,t)}var bn=class{constructor(){this._=void 0}};function Dp(n,t,e){return n instanceof An?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&el(o)&&(o=ns(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(e,t):n instanceof je?kh(n,t):n instanceof Ke?Nh(n,t):function(r,o){let a=Ph(r,o),c=Hc(a)+Hc(r.Pe);return So(a)&&So(r.Pe)?Rh(c):ol(r.serializer,c)}(n,t)}function Sp(n,t,e){return n instanceof je?kh(n,t):n instanceof Ke?Nh(n,t):e}function Ph(n,t){return n instanceof Cn?function(i){return So(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var An=class extends bn{},je=class extends bn{constructor(t){super(),this.elements=t}};function kh(n,t){let e=Mh(t);for(let i of n.elements)e.some(r=>Yt(r,i))||e.push(i);return{arrayValue:{values:e}}}var Ke=class extends bn{constructor(t){super(),this.elements=t}};function Nh(n,t){let e=Mh(t);for(let i of n.elements)e=e.filter(r=>!Yt(r,i));return{arrayValue:{values:e}}}var Cn=class extends bn{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function Hc(n){return et(n.integerValue||n.doubleValue)}function Mh(n){return nl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Rp(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof je&&r instanceof je||i instanceof Ke&&r instanceof Ke?wn(i.elements,r.elements,Yt):i instanceof Cn&&r instanceof Cn?Yt(i.Pe,r.Pe):i instanceof An&&r instanceof An}(n.transform,t.transform)}var Go=class{constructor(t,e){this.version=t,this.transformResults=e}},ue=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function vr(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Vn=class{};function Fh(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new wi(n.key,ue.none()):new He(n.key,n.data,ue.none());{let e=n.data,i=zt.empty(),r=new mt(Pt.comparator);for(let o of t.fields)if(!r.has(o)){let a=e.field(o);a===null&&o.length>1&&(o=o.popLast(),a=e.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new me(n.key,i,new Qt(r.toArray()),ue.none())}}function Pp(n,t,e){n instanceof He?function(r,o,a){let c=r.value.clone(),h=Wc(r.fieldTransforms,o,a.transformResults);c.setAll(h),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):n instanceof me?function(r,o,a){if(!vr(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=Wc(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Oh(r)),h.setAll(c),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,t,e):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function gi(n,t,e,i){return n instanceof He?function(o,a,c,h){if(!vr(o.precondition,a))return c;let f=o.value.clone(),m=Jc(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof me?function(o,a,c,h){if(!vr(o.precondition,a))return c;let f=Jc(o.fieldTransforms,h,a),m=a.data;return m.setAll(Oh(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,t,e,i):function(o,a,c){return vr(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,t,e)}function kp(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=Ph(i.transform,r||null);o!=null&&(e===null&&(e=zt.empty()),e.set(i.field,o))}return e||null}function Qc(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&wn(i,r,(o,a)=>Rp(o,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var He=class extends Vn{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},me=class extends Vn{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Oh(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function Wc(n,t,e){let i=new Map;W(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],a=o.transform,c=t.data.field(o.field);i.set(o.field,Sp(a,c,e[r]))}return i}function Jc(n,t,e){let i=new Map;for(let r of n){let o=r.transform,a=e.data.field(r.field);i.set(r.field,Dp(o,a,t))}return i}var wi=class extends Vn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$o=class extends Vn{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jo=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&Pp(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=gi(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=gi(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=Sh();return this.mutations.forEach(r=>{let o=t.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=e.has(r.key)?null:c;let h=Fh(a,c);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(B.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),z())}isEqual(t){return this.batchId===t.batchId&&wn(this.mutations,t.mutations,(e,i)=>Qc(e,i))&&wn(this.baseMutations,t.baseMutations,(e,i)=>Qc(e,i))}},Ko=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){W(t.mutations.length===i.length);let r=function(){return bp}(),o=t.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new n(t,e,i,r)}};var Ho=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Qo=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var lt,G;function Np(n){switch(n){default:return O();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function Lh(n){if(n===void 0)return ce("GRPC error has no .code"),C.UNKNOWN;switch(n){case lt.OK:return C.OK;case lt.CANCELLED:return C.CANCELLED;case lt.UNKNOWN:return C.UNKNOWN;case lt.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case lt.INTERNAL:return C.INTERNAL;case lt.UNAVAILABLE:return C.UNAVAILABLE;case lt.UNAUTHENTICATED:return C.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case lt.NOT_FOUND:return C.NOT_FOUND;case lt.ALREADY_EXISTS:return C.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return C.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case lt.ABORTED:return C.ABORTED;case lt.OUT_OF_RANGE:return C.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return C.UNIMPLEMENTED;case lt.DATA_LOSS:return C.DATA_LOSS;default:return O()}}(G=lt||(lt={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var Xc=null;function Mp(){return new TextEncoder}var Fp=new Ae([4294967295,4294967295],0);function Yc(n){let t=Mp().encode(n),e=new lo;return e.update(t),new Uint8Array(e.digest())}function Zc(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ae([e,i],0),new Ae([r,o],0)]}var Wo=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new qe(`Invalid padding: ${e}`);if(i<0)throw new qe(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new qe(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new qe(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ie=Ae.fromNumber(this.Te)}Ee(t,e,i){let r=t.add(e.multiply(Ae.fromNumber(i)));return r.compare(Fp)===1&&(r=new Ae([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let e=Yc(t),[i,r]=Zc(e);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new n(o,r,e);return i.forEach(c=>a.insert(c)),a}insert(t){if(this.Te===0)return;let e=Yc(t),[i,r]=Zc(e);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},qe=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vr=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,Ii.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(B.min(),r,new ot(U),pe(),z())}},Ii=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,z(),z(),z())}};var _n=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},xr=class{constructor(t,e){this.targetId=t,this.me=e}},Dr=class{constructor(t,e,i=bt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Sr=class{constructor(){this.fe=0,this.ge=th(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=z(),e=z(),i=z();return this.ge.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:O()}}),new Ii(this.pe,this.ye,t,e,i)}Ce(){this.we=!1,this.ge=th()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,W(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Jo=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=pe(),this.qe=mr(),this.Qe=mr(),this.Ke=new ot(U)}$e(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(e,t.Ve):this.We(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.We(e,t.key,t.Ve)}Ge(t){this.forEachTarget(t,e=>{let i=this.ze(e);switch(t.state){case 0:this.je(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.je(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),i.De(t.resumeToken));break;default:O()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.je(r)&&e(r)})}Je(t){let e=t.targetId,i=t.me.count,r=this.Ye(e);if(r){let o=r.target;if(qo(o))if(i===0){let a=new F(o.path);this.We(e,a,Gt.newNoDocument(a,B.min()))}else W(i===1);else{let a=this.Ze(e);if(a!==i){let c=this.Xe(t),h=c?this.et(c,t,a):1;if(h!==0){this.He(e);let f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,f)}Xc?.tt(function(m,E,b,V,N){var M,S,j,K,Q,it;let kt={localCacheCount:m,existenceFilterCount:E.count,databaseId:b.database,projectId:b.projectId},Y=E.unchangedNames;return Y&&(kt.bloomFilter={applied:N===0,hashCount:(M=Y?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(K=(j=(S=Y?.bits)===null||S===void 0?void 0:S.bitmap)===null||j===void 0?void 0:j.length)!==null&&K!==void 0?K:0,padding:(it=(Q=Y?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&it!==void 0?it:0,mightContain:w=>{var p;return(p=V?.mightContain(w))!==null&&p!==void 0&&p}}),kt}(a,t.me,this.Le.nt(),c,h))}}}}Xe(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,a,c;try{a=de(i).toUint8Array()}catch(h){if(h instanceof br)return vn("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Wo(a,r,o)}catch(h){return vn(h instanceof qe?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Te===0?null:c}et(t,e,i){return e.me.count===i-this.rt(t,e.targetId)?0:2}rt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let a=this.Le.nt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.We(e,o,null),r++)}),r}it(t){let e=new Map;this.Be.forEach((o,a)=>{let c=this.Ye(a);if(c){if(o.current&&qo(c.target)){let h=new F(c.target.path);this.st(h).has(a)||this.ot(a,h)||this.We(a,h,Gt.newNoDocument(h,t))}o.be&&(e.set(a,o.ve()),o.Ce())}});let i=z();this.Qe.forEach((o,a)=>{let c=!0;a.forEachWhile(h=>{let f=this.Ye(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(t));let r=new Vr(t,e,this.Ke,this.ke,i);return this.ke=pe(),this.qe=mr(),this.Qe=mr(),this.Ke=new ot(U),r}Ue(t,e){if(!this.je(t))return;let i=this.ot(t,e.key)?2:0;this.ze(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t)),this.Qe=this.Qe.insert(e.key,this._t(e.key).add(t))}We(t,e,i){if(!this.je(t))return;let r=this.ze(t);this.ot(t,e)?r.Fe(e,1):r.Me(e),this.Qe=this.Qe.insert(e,this._t(e).delete(t)),this.Qe=this.Qe.insert(e,this._t(e).add(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ze(t){let e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let e=this.Be.get(t);return e||(e=new Sr,this.Be.set(t,e)),e}_t(t){let e=this.Qe.get(t);return e||(e=new mt(U),this.Qe=this.Qe.insert(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new mt(U),this.qe=this.qe.insert(t,e)),e}je(t){let e=this.Ye(t)!==null;return e||k("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ut(t)}He(t){this.Be.set(t,new Sr),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.We(t,e,null)})}ot(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function mr(){return new ot(F.comparator)}function th(){return new ot(F.comparator)}var Op={asc:"ASCENDING",desc:"DESCENDING"},Lp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bp={and:"AND",or:"OR"},Xo=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function Yo(n,t){return n.useProto3Json||es(t)?t:{value:t}}function Rr(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Bh(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function qp(n,t){return Rr(n,t.toTimestamp())}function Xt(n){return W(!!n),B.fromTimestamp(function(e){let i=he(e);return new yt(i.seconds,i.nanos)}(n))}function al(n,t){return Zo(n,t).canonicalString()}function Zo(n,t){let e=function(r){return new nt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function qh(n){let t=nt.fromString(n);return W(jh(t)),t}function ta(n,t){return al(n.databaseId,t.path)}function mo(n,t){let e=qh(t);if(e.get(1)!==n.databaseId.projectId)throw new R(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new R(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new F(Uh(e))}function zh(n,t){return al(n.databaseId,t)}function zp(n){let t=qh(n);return t.length===4?nt.emptyPath():Uh(t)}function ea(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Uh(n){return W(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function eh(n,t,e){return{name:ta(n,t),fields:e.value.mapValue.fields}}function Up(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:O()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(W(m===void 0||typeof m=="string"),bt.fromBase64String(m||"")):(W(m===void 0||m instanceof Buffer||m instanceof Uint8Array),bt.fromUint8Array(m||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(f){let m=f.code===void 0?C.UNKNOWN:Lh(f.code);return new R(m,f.message||"")}(a);e=new Dr(i,r,o,c||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=mo(n,i.document.name),o=Xt(i.document.updateTime),a=i.document.createTime?Xt(i.document.createTime):B.min(),c=new zt({mapValue:{fields:i.document.fields}}),h=Gt.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];e=new _n(f,m,h.key,h)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=mo(n,i.document),o=i.readTime?Xt(i.readTime):B.min(),a=Gt.newNoDocument(r,o),c=i.removedTargetIds||[];e=new _n([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=mo(n,i.document),o=i.removedTargetIds||[];e=new _n([],o,r,null)}else{if(!("filter"in t))return O();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new Qo(r,o),c=i.targetId;e=new xr(c,a)}}return e}function Gp(n,t){let e;if(t instanceof He)e={update:eh(n,t.key,t.value)};else if(t instanceof wi)e={delete:ta(n,t.key)};else if(t instanceof me)e={update:eh(n,t.key,t.data),updateMask:Yp(t.fieldMask)};else{if(!(t instanceof $o))return O();e={verify:ta(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof An)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof je)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ke)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cn)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw O()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:qp(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:O()}(n,t.precondition)),e}function $p(n,t){return n&&n.length>0?(W(t!==void 0),n.map(e=>function(r,o){let a=r.updateTime?Xt(r.updateTime):Xt(o);return a.isEqual(B.min())&&(a=Xt(o)),new Go(a,r.transformResults||[])}(e,t))):[]}function jp(n,t){return{documents:[zh(n,t.path)]}}function Kp(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=zh(n,r);let o=function(f){if(f.length!==0)return $h($t.create(f,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(b){return{field:pn(b.field),direction:Wp(b.dir)}}(m))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);let c=Yo(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{ct:e,parent:r}}function Hp(n){let t=zp(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){W(i===1);let m=e.from[0];m.allDescendants?r=m.collectionId:t=t.child(m.collectionId)}let o=[];e.where&&(o=function(E){let b=Gh(E);return b instanceof $t&&Ih(b)?b.getFilters():[b]}(e.where));let a=[];e.orderBy&&(a=function(E){return E.map(b=>function(N){return new $e(mn(N.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(e.orderBy));let c=null;e.limit&&(c=function(E){let b;return b=typeof E=="object"?E.value:E,es(b)?null:b}(e.limit));let h=null;e.startAt&&(h=function(E){let b=!!E.before,V=E.values||[];return new Tn(V,b)}(e.startAt));let f=null;return e.endAt&&(f=function(E){let b=!E.before,V=E.values||[];return new Tn(V,b)}(e.endAt)),vp(t,r,a,o,c,"F",h,f)}function Qp(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Gh(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=mn(e.unaryFilter.field);return ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=mn(e.unaryFilter.field);return ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=mn(e.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=mn(e.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(n):n.fieldFilter!==void 0?function(e){return ct.create(mn(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return $t.create(e.compositeFilter.filters.map(i=>Gh(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return O()}}(e.compositeFilter.op))}(n):O()}function Wp(n){return Op[n]}function Jp(n){return Lp[n]}function Xp(n){return Bp[n]}function pn(n){return{fieldPath:n.canonicalString()}}function mn(n){return Pt.fromServerFormat(n.fieldPath)}function $h(n){return n instanceof ct?function(e){if(e.op==="=="){if(Uc(e.value))return{unaryFilter:{field:pn(e.field),op:"IS_NAN"}};if(zc(e.value))return{unaryFilter:{field:pn(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Uc(e.value))return{unaryFilter:{field:pn(e.field),op:"IS_NOT_NAN"}};if(zc(e.value))return{unaryFilter:{field:pn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pn(e.field),op:Jp(e.op),value:e.value}}}(n):n instanceof $t?function(e){let i=e.getFilters().map(r=>$h(r));return i.length===1?i[0]:{compositeFilter:{op:Xp(e.op),filters:i}}}(n):O()}function Yp(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function jh(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ei=class n{constructor(t,e,i,r,o=B.min(),a=B.min(),c=bt.EMPTY_BYTE_STRING,h=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var na=class{constructor(t){this.ht=t}};function Zp(n){let t=Hp({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uo(t,t.limit,"L"):t}var Pr=class{constructor(){}Et(t,e){this.dt(t,e),e.At()}dt(t,e){if("nullValue"in t)this.Rt(e,5);else if("booleanValue"in t)this.Rt(e,10),e.Vt(t.booleanValue?1:0);else if("integerValue"in t)this.Rt(e,15),e.Vt(et(t.integerValue));else if("doubleValue"in t){let i=et(t.doubleValue);isNaN(i)?this.Rt(e,13):(this.Rt(e,15),_i(i)?e.Vt(0):e.Vt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Rt(e,20),typeof i=="string"&&(i=he(i)),e.ft(`${i.seconds||""}`),e.Vt(i.nanos||0)}else if("stringValue"in t)this.gt(t.stringValue,e),this.yt(e);else if("bytesValue"in t)this.Rt(e,30),e.wt(de(t.bytesValue)),this.yt(e);else if("referenceValue"in t)this.St(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Rt(e,45),e.Vt(i.latitude||0),e.Vt(i.longitude||0)}else"mapValue"in t?yh(t)?this.Rt(e,Number.MAX_SAFE_INTEGER):_h(t)?this.bt(t.mapValue,e):(this.Dt(t.mapValue,e),this.yt(e)):"arrayValue"in t?(this.vt(t.arrayValue,e),this.yt(e)):O()}gt(t,e){this.Rt(e,25),this.Ct(t,e)}Ct(t,e){e.ft(t)}Dt(t,e){let i=t.fields||{};this.Rt(e,55);for(let r of Object.keys(i))this.gt(r,e),this.dt(i[r],e)}bt(t,e){var i,r;let o=t.fields||{};this.Rt(e,53);let a="value",c=((r=(i=o[a].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.Rt(e,15),e.Vt(et(c)),this.gt(a,e),this.dt(o[a],e)}vt(t,e){let i=t.values||[];this.Rt(e,50);for(let r of i)this.dt(r,e)}St(t,e){this.Rt(e,37),F.fromName(t).path.forEach(i=>{this.Rt(e,60),this.Ct(i,e)})}Rt(t,e){t.Vt(e)}yt(t){t.Vt(2)}};Pr.Ft=new Pr;var ia=class{constructor(){this.ln=new ra}addToCollectionParentIndex(t,e){return this.ln.add(e),x.resolve()}getCollectionParents(t,e){return x.resolve(this.ln.getEntries(e))}addFieldIndex(t,e){return x.resolve()}deleteFieldIndex(t,e){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,e){return x.resolve()}getDocumentsMatchingTarget(t,e){return x.resolve(null)}getIndexType(t,e){return x.resolve(0)}getFieldIndexes(t,e){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,e){return x.resolve(Ge.min())}getMinOffsetFromCollectionGroup(t,e){return x.resolve(Ge.min())}updateCollectionGroup(t,e,i){return x.resolve()}updateIndexEntries(t,e){return x.resolve()}},ra=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new mt(nt.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new mt(nt.comparator)).toArray()}};var X_=new Uint8Array(0);var nh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lt=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var Ti=class n{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function ih([n,t],[e,i]){let r=U(n,e);return r===0?U(t,i):r}var sa=class{constructor(t){this.Gn=t,this.buffer=new mt(ih),this.zn=0}jn(){return++this.zn}Hn(t){let e=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();ih(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},oa=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){k("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>P(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pn(e)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Rn(e)}yield this.Yn(3e5)}))}},aa=class{constructor(t,e){this.Zn=t,this.params=e}calculateTargetCount(t,e){return this.Zn.Xn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return x.resolve(tl.oe);let i=new sa(e);return this.Zn.forEachTarget(t,r=>i.Hn(r.sequenceNumber)).next(()=>this.Zn.er(t,r=>i.Hn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Zn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Zn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(nh)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nh):this.tr(t,e))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,e){let i,r,o,a,c,h,f,m=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,a=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,c=Date.now(),this.removeTargets(t,i,e))).next(E=>(o=E,h=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(f=Date.now(),dn()<=Ht.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${E} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:E})))}};function tm(n,t){return new aa(n,t)}var la=class{constructor(){this.changes=new fe(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Gt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?x.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var ua=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var ca=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&gi(i.mutation,r,Qt.empty(),yt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,z()).next(()=>i))}getLocalViewOfDocuments(t,e,i=z()){let r=Be();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let a=di();return o.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){let i=Be();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,z()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((a,c)=>{e.set(a,c)})})}computeViews(t,e,i,r){let o=pe(),a=mi(),c=function(){return mi()}();return e.forEach((h,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof me)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),gi(m.mutation,f,m.mutation.getFieldMask(),yt.now())):a.set(f.key,Qt.empty())}),this.recalculateAndSaveOverlays(t,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),e.forEach((f,m)=>{var E;return c.set(f,new ua(m,(E=a.get(f))!==null&&E!==void 0?E:null))}),c))}recalculateAndSaveOverlays(t,e){let i=mi(),r=new ot((a,c)=>a-c),o=z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(let c of a)c.keys().forEach(h=>{let f=e.get(h);if(f===null)return;let m=i.get(h)||Qt.empty();m=c.applyToLocalView(f,m),i.set(h,m);let E=(r.get(c.batchId)||z()).add(h);r=r.insert(c.batchId,E)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let h=c.getNext(),f=h.key,m=h.value,E=Sh();m.forEach(b=>{if(!o.has(b)){let V=Fh(e.get(b),i.get(b));V!==null&&E.set(b,V),o=o.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,E))}return x.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Ah(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):x.resolve(Be()),c=-1,h=o;return a.next(f=>x.forEach(f,(m,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),o.get(m)?x.resolve():this.remoteDocumentCache.getEntry(t,m).next(b=>{h=h.insert(m,b)}))).next(()=>this.populateOverlays(t,f,o)).next(()=>this.computeViews(t,h,f,z())).next(m=>({batchId:c,changes:Dh(m)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new F(e)).next(i=>{let r=di();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,a=di();return this.indexManager.getCollectionParents(t,o).next(c=>x.forEach(c,h=>{let f=function(E,b){return new xe(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(e,h.child(o));return this.getDocumentsMatchingCollectionQuery(t,f,i,r).next(m=>{m.forEach((E,b)=>{a=a.insert(E,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(a=>{o.forEach((h,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,Gt.newInvalidDocument(m)))});let c=di();return a.forEach((h,f)=>{let m=o.get(h);m!==void 0&&gi(m.mutation,f,Qt.empty(),yt.now()),rs(e,f)&&(c=c.insert(h,f))}),c})}};var ha=class{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,e){return x.resolve(this.Tr.get(e))}saveBundleMetadata(t,e){return this.Tr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Xt(r.createTime)}}(e)),x.resolve()}getNamedQuery(t,e){return x.resolve(this.Ir.get(e))}saveNamedQuery(t,e){return this.Ir.set(e.name,function(r){return{name:r.name,query:Zp(r.bundledQuery),readTime:Xt(r.readTime)}}(e)),x.resolve()}};var da=class{constructor(){this.overlays=new ot(F.comparator),this.Er=new Map}getOverlay(t,e){return x.resolve(this.overlays.get(e))}getOverlays(t,e){let i=Be();return x.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.Tt(t,e,o)}),x.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Er.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(i)),x.resolve()}getOverlaysForCollection(t,e,i){let r=Be(),o=e.length+1,a=new F(e.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let h=c.getNext().value,f=h.getKey();if(!e.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return x.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new ot((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===e&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Be(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let c=Be(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return x.resolve(c)}Tt(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.Er.get(r.largestBatchId).delete(i.key);this.Er.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Ho(e,i));let o=this.Er.get(e);o===void 0&&(o=z(),this.Er.set(e,o)),this.Er.set(e,o.add(i.key))}};var fa=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(t){return x.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,x.resolve()}};var bi=class{constructor(){this.dr=new mt(ut.Ar),this.Rr=new mt(ut.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,e){let i=new ut(t,e);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.gr(new ut(t,e))}pr(t,e){t.forEach(i=>this.removeReference(i,e))}yr(t){let e=new F(new nt([])),i=new ut(e,t),r=new ut(e,t+1),o=[];return this.Rr.forEachInRange([i,r],a=>{this.gr(a),o.push(a.key)}),o}wr(){this.dr.forEach(t=>this.gr(t))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){let e=new F(new nt([])),i=new ut(e,t),r=new ut(e,t+1),o=z();return this.Rr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(t){let e=new ut(t,0),i=this.dr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},ut=class{constructor(t,e){this.key=t,this.br=e}static Ar(t,e){return F.comparator(t.key,e.key)||U(t.br,e.br)}static Vr(t,e){return U(t.br,e.br)||F.comparator(t.key,e.key)}};var pa=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Dr=1,this.vr=new mt(ut.Ar)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new jo(o,e,i,r);this.mutationQueue.push(a);for(let c of r)this.vr=this.vr.add(new ut(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,e){return x.resolve(this.Cr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.Fr(i),o=r<0?0:r;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new ut(e,0),r=new ut(e,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([i,r],a=>{let c=this.Cr(a.br);o.push(c)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new mt(U);return e.forEach(r=>{let o=new ut(r,0),a=new ut(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,a],c=>{i=i.add(c.br)})}),x.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;F.isDocumentKey(o)||(o=o.child(""));let a=new ut(new F(o),0),c=new mt(U);return this.vr.forEachWhile(h=>{let f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.br)),!0)},a),x.resolve(this.Mr(c))}Mr(t){let e=[];return t.forEach(i=>{let r=this.Cr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){W(this.Or(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return x.forEach(e.mutations,r=>{let o=new ut(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.vr=i})}Ln(t){}containsKey(t,e){let i=new ut(e,0),r=this.vr.firstAfterOrEqual(i);return x.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}Or(t,e){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){let e=this.Fr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var ma=class{constructor(t){this.Nr=t,this.docs=function(){return new ot(F.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,a=this.Nr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return x.resolve(i?i.document.mutableCopy():Gt.newInvalidDocument(e))}getEntries(t,e){let i=pe();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Gt.newInvalidDocument(r))}),x.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=pe(),a=e.path,c=new F(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){let{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||op(sp(m),i)<=0||(r.has(m.key)||rs(e,m))&&(o=o.insert(m.key,m.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(t,e,i,r){O()}Lr(t,e){return x.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new ga(this)}getSize(t){return x.resolve(this.size)}},ga=class extends la{constructor(t){super(),this.hr=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.hr.addEntry(t,r)):this.hr.removeEntry(i)}),x.waitFor(e)}getFromCache(t,e){return this.hr.getEntry(t,e)}getAllFromCache(t,e){return this.hr.getEntries(t,e)}};var _a=class{constructor(t){this.persistence=t,this.Br=new fe(e=>il(e),rl),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.kr=0,this.qr=new bi,this.targetCount=0,this.Qr=Ti.qn()}forEachTarget(t,e){return this.Br.forEach((i,r)=>e(r)),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.kr&&(this.kr=e),x.resolve()}Un(t){this.Br.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Qr=new Ti(e),this.highestTargetId=e),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,e){return this.Un(e),this.targetCount+=1,x.resolve()}updateTargetData(t,e){return this.Un(e),x.resolve()}removeTargetData(t,e){return this.Br.delete(e.target),this.qr.yr(e.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Br.forEach((a,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.Br.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),x.waitFor(o).next(()=>r)}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,e){let i=this.Br.get(e)||null;return x.resolve(i)}addMatchingKeys(t,e,i){return this.qr.mr(e,i),x.resolve()}removeMatchingKeys(t,e,i){this.qr.pr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(a=>{o.push(r.markPotentiallyOrphaned(t,a))}),x.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.qr.yr(e),x.resolve()}getMatchingKeysForTargetId(t,e){let i=this.qr.Sr(e);return x.resolve(i)}containsKey(t,e){return x.resolve(this.qr.containsKey(e))}};var kr=class{constructor(t,e){this.Kr={},this.overlays={},this.$r=new tl(0),this.Ur=!1,this.Ur=!0,this.Wr=new fa,this.referenceDelegate=t(this),this.Gr=new _a(this),this.indexManager=new ia,this.remoteDocumentCache=function(r){return new ma(r)}(i=>this.referenceDelegate.zr(i)),this.serializer=new na(e),this.jr=new ha(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new da,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Kr[t.toKey()];return i||(i=new pa(e,this.referenceDelegate),this.Kr[t.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,e,i){k("MemoryPersistence","Starting transaction:",t);let r=new ya(this.$r.next());return this.referenceDelegate.Hr(),i(r).next(o=>this.referenceDelegate.Jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Yr(t,e){return x.or(Object.values(this.Kr).map(i=>()=>i.containsKey(t,e)))}},ya=class extends Vo{constructor(t){super(),this.currentSequenceNumber=t}},va=class n{constructor(t){this.persistence=t,this.Zr=new bi,this.Xr=null}static ei(t){return new n(t)}get ti(){if(this.Xr)return this.Xr;throw O()}addReference(t,e,i){return this.Zr.addReference(i,e),this.ti.delete(i.toString()),x.resolve()}removeReference(t,e,i){return this.Zr.removeReference(i,e),this.ti.add(i.toString()),x.resolve()}markPotentiallyOrphaned(t,e){return this.ti.add(e.toString()),x.resolve()}removeTarget(t,e){this.Zr.yr(e.targetId).forEach(r=>this.ti.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.ti.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Hr(){this.Xr=new Set}Jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.ti,i=>{let r=F.fromPath(i);return this.ni(t,r).next(o=>{o||e.removeEntry(r,B.min())})}).next(()=>(this.Xr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ni(t,e).next(i=>{i?this.ti.delete(e.toString()):this.ti.add(e.toString())})}zr(t){return 0}ni(t,e){return x.or([()=>x.resolve(this.Zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Yr(t,e)])}},Nr=class n{constructor(t,e){this.persistence=t,this.ri=new fe(i=>cp(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=tm(this,e)}static ei(t,e){return new n(t,e)}Hr(){}Jr(t){return x.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Xn(t){let e=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}nr(t){let e=0;return this.er(t,i=>{e++}).next(()=>e)}er(t,e){return x.forEach(this.ri,(i,r)=>this.ir(t,i,r).next(o=>o?x.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.Lr(t,a=>this.ir(t,a,e).next(c=>{c||(i++,o.removeEntry(a,B.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.ri.set(e,t.currentSequenceNumber),x.resolve()}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.ri.set(i,t.currentSequenceNumber),x.resolve()}removeReference(t,e,i){return this.ri.set(i,t.currentSequenceNumber),x.resolve()}updateLimboDocument(t,e){return this.ri.set(e,t.currentSequenceNumber),x.resolve()}zr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=_r(t.data.value)),e}ir(t,e,i){return x.or([()=>this.persistence.Yr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{let r=this.ri.get(e);return x.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}};var wa=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Wi=i,this.Gi=r}static zi(t,e){let i=z(),r=z();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var Ia=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Ea=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return sc()?8:lp(rc())>0?6:4}()}initialize(t,e){this.Zi=t,this.indexManager=e,this.ji=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.Xi(t,e).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.es(t,e,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Ia;return this.ts(t,e,a).next(c=>{if(o.result=c,this.Hi)return this.ns(t,e,a,c.size)})}).next(()=>o.result)}ns(t,e,i,r){return i.documentReadCount<this.Ji?(dn()<=Ht.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",fn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),x.resolve()):(dn()<=Ht.DEBUG&&k("QueryEngine","Query:",fn(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Yi*r?(dn()<=Ht.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",fn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Jt(e))):x.resolve())}Xi(t,e){if(Kc(e))return x.resolve(null);let i=Jt(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Uo(e,null,"F"),i=Jt(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let a=z(...o);return this.Zi.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(h=>{let f=this.rs(e,c);return this.ss(e,f,a,h.readTime)?this.Xi(t,Uo(e,null,"F")):this.os(t,f,e,h)}))})))}es(t,e,i,r){return Kc(e)||r.isEqual(B.min())?x.resolve(null):this.Zi.getDocuments(t,i).next(o=>{let a=this.rs(e,o);return this.ss(e,a,i,r)?x.resolve(null):(dn()<=Ht.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fn(e)),this.os(t,a,e,rp(r,-1)).next(c=>c))})}rs(t,e){let i=new mt(Vh(t));return e.forEach((r,o)=>{rs(t,o)&&(i=i.add(o))}),i}ss(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ts(t,e,i){return dn()<=Ht.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",fn(e)),this.Zi.getDocumentsMatchingQuery(t,e,Ge.min(),i)}os(t,e,i,r){return this.Zi.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(a=>{o=o.insert(a.key,a)}),o))}};var Ta=class{constructor(t,e,i,r){this.persistence=t,this._s=e,this.serializer=r,this.us=new ot(U),this.cs=new fe(o=>il(o),rl),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(i)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ca(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.us))}};function em(n,t,e,i){return new Ta(n,t,e,i)}function Kh(n,t){return P(this,null,function*(){let e=L(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Ps(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],h=z();for(let f of r){a.push(f.batchId);for(let m of f.mutations)h=h.add(m.key)}for(let f of o){c.push(f.batchId);for(let m of f.mutations)h=h.add(m.key)}return e.localDocuments.getDocuments(i,h).next(f=>({Ts:f,removedBatchIds:a,addedBatchIds:c}))})})})}function nm(n,t){let e=L(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.hs.newChangeBuffer({trackRemovals:!0});return function(c,h,f,m){let E=f.batch,b=E.keys(),V=x.resolve();return b.forEach(N=>{V=V.next(()=>m.getEntry(h,N)).next(M=>{let S=f.docVersions.get(N);W(S!==null),M.version.compareTo(S)<0&&(E.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),m.addEntry(M)))})}),V.next(()=>c.mutationQueue.removeMutationBatch(h,E))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let h=z();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Hh(n){let t=L(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Gr.getLastRemoteSnapshotVersion(e))}function im(n,t){let e=L(n),i=t.snapshotVersion,r=e.us;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=e.hs.newChangeBuffer({trackRemovals:!0});r=e.us;let c=[];t.targetChanges.forEach((m,E)=>{let b=r.get(E);if(!b)return;c.push(e.Gr.removeMatchingKeys(o,m.removedDocuments,E).next(()=>e.Gr.addMatchingKeys(o,m.addedDocuments,E)));let V=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(E)!==null?V=V.withResumeToken(bt.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):m.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(m.resumeToken,i)),r=r.insert(E,V),function(M,S,j){return M.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(b,V,m)&&c.push(e.Gr.updateTargetData(o,V))});let h=pe(),f=z();if(t.documentUpdates.forEach(m=>{t.resolvedLimboDocuments.has(m)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(rm(o,a,t.documentUpdates).next(m=>{h=m.Is,f=m.Es})),!i.isEqual(B.min())){let m=e.Gr.getLastRemoteSnapshotVersion(o).next(E=>e.Gr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return x.waitFor(c).next(()=>a.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(e.us=r,o))}function rm(n,t,e){let i=z(),r=z();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let a=pe();return e.forEach((c,h)=>{let f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(B.min())?(t.removeEntry(c,h.readTime),a=a.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(h),a=a.insert(c,h)):k("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{Is:a,Es:r}})}function sm(n,t){let e=L(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function om(n,t){let e=L(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Gr.getTargetData(i,t).next(o=>o?(r=o,x.resolve(r)):e.Gr.allocateTargetId(i).next(a=>(r=new Ei(t,a,"TargetPurposeListen",i.currentSequenceNumber),e.Gr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.us.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.us=e.us.insert(i.targetId,i),e.cs.set(t,i.targetId)),i})}function ba(n,t,e){return P(this,null,function*(){let i=L(n),r=i.us.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!Pn(a))throw a;k("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}i.us=i.us.remove(t),i.cs.delete(r.target)})}function rh(n,t,e){let i=L(n),r=B.min(),o=z();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){let E=L(h),b=E.cs.get(m);return b!==void 0?x.resolve(E.us.get(b)):E.Gr.getTargetData(f,m)}(i,a,Jt(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(a,c.targetId).next(h=>{o=h})}).next(()=>i._s.getDocumentsMatchingQuery(a,t,e?r:B.min(),e?o:z())).next(c=>(am(i,Ip(t),c),{documents:c,ds:o})))}function am(n,t,e){let i=n.ls.get(t)||B.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.ls.set(t,i)}var Mr=class{constructor(){this.activeTargetIds=Vp()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Aa=class{constructor(){this._o=new Mr,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,e,i){this.ao[t]=e}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Mr,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Ca=class{uo(t){}shutdown(){}};var Fr=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.To)t(0)}Po(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gr=null;function go(){return gr===null?gr=function(){return 268435456+Math.round(2147483648*Math.random())}():gr++,"0x"+gr.toString(16)}var lm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Va=class{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}};var Tt="WebChannelConnection",xa=class extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+e.host,this.Mo=`projects/${r}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Oo(e,i,r,o,a){let c=go(),h=this.No(e,i.toUriEncodedString());k("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);let f={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(f,o,a),this.Bo(e,h,f,r).then(m=>(k("RestConnection",`Received RPC '${e}' ${c}: `,m),m),m=>{throw vn("RestConnection",`RPC '${e}' ${c} failed with error: `,m,"url: ",h,"request:",r),m})}ko(e,i,r,o,a,c){return this.Oo(e,i,r,o,a)}Lo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sn}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>e[a]=o),r&&r.headers.forEach((o,a)=>e[a]=o)}No(e,i){let r=lm[e];return`${this.Fo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,e,i,r){let o=go();return new Promise((a,c)=>{let h=new uo;h.setWithCredentials(!0),h.listenOnce(co.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case hi.NO_ERROR:let m=h.getResponseJson();k(Tt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(m)),a(m);break;case hi.TIMEOUT:k(Tt,`RPC '${t}' ${o} timed out`),c(new R(C.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:let E=h.getStatus();if(k(Tt,`RPC '${t}' ${o} failed with status:`,E,"response text:",h.getResponseText()),E>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);let V=b?.error;if(V&&V.status&&V.message){let N=function(S){let j=S.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(j)>=0?j:C.UNKNOWN}(V.status);c(new R(N,V.message))}else c(new R(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new R(C.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{k(Tt,`RPC '${t}' ${o} completed.`)}});let f=JSON.stringify(r);k(Tt,`RPC '${t}' ${o} sending request:`,r),h.send(e,"POST",f,i,15)})}qo(t,e,i){let r=go(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=po(),c=fo(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Lo(h.initMessageHeaders,e,i),h.encodeInitMessageHeaders=!0;let m=o.join("");k(Tt,`Creating RPC '${t}' stream ${r}: ${m}`,h);let E=a.createWebChannel(m,h),b=!1,V=!1,N=new Va({Eo:S=>{V?k(Tt,`Not sending because RPC '${t}' stream ${r} is closed:`,S):(b||(k(Tt,`Opening RPC '${t}' stream ${r} transport.`),E.open(),b=!0),k(Tt,`RPC '${t}' stream ${r} sending:`,S),E.send(S))},Ao:()=>E.close()}),M=(S,j,K)=>{S.listen(j,Q=>{try{K(Q)}catch(it){setTimeout(()=>{throw it},0)}})};return M(E,hn.EventType.OPEN,()=>{V||(k(Tt,`RPC '${t}' stream ${r} transport opened.`),N.So())}),M(E,hn.EventType.CLOSE,()=>{V||(V=!0,k(Tt,`RPC '${t}' stream ${r} transport closed`),N.Do())}),M(E,hn.EventType.ERROR,S=>{V||(V=!0,vn(Tt,`RPC '${t}' stream ${r} transport errored:`,S),N.Do(new R(C.UNAVAILABLE,"The operation could not be completed")))}),M(E,hn.EventType.MESSAGE,S=>{var j;if(!V){let K=S.data[0];W(!!K);let Q=K,it=Q?.error||((j=Q[0])===null||j===void 0?void 0:j.error);if(it){k(Tt,`RPC '${t}' stream ${r} received error:`,it);let kt=it.status,Y=function(_){let y=lt[_];if(y!==void 0)return Lh(y)}(kt),w=it.message;Y===void 0&&(Y=C.INTERNAL,w="Unknown error status: "+kt+" with message "+it.message),V=!0,N.Do(new R(Y,w)),E.close()}else k(Tt,`RPC '${t}' stream ${r} received:`,K),N.vo(K)}}),M(c,ho.STAT_EVENT,S=>{S.stat===fr.PROXY?k(Tt,`RPC '${t}' stream ${r} detected buffering proxy`):S.stat===fr.NOPROXY&&k(Tt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.bo()},0),N}};function _o(){return typeof document<"u"?document:null}function ss(n){return new Xo(n,!0)}var Or=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.li=t,this.timerId=e,this.Qo=i,this.Ko=r,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();let e=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),r=Math.max(0,e-i);r>0&&k("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var Lr=class{constructor(t,e,i,r,o,a,c,h){this.li=t,this.Yo=i,this.Zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Or(t,e)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return P(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}u_(){return P(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(t,e){return P(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():e&&e.code===C.RESOURCE_EXHAUSTED?(ce(e.toString()),ce("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):e&&e.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.po(e)})}P_(){}auth(){this.state=1;let t=this.T_(this.Xo),e=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Xo===e&&this.I_(i,r)},i=>{t(()=>{let r=new R(C.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(r)})})}I_(t,e){let i=this.T_(this.Xo);this.stream=this.d_(t,e),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(r=>{i(()=>this.E_(r))}),this.stream.onMessage(r=>{i(()=>++this.n_==1?this.A_(r):this.onNext(r))})}o_(){this.state=5,this.r_.jo(()=>P(this,null,function*(){this.state=0,this.start()}))}E_(t){return k("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return e=>{this.li.enqueueAndForget(()=>this.Xo===t?e():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Da=class extends Lr{constructor(t,e,i,r,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,a),this.serializer=o}d_(t,e){return this.connection.qo("Listen",t,e)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();let e=Up(this.serializer,t),i=function(o){if(!("targetChange"in o))return B.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?B.min():a.readTime?Xt(a.readTime):B.min()}(t);return this.listener.R_(e,i)}V_(t){let e={};e.database=ea(this.serializer),e.addTarget=function(o,a){let c,h=a.target;if(c=qo(h)?{documents:jp(o,h)}:{query:Kp(o,h).ct},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Bh(o,a.resumeToken);let f=Yo(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(B.min())>0){c.readTime=Rr(o,a.snapshotVersion.toTimestamp());let f=Yo(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,t);let i=Qp(this.serializer,t);i&&(e.labels=i),this.c_(e)}m_(t){let e={};e.database=ea(this.serializer),e.removeTarget=t,this.c_(e)}},Sa=class extends Lr{constructor(t,e,i,r,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,a),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,e){return this.connection.qo("Write",t,e)}A_(t){return W(!!t.streamToken),this.lastStreamToken=t.streamToken,W(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){W(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();let e=$p(t.writeResults,t.commitTime),i=Xt(t.commitTime);return this.listener.y_(i,e)}w_(){let t={};t.database=ea(this.serializer),this.c_(t)}g_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>Gp(this.serializer,i))};this.c_(e)}};var Ra=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new R(C.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,e,i,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Oo(t,Zo(e,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(C.UNKNOWN,o.toString())})}ko(t,e,i,r,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ko(t,Zo(e,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new R(C.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},Pa=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ce(e),this.C_=!1):k("OnlineStateTracker",e)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var ka=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(a=>{i.enqueueAndForget(()=>P(this,null,function*(){Je(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(h){return P(this,null,function*(){let f=L(h);f.k_.add(4),yield Si(f),f.K_.set("Unknown"),f.k_.delete(4),yield os(f)})}(this))}))}),this.K_=new Pa(i,r)}};function os(n){return P(this,null,function*(){if(Je(n))for(let t of n.q_)yield t(!0)})}function Si(n){return P(this,null,function*(){for(let t of n.q_)yield t(!1)})}function Qh(n,t){let e=L(n);e.B_.has(t.targetId)||(e.B_.set(t.targetId,t),hl(e)?cl(e):kn(e).s_()&&ul(e,t))}function ll(n,t){let e=L(n),i=kn(e);e.B_.delete(t),i.s_()&&Wh(e,t),e.B_.size===0&&(i.s_()?i.a_():Je(e)&&e.K_.set("Unknown"))}function ul(n,t){if(n.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(B.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}kn(n).V_(t)}function Wh(n,t){n.U_.xe(t),kn(n).m_(t)}function cl(n){n.U_=new Jo({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>n.B_.get(t)||null,nt:()=>n.datastore.serializer.databaseId}),kn(n).start(),n.K_.F_()}function hl(n){return Je(n)&&!kn(n).i_()&&n.B_.size>0}function Je(n){return L(n).k_.size===0}function Jh(n){n.U_=void 0}function um(n){return P(this,null,function*(){n.K_.set("Online")})}function cm(n){return P(this,null,function*(){n.B_.forEach((t,e)=>{ul(n,t)})})}function hm(n,t){return P(this,null,function*(){Jh(n),hl(n)?(n.K_.O_(t),cl(n)):n.K_.set("Unknown")})}function dm(n,t,e){return P(this,null,function*(){if(n.K_.set("Online"),t instanceof Dr&&t.state===2&&t.cause)try{yield function(r,o){return P(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.B_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.B_.delete(c),r.U_.removeTarget(c))})}(n,t)}catch(i){k("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Br(n,i)}else if(t instanceof _n?n.U_.$e(t):t instanceof xr?n.U_.Je(t):n.U_.Ge(t),!e.isEqual(B.min()))try{let i=yield Hh(n.localStore);e.compareTo(i)>=0&&(yield function(o,a){let c=o.U_.it(a);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){let m=o.B_.get(f);m&&o.B_.set(f,m.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,f)=>{let m=o.B_.get(h);if(!m)return;o.B_.set(h,m.withResumeToken(bt.EMPTY_BYTE_STRING,m.snapshotVersion)),Wh(o,h);let E=new Ei(m.target,h,f,m.sequenceNumber);ul(o,E)}),o.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){k("RemoteStore","Failed to raise snapshot:",i),yield Br(n,i)}})}function Br(n,t,e){return P(this,null,function*(){if(!Pn(t))throw t;n.k_.add(1),yield Si(n),n.K_.set("Offline"),e||(e=()=>Hh(n.localStore)),n.asyncQueue.enqueueRetryable(()=>P(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield e(),n.k_.delete(1),yield os(n)}))})}function Xh(n,t){return t().catch(e=>Br(n,e,t))}function as(n){return P(this,null,function*(){let t=L(n),e=De(t),i=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;fm(t);)try{let r=yield sm(t.localStore,i);if(r===null){t.L_.length===0&&e.a_();break}i=r.batchId,pm(t,r)}catch(r){yield Br(t,r)}Yh(t)&&Zh(t)})}function fm(n){return Je(n)&&n.L_.length<10}function pm(n,t){n.L_.push(t);let e=De(n);e.s_()&&e.f_&&e.g_(t.mutations)}function Yh(n){return Je(n)&&!De(n).i_()&&n.L_.length>0}function Zh(n){De(n).start()}function mm(n){return P(this,null,function*(){De(n).w_()})}function gm(n){return P(this,null,function*(){let t=De(n);for(let e of n.L_)t.g_(e.mutations)})}function _m(n,t,e){return P(this,null,function*(){let i=n.L_.shift(),r=Ko.from(i,t,e);yield Xh(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield as(n)})}function ym(n,t){return P(this,null,function*(){t&&De(n).f_&&(yield function(i,r){return P(this,null,function*(){if(function(a){return Np(a)&&a!==C.ABORTED}(r.code)){let o=i.L_.shift();De(i).__(),yield Xh(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield as(i)}})}(n,t)),Yh(n)&&Zh(n)})}function sh(n,t){return P(this,null,function*(){let e=L(n);e.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let i=Je(e);e.k_.add(3),yield Si(e),i&&e.K_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.k_.delete(3),yield os(e)})}function vm(n,t){return P(this,null,function*(){let e=L(n);t?(e.k_.delete(2),yield os(e)):t||(e.k_.add(2),yield Si(e),e.K_.set("Unknown"))})}function kn(n){return n.W_||(n.W_=function(e,i,r){let o=L(e);return o.b_(),new Da(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Ro:um.bind(null,n),mo:cm.bind(null,n),po:hm.bind(null,n),R_:dm.bind(null,n)}),n.q_.push(t=>P(this,null,function*(){t?(n.W_.__(),hl(n)?cl(n):n.K_.set("Unknown")):(yield n.W_.stop(),Jh(n))}))),n.W_}function De(n){return n.G_||(n.G_=function(e,i,r){let o=L(e);return o.b_(),new Sa(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:mm.bind(null,n),po:ym.bind(null,n),p_:gm.bind(null,n),y_:_m.bind(null,n)}),n.q_.push(t=>P(this,null,function*(){t?(n.G_.__(),yield as(n)):(yield n.G_.stop(),n.L_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))}))),n.G_}var Na=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let a=Date.now()+i,c=new n(t,e,a,r,o);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(C.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dl(n,t){if(ce("AsyncQueue",`${t}: ${n}`),Pn(n))return new R(C.UNAVAILABLE,`${t}: ${n}`);throw n}var qr=class n{static emptySet(t){return new n(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||F.comparator(e.key,i.key):(e,i)=>F.comparator(e.key,i.key),this.keyedMap=di(),this.sortedSet=new ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var zr=class{constructor(){this.z_=new ot(F.comparator)}track(t){let e=t.doc.key,i=this.z_.get(e);i?t.type!==0&&i.type===3?this.z_=this.z_.insert(e,t):t.type===3&&i.type!==1?this.z_=this.z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.z_=this.z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.z_=this.z_.remove(e):t.type===1&&i.type===2?this.z_=this.z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):O():this.z_=this.z_.insert(e,t)}j_(){let t=[];return this.z_.inorderTraversal((e,i)=>{t.push(i)}),t}},xn=class n{constructor(t,e,i,r,o,a,c,h,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(t,e,i,r,o){let a=[];return e.forEach(c=>{a.push({type:0,doc:c})}),new n(t,e,qr.emptySet(e),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&is(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Ma=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}},Fa=class{constructor(){this.queries=oh(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(e,i){let r=L(e),o=r.queries;r.queries=oh(),o.forEach((a,c)=>{for(let h of c.J_)h.onError(i)})})(this,new R(C.ABORTED,"Firestore shutting down"))}};function oh(){return new fe(n=>Ch(n),is)}function td(n,t){return P(this,null,function*(){let e=L(n),i=3,r=t.query,o=e.queries.get(r);o?!o.Y_()&&t.Z_()&&(i=2):(o=new Ma,i=t.Z_()?0:1);try{switch(i){case 0:o.H_=yield e.onListen(r,!0);break;case 1:o.H_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(a){let c=dl(a,`Initialization of query '${fn(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,o),o.J_.push(t),t.ea(e.onlineState),o.H_&&t.ta(o.H_)&&fl(e)})}function ed(n,t){return P(this,null,function*(){let e=L(n),i=t.query,r=3,o=e.queries.get(i);if(o){let a=o.J_.indexOf(t);a>=0&&(o.J_.splice(a,1),o.J_.length===0?r=t.Z_()?0:1:!o.Y_()&&t.Z_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function wm(n,t){let e=L(n),i=!1;for(let r of t){let o=r.query,a=e.queries.get(o);if(a){for(let c of a.J_)c.ta(r)&&(i=!0);a.H_=r}}i&&fl(e)}function Im(n,t,e){let i=L(n),r=i.queries.get(t);if(r)for(let o of r.J_)o.onError(e);i.queries.delete(t)}function fl(n){n.X_.forEach(t=>{t.next()})}var Oa,ah;(ah=Oa||(Oa={})).na="default",ah.Cache="cache";var Ur=class{constructor(t,e,i){this.query=t,this.ra=e,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new xn(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ia?this.oa(t)&&(this.ra.next(t),e=!0):this._a(t,this.onlineState)&&(this.aa(t),e=!0),this.sa=t,e}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let e=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),e=!0),e}_a(t,e){if(!t.fromCache||!this.Z_())return!0;let i=e!=="Offline";return(!this.options.ua||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}oa(t){if(t.docChanges.length>0)return!0;let e=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}aa(t){t=xn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==Oa.Cache}};var Gr=class{constructor(t){this.key=t}},$r=class{constructor(t){this.key=t}},La=class{constructor(t,e){this.query=t,this.da=e,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=z(),this.mutatedKeys=z(),this.Va=Vh(t),this.ma=new qr(this.Va)}get fa(){return this.da}ga(t,e){let i=e?e.pa:new zr,r=e?e.ma:this.ma,o=e?e.mutatedKeys:this.mutatedKeys,a=r,c=!1,h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((m,E)=>{let b=r.get(m),V=rs(this.query,E)?E:null,N=!!b&&this.mutatedKeys.has(b.key),M=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations),S=!1;b&&V?b.data.isEqual(V.data)?N!==M&&(i.track({type:3,doc:V}),S=!0):this.ya(b,V)||(i.track({type:2,doc:V}),S=!0,(h&&this.Va(V,h)>0||f&&this.Va(V,f)<0)&&(c=!0)):!b&&V?(i.track({type:0,doc:V}),S=!0):b&&!V&&(i.track({type:1,doc:b}),S=!0,(h||f)&&(c=!0)),S&&(V?(a=a.add(V),o=M?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{ma:a,pa:i,ss:c,mutatedKeys:o}}ya(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;let a=t.pa.j_();a.sort((m,E)=>function(V,N){let M=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return M(V)-M(N)}(m.type,E.type)||this.Va(m.doc,E.doc)),this.wa(i),r=r!=null&&r;let c=e&&!r?this.Sa():[],h=this.Ra.size===0&&this.current&&!r?1:0,f=h!==this.Aa;return this.Aa=h,a.length!==0||f?{snapshot:new xn(this.query,t.ma,o,a,t.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new zr,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.da.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(e=>this.da=this.da.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.da=this.da.delete(e)),this.current=t.current)}Sa(){if(!this.current)return[];let t=this.Ra;this.Ra=z(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});let e=[];return t.forEach(i=>{this.Ra.has(i)||e.push(new $r(i))}),this.Ra.forEach(i=>{t.has(i)||e.push(new Gr(i))}),e}va(t){this.da=t.ds,this.Ra=z();let e=this.ga(t.documents);return this.applyChanges(e,!0)}Ca(){return xn.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},Ba=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},qa=class{constructor(t){this.key=t,this.Fa=!1}},za=class{constructor(t,e,i,r,o,a){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new fe(c=>Ch(c),is),this.Oa=new Map,this.Na=new Set,this.La=new ot(F.comparator),this.Ba=new Map,this.ka=new bi,this.qa={},this.Qa=new Map,this.Ka=Ti.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function Em(n,t,e=!0){return P(this,null,function*(){let i=ad(n),r,o=i.xa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Ca()):r=yield nd(i,t,e,!0),r})}function Tm(n,t){return P(this,null,function*(){let e=ad(n);yield nd(e,t,!0,!1)})}function nd(n,t,e,i){return P(this,null,function*(){let r=yield om(n.localStore,Jt(t)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,e),c;return i&&(c=yield bm(n,t,o,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&Qh(n.remoteStore,r),c})}function bm(n,t,e,i,r){return P(this,null,function*(){n.Ua=(E,b,V)=>function(M,S,j,K){return P(this,null,function*(){let Q=S.view.ga(j);Q.ss&&(Q=yield rh(M.localStore,S.query,!1).then(({documents:w})=>S.view.ga(w,Q)));let it=K&&K.targetChanges.get(S.targetId),kt=K&&K.targetMismatches.get(S.targetId)!=null,Y=S.view.applyChanges(Q,M.isPrimaryClient,it,kt);return uh(M,S.targetId,Y.ba),Y.snapshot})}(n,E,b,V);let o=yield rh(n.localStore,t,!0),a=new La(t,o.ds),c=a.ga(o.documents),h=Ii.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),f=a.applyChanges(c,n.isPrimaryClient,h);uh(n,e,f.ba);let m=new Ba(t,e,a);return n.xa.set(t,m),n.Oa.has(e)?n.Oa.get(e).push(t):n.Oa.set(e,[t]),f.snapshot})}function Am(n,t,e){return P(this,null,function*(){let i=L(n),r=i.xa.get(t),o=i.Oa.get(r.targetId);if(o.length>1)return i.Oa.set(r.targetId,o.filter(a=>!is(a,t))),void i.xa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ba(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&ll(i.remoteStore,r.targetId),Ua(i,r.targetId)}).catch(Rn))):(Ua(i,r.targetId),yield ba(i.localStore,r.targetId,!0))})}function Cm(n,t){return P(this,null,function*(){let e=L(n),i=e.xa.get(t),r=e.Oa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),ll(e.remoteStore,i.targetId))})}function Vm(n,t,e){return P(this,null,function*(){let i=Nm(n);try{let r=yield function(a,c){let h=L(a),f=yt.now(),m=c.reduce((V,N)=>V.add(N.key),z()),E,b;return h.persistence.runTransaction("Locally write mutations","readwrite",V=>{let N=pe(),M=z();return h.hs.getEntries(V,m).next(S=>{N=S,N.forEach((j,K)=>{K.isValidDocument()||(M=M.add(j))})}).next(()=>h.localDocuments.getOverlayedDocuments(V,N)).next(S=>{E=S;let j=[];for(let K of c){let Q=kp(K,E.get(K.key).overlayedDocument);Q!=null&&j.push(new me(K.key,Q,vh(Q.value.mapValue),ue.exists(!0)))}return h.mutationQueue.addMutationBatch(V,f,j,c)}).next(S=>{b=S;let j=S.applyToLocalDocumentSet(E,M);return h.documentOverlayCache.saveOverlays(V,S.batchId,j)})}).then(()=>({batchId:b.batchId,changes:Dh(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,h){let f=a.qa[a.currentUser.toKey()];f||(f=new ot(U)),f=f.insert(c,h),a.qa[a.currentUser.toKey()]=f}(i,r.batchId,e),yield Ri(i,r.changes),yield as(i.remoteStore)}catch(r){let o=dl(r,"Failed to persist write");e.reject(o)}})}function id(n,t){return P(this,null,function*(){let e=L(n);try{let i=yield im(e.localStore,t);t.targetChanges.forEach((r,o)=>{let a=e.Ba.get(o);a&&(W(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Fa=!0:r.modifiedDocuments.size>0?W(a.Fa):r.removedDocuments.size>0&&(W(a.Fa),a.Fa=!1))}),yield Ri(e,i,t)}catch(i){yield Rn(i)}})}function lh(n,t,e){let i=L(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.xa.forEach((o,a)=>{let c=a.view.ea(t);c.snapshot&&r.push(c.snapshot)}),function(a,c){let h=L(a);h.onlineState=c;let f=!1;h.queries.forEach((m,E)=>{for(let b of E.J_)b.ea(c)&&(f=!0)}),f&&fl(h)}(i.eventManager,t),r.length&&i.Ma.R_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function xm(n,t,e){return P(this,null,function*(){let i=L(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Ba.get(t),o=r&&r.key;if(o){let a=new ot(F.comparator);a=a.insert(o,Gt.newNoDocument(o,B.min()));let c=z().add(o),h=new Vr(B.min(),new Map,new ot(U),a,c);yield id(i,h),i.La=i.La.remove(o),i.Ba.delete(t),pl(i)}else yield ba(i.localStore,t,!1).then(()=>Ua(i,t,e)).catch(Rn)})}function Dm(n,t){return P(this,null,function*(){let e=L(n),i=t.batch.batchId;try{let r=yield nm(e.localStore,t);sd(e,i,null),rd(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ri(e,r)}catch(r){yield Rn(r)}})}function Sm(n,t,e){return P(this,null,function*(){let i=L(n);try{let r=yield function(a,c){let h=L(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next(E=>(W(E!==null),m=E.keys(),h.mutationQueue.removeMutationBatch(f,E))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,t);sd(i,t,e),rd(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ri(i,r)}catch(r){yield Rn(r)}})}function rd(n,t){(n.Qa.get(t)||[]).forEach(e=>{e.resolve()}),n.Qa.delete(t)}function sd(n,t,e){let i=L(n),r=i.qa[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.qa[i.currentUser.toKey()]=r}}function Ua(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Oa.get(t))n.xa.delete(i),e&&n.Ma.Wa(i,e);n.Oa.delete(t),n.isPrimaryClient&&n.ka.yr(t).forEach(i=>{n.ka.containsKey(i)||od(n,i)})}function od(n,t){n.Na.delete(t.path.canonicalString());let e=n.La.get(t);e!==null&&(ll(n.remoteStore,e),n.La=n.La.remove(t),n.Ba.delete(e),pl(n))}function uh(n,t,e){for(let i of e)i instanceof Gr?(n.ka.addReference(i.key,t),Rm(n,i)):i instanceof $r?(k("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,t),n.ka.containsKey(i.key)||od(n,i.key)):O()}function Rm(n,t){let e=t.key,i=e.path.canonicalString();n.La.get(e)||n.Na.has(i)||(k("SyncEngine","New document in limbo: "+e),n.Na.add(i),pl(n))}function pl(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){let t=n.Na.values().next().value;n.Na.delete(t);let e=new F(nt.fromString(t)),i=n.Ka.next();n.Ba.set(i,new qa(e)),n.La=n.La.insert(e,i),Qh(n.remoteStore,new Ei(Jt(sl(e.path)),i,"TargetPurposeLimboResolution",tl.oe))}}function Ri(n,t,e){return P(this,null,function*(){let i=L(n),r=[],o=[],a=[];i.xa.isEmpty()||(i.xa.forEach((c,h)=>{a.push(i.Ua(h,t,e).then(f=>{var m;if((f||e)&&i.isPrimaryClient){let E=f?!f.fromCache:(m=e?.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(f){r.push(f);let E=wa.zi(h.targetId,f);o.push(E)}}))}),yield Promise.all(a),i.Ma.R_(r),yield function(h,f){return P(this,null,function*(){let m=L(h);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>x.forEach(f,b=>x.forEach(b.Wi,V=>m.persistence.referenceDelegate.addReference(E,b.targetId,V)).next(()=>x.forEach(b.Gi,V=>m.persistence.referenceDelegate.removeReference(E,b.targetId,V)))))}catch(E){if(!Pn(E))throw E;k("LocalStore","Failed to update sequence numbers: "+E)}for(let E of f){let b=E.targetId;if(!E.fromCache){let V=m.us.get(b),N=V.snapshotVersion,M=V.withLastLimboFreeSnapshotVersion(N);m.us=m.us.insert(b,M)}}})}(i.localStore,o))})}function Pm(n,t){return P(this,null,function*(){let e=L(n);if(!e.currentUser.isEqual(t)){k("SyncEngine","User change. New user:",t.toKey());let i=yield Kh(e.localStore,t);e.currentUser=t,function(o,a){o.Qa.forEach(c=>{c.forEach(h=>{h.reject(new R(C.CANCELLED,a))})}),o.Qa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ri(e,i.Ts)}})}function km(n,t){let e=L(n),i=e.Ba.get(t);if(i&&i.Fa)return z().add(i.key);{let r=z(),o=e.Oa.get(t);if(!o)return r;for(let a of o){let c=e.xa.get(a);r=r.unionWith(c.view.fa)}return r}}function ad(n){let t=L(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=id.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=km.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xm.bind(null,t),t.Ma.R_=wm.bind(null,t.eventManager),t.Ma.Wa=Im.bind(null,t.eventManager),t}function Nm(n){let t=L(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sm.bind(null,t),t}var ld=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return P(this,null,function*(){this.serializer=ss(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),yield this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)})}Ja(e,i){return null}Ya(e,i){return null}Ha(e){return em(this.persistence,new Ea,e.initialUser,this.serializer)}ja(e){return new kr(va.ei,this.serializer)}za(e){return new Aa}terminate(){return P(this,null,function*(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Ga=class extends ld{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,e){W(this.persistence.referenceDelegate instanceof Nr);let i=this.persistence.referenceDelegate.garbageCollector;return new oa(i,t.asyncQueue,e)}ja(t){let e=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new kr(i=>Nr.ei(i,e),this.serializer)}};var Mm=(()=>{class n{initialize(e,i){return P(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pm.bind(null,this.syncEngine),yield vm(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Fa}()}createDatastore(e){let i=ss(e.databaseInfo.databaseId),r=function(a){return new xa(a)}(e.databaseInfo);return function(a,c,h,f){return new Ra(a,c,h,f)}(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return function(r,o,a,c,h){return new ka(r,o,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,i=>lh(this.syncEngine,i,0),function(){return Fr.p()?new Fr:new Ca}())}createSyncEngine(e,i){return function(o,a,c,h,f,m,E){let b=new za(o,a,c,h,f,m);return E&&(b.$a=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return P(this,null,function*(){var e,i;yield function(o){return P(this,null,function*(){let a=L(o);k("RemoteStore","RemoteStore shutting down."),a.k_.add(5),yield Si(a),a.Q_.shutdown(),a.K_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var jr=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):ce("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,e){setTimeout(()=>{this.muted||t(e)},0)}};var $a=class{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=Ir.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,a=>P(this,null,function*(){k("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(i,a=>(k("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>P(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=dl(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function yo(n,t){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>P(this,null,function*(){i.isEqual(r)||(yield Kh(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function ch(n,t){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield Fm(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>sh(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>sh(t.remoteStore,r)),n._onlineComponents=t})}function Fm(n){return P(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yo(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!function(r){return r.name==="FirebaseError"?r.code===C.FAILED_PRECONDITION||r.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;vn("Error using user provided cache. Falling back to memory cache: "+e),yield yo(n,new ld)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield yo(n,new Ga(void 0));return n._offlineComponents})}function ud(n){return P(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield ch(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield ch(n,new Mm))),n._onlineComponents})}function Om(n){return ud(n).then(t=>t.syncEngine)}function cd(n){return P(this,null,function*(){let t=yield ud(n),e=t.eventManager;return e.onListen=Em.bind(null,t.syncEngine),e.onUnlisten=Am.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Tm.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Cm.bind(null,t.syncEngine),e})}function Lm(n,t,e={}){let i=new Ut;return n.asyncQueue.enqueueAndForget(()=>P(this,null,function*(){return function(o,a,c,h,f){let m=new jr({next:b=>{m.eu(),a.enqueueAndForget(()=>ed(o,E));let V=b.docs.has(c);!V&&b.fromCache?f.reject(new R(C.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&b.fromCache&&h&&h.source==="server"?f.reject(new R(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),E=new Ur(sl(c.path),m,{includeMetadataChanges:!0,ua:!0});return td(o,E)}(yield cd(n),n.asyncQueue,t,e,i)})),i.promise}function Bm(n,t,e={}){let i=new Ut;return n.asyncQueue.enqueueAndForget(()=>P(this,null,function*(){return function(o,a,c,h,f){let m=new jr({next:b=>{m.eu(),a.enqueueAndForget(()=>ed(o,E)),b.fromCache&&h.source==="server"?f.reject(new R(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),E=new Ur(c,m,{includeMetadataChanges:!0,ua:!0});return td(o,E)}(yield cd(n),n.asyncQueue,t,e,i)})),i.promise}function hd(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var hh=new Map;function dd(n,t,e){if(!e)throw new R(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function qm(n,t,e,i){if(t===!0&&i===!0)throw new R(C.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function dh(n){if(!F.isDocumentKey(n))throw new R(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fh(n){if(F.isDocumentKey(n))throw new R(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ls(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":O()}function ge(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new R(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=ls(n);throw new R(C.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var Kr=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new R(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new R(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hd((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new R(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new R(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new R(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Dn=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kr({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new R(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new R(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kr(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new vo;switch(i.type){case"firstParty":return new To(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new R(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return P(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=hh.get(e);i&&(k("ComponentProvider","Removing Datastore"),hh.delete(e),i.terminate())}(this),Promise.resolve()}};function fd(n,t,e,i={}){var r;let o=(n=ge(n,Dn))._getSettings(),a=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,h;if(typeof i.mockUserToken=="string")c=i.mockUserToken,h=pt.MOCK_USER;else{c=ic(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new R(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new pt(f)}n._authCredentials=new wo(new wr(c,h))}}var Qe=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},Dt=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ce(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},Ce=class n extends Qe{constructor(t,e,i){super(t,e,sl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Dt(this.firestore,null,new F(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function pd(n,t,...e){if(n=Oe(n),dd("collection","path",t),n instanceof Dn){let i=nt.fromString(t,...e);return fh(i),new Ce(n,null,i)}{if(!(n instanceof Dt||n instanceof Ce))throw new R(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(nt.fromString(t,...e));return fh(i),new Ce(n.firestore,null,i)}}function ml(n,t,...e){if(n=Oe(n),arguments.length===1&&(t=Ir.newId()),dd("doc","path",t),n instanceof Dn){let i=nt.fromString(t,...e);return dh(i),new Dt(n,null,new F(i))}{if(!(n instanceof Dt||n instanceof Ce))throw new R(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(nt.fromString(t,...e));return dh(i),new Dt(n.firestore,n instanceof Ce?n.converter:null,new F(i))}}var Hr=class{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Or(this,"async_queue_retry"),this.fu=()=>{let i=_o();i&&k("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=t;let e=_o();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;let e=_o();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise(()=>{});let e=new Ut;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}wu(){return P(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!Pn(t))throw t;k("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(t){let e=this.gu.then(()=>(this.Ru=!0,t().catch(i=>{this.Au=i,this.Ru=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw ce("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ru=!1,i))));return this.gu=e,e}enqueueAfterDelay(t,e,i){this.pu(),this.mu.indexOf(t)>-1&&(e=0);let r=Na.createAndSchedule(this,t,e,i,o=>this.Su(o));return this.du.push(r),r}pu(){this.Au&&O()}verifyOperationInProgress(){}bu(){return P(this,null,function*(){let t;do t=this.gu,yield t;while(t!==this.gu)})}Du(t){for(let e of this.du)if(e.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.du.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.du)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){let e=this.du.indexOf(t);this.du.splice(e,1)}};var Se=class extends Dn{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Hr,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return P(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Hr(t),this._firestoreClient=void 0,yield t}})}};function md(n,t){let e=typeof n=="object"?n:dc(),i=typeof n=="string"?n:t||"(default)",r=cc(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=nc("firestore");o&&fd(r,...o)}return r}function gl(n){if(n._terminated)throw new R(C.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zm(n),n._firestoreClient}function zm(n){var t,e,i;let r=n._freezeSettings(),o=function(c,h,f,m){return new xo(c,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,hd(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new $a(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){let h=c?._online.build();return{_offline:c?._offline.build(h),_online:h}}(n._componentsProvider))}var Ai=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(bt.fromBase64String(t))}catch(e){throw new R(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(bt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Ci=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new R(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Qr=class{constructor(t){this._methodName=t}};var Vi=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new R(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new R(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return U(this._lat,t._lat)||U(this._long,t._long)}};var xi=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var Um=/^__.*__$/,ja=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new me(t,this.data,this.fieldMask,e,this.fieldTransforms):new He(t,this.data,e,this.fieldTransforms)}};function gd(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}var Ka=class n{constructor(t,e,i,r,o,a){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.xu({path:i,Nu:!1});return r.Lu(t),r}Bu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.xu({path:i,Nu:!1});return r.Fu(),r}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return Wr(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(gd(this.Mu)&&Um.test(t))throw this.qu('Document fields cannot begin and end with "__"')}},Ha=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ss(t)}$u(t,e,i,r=!1){return new Ka({Mu:t,methodName:e,Ku:i,path:Pt.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _l(n){let t=n._freezeSettings(),e=ss(n._databaseId);return new Ha(n._databaseId,!!t.ignoreUndefinedProperties,e)}function _d(n,t,e,i,r,o={}){let a=n.$u(o.merge||o.mergeFields?2:0,t,e,r);wd("Data must be an object, but it was:",a,i);let c=yd(i,a),h,f;if(o.merge)h=new Qt(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let E of o.mergeFields){let b=$m(t,E,e);if(!a.contains(b))throw new R(C.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Km(m,b)||m.push(b)}h=new Qt(m),f=a.fieldTransforms.filter(E=>h.covers(E.field))}else h=null,f=a.fieldTransforms;return new ja(new zt(c),h,f)}function Gm(n,t,e,i=!1){return yl(e,n.$u(i?4:3,t))}function yl(n,t){if(vd(n=Oe(n)))return wd("Unsupported field value:",t,n),yd(n,t);if(n instanceof Qr)return function(i,r){if(!gd(r.Mu))throw r.qu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let h=yl(c,r.ku(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=Oe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xp(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=yt.fromDate(i);return{timestampValue:Rr(r.serializer,o)}}if(i instanceof yt){let o=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rr(r.serializer,o)}}if(i instanceof Vi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ai)return{bytesValue:Bh(r.serializer,i._byteString)};if(i instanceof Dt){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:al(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xi)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.qu("VectorValues must only contain numeric values.");return ol(c.serializer,h)})}}}}}}(i,r);throw r.qu(`Unsupported field value: ${ls(i)}`)}(n,t)}function yd(n,t){let e={};return gh(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):We(n,(i,r)=>{let o=yl(r,t.Ou(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function vd(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Vi||n instanceof Ai||n instanceof Dt||n instanceof Qr||n instanceof xi)}function wd(n,t,e){if(!vd(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=ls(e);throw i==="an object"?t.qu(n+" a custom object"):t.qu(n+" "+i)}}function $m(n,t,e){if((t=Oe(t))instanceof Ci)return t._internalPath;if(typeof t=="string")return Id(n,t);throw Wr("Field path arguments must be of type string or ",n,!1,void 0,e)}var jm=new RegExp("[~\\*/\\[\\]]");function Id(n,t,e){if(t.search(jm)>=0)throw Wr(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Ci(...t.split("."))._internalPath}catch{throw Wr(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Wr(n,t,e,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new R(C.INVALID_ARGUMENT,c+n+h)}function Km(n,t){return n.some(e=>e.isEqual(t))}var Jr=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Qa(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(us("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Qa=class extends Jr{data(){return super.data()}};function us(n,t){return typeof t=="string"?Id(n,t):t instanceof Ci?t._internalPath:t._delegate._internalPath}function Hm(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new R(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Di=class{},Xr=class extends Di{};function Ed(n,t,...e){let i=[];t instanceof Di&&i.push(t),i=i.concat(e),function(o){let a=o.filter(h=>h instanceof Wa).length,c=o.filter(h=>h instanceof Yr).length;if(a>1||a>0&&c>0)throw new R(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Yr=class n extends Xr{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return Ad(t._query,e),new Qe(t.firestore,t.converter,zo(t._query,e))}_parse(t){let e=_l(t.firestore);return function(o,a,c,h,f,m,E){let b;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new R(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){mh(E,m);let V=[];for(let N of E)V.push(ph(h,o,N));b={arrayValue:{values:V}}}else b=ph(h,o,E)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||mh(E,m),b=Gm(c,a,E,m==="in"||m==="not-in");return ct.create(f,m,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function Td(n,t,e){let i=t,r=us("where",n);return Yr._create(r,i,e)}var Wa=class n extends Di{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:$t.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let h of c)Ad(a,h),a=zo(a,h)}(t._query,e),new Qe(t.firestore,t.converter,zo(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ja=class n extends Xr{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,o,a){if(r.startAt!==null)throw new R(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new R(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $e(o,a)}(t._query,this._field,this._direction);return new Qe(t.firestore,t.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new xe(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function bd(n,t="asc"){let e=t,i=us("orderBy",n);return Ja._create(i,e)}function ph(n,t,e){if(typeof(e=Oe(e))=="string"){if(e==="")throw new R(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ah(t)&&e.indexOf("/")!==-1)throw new R(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(nt.fromString(e));if(!F.isDocumentKey(i))throw new R(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qc(n,new F(i))}if(e instanceof Dt)return qc(n,e._key);throw new R(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ls(e)}.`)}function mh(n,t){if(!Array.isArray(n)||n.length===0)throw new R(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ad(n,t){let e=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new R(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new R(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Xa=class{convertValue(t,e="none"){switch(Ve(t)){case 0:return null;case 1:return t.booleanValue;case 2:return et(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(de(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw O()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return We(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){var e,i,r;let o=(r=(i=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>et(a.doubleValue));return new xi(o)}convertGeoPoint(t){return new Vi(et(t.latitude),et(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=ns(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(yi(t));default:return null}}convertTimestamp(t){let e=he(t);return new yt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=nt.fromString(t);W(jh(i));let r=new Ar(i.get(1),i.get(3)),o=new F(i.popFirst(5));return r.isEqual(e)||ce(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function Cd(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var ze=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Zr=class extends Jr{constructor(t,e,i,r,o,a){super(t,e,i,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new yn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(us("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},yn=class extends Zr{data(t={}){return super.data(t)}},Ya=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ze(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new yn(this._firestore,this._userDataWriter,i.key,i,new ze(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new R(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let h=new yn(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ze(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let h=new yn(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ze(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:Qm(c.type),doc:h,oldIndex:f,newIndex:m}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Qm(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}function Vd(n){n=ge(n,Dt);let t=ge(n.firestore,Se);return Lm(gl(t),n._key).then(e=>Wm(t,n,e))}var ts=class extends Xa{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ai(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Dt(this.firestore,null,e)}};function xd(n){n=ge(n,Qe);let t=ge(n.firestore,Se),e=gl(t),i=new ts(t);return Hm(n._query),Bm(e,n._query).then(r=>new Ya(t,i,n,r))}function Dd(n,t,e){n=ge(n,Dt);let i=ge(n.firestore,Se),r=Cd(n.converter,t,e);return vl(i,[_d(_l(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,ue.none())])}function Sd(n){return vl(ge(n.firestore,Se),[new wi(n._key,ue.none())])}function Rd(n,t){let e=ge(n.firestore,Se),i=ml(n),r=Cd(n.converter,t);return vl(e,[_d(_l(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ue.exists(!1))]).then(()=>i)}function vl(n,t){return function(i,r){let o=new Ut;return i.asyncQueue.enqueueAndForget(()=>P(this,null,function*(){return Vm(yield Om(i),r,o)})),o.promise}(gl(n),t)}function Wm(n,t,e){let i=e.docs.get(t._key),r=new ts(n);return new Zr(n,r,t._key,i,new ze(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Sn=r})(hc),uc(new ac("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new Se(new Io(i.getProvider("auth-internal")),new Ao(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new R(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ar(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:e},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ui(Mc,"4.7.5",t),ui(Mc,"4.7.5","esm2017")})();var Pi=class{constructor(t){return t}},Pd="firestore",wl=class{constructor(){return mc(Pd)}};var Il=new ne("angularfire2.firestore-instances");function Jm(n,t){let e=pc(Pd,n,t);return e&&new Pi(e)}function Xm(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Pi(i)}}var Ym={provide:wl,deps:[[new ii,Il]]},Zm={provide:Pi,useFactory:Jm,deps:[[new ii,Il],yc]};function pv(n,...t){return ui("angularfire",fc.full,"fst"),Bu([Zm,Ym,{provide:Il,useFactory:Xm(n),multi:!0,deps:[ir,$s,_c,vc,[new ii,wc],[new ii,gc],...t]}])}var mv=Ot(Rd,!0);var gv=Ot(pd,!0);var _v=Ot(Sd,!0);var yv=Ot(ml,!0);var vv=Ot(Vd,!0);var wv=Ot(xd,!0);var Iv=Ot(md,!0);var Ev=Ot(bd,!0);var Tv=Ot(Ed,!0);var bv=Ot(Dd,!0);var Av=Ot(Td,!0);var Ud=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(tt(Ks),tt(js))};static \u0275dir=xt({type:n})}return n})(),tg=(()=>{class n extends Ud{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275dir=xt({type:n,features:[dt]})}return n})(),Cl=new ne("");var eg={provide:Cl,useExisting:ei(()=>Gd),multi:!0};function ng(){let n=Xs()?Xs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ig=new ne(""),Gd=(()=>{class n extends Ud{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!ng())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(tt(Ks),tt(js),tt(ig,8))};static \u0275dir=xt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&qt("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[ae([eg]),dt]})}return n})();function Re(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function $d(n){return n!=null&&typeof n.length=="number"}var Vl=new ne(""),xl=new ne(""),rg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,kd=class{static min(t){return sg(t)}static max(t){return og(t)}static required(t){return ag(t)}static requiredTrue(t){return lg(t)}static email(t){return ug(t)}static minLength(t){return cg(t)}static maxLength(t){return hg(t)}static pattern(t){return dg(t)}static nullValidator(t){return jd(t)}static compose(t){return Xd(t)}static composeAsync(t){return Zd(t)}};function sg(n){return t=>{if(Re(t.value)||Re(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function og(n){return t=>{if(Re(t.value)||Re(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function ag(n){return Re(n.value)?{required:!0}:null}function lg(n){return n.value===!0?null:{required:!0}}function ug(n){return Re(n.value)||rg.test(n.value)?null:{email:!0}}function cg(n){return t=>Re(t.value)||!$d(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function hg(n){return t=>$d(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function dg(n){if(!n)return jd;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Re(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function jd(n){return null}function Kd(n){return n!=null}function Hd(n){return zu(n)?Fu(n):n}function Qd(n){let t={};return n.forEach(e=>{t=e!=null?ht(ht({},t),e):t}),Object.keys(t).length===0?null:t}function Wd(n,t){return t.map(e=>e(n))}function fg(n){return!n.validate}function Jd(n){return n.map(t=>fg(t)?t:e=>t.validate(e))}function Xd(n){if(!n)return null;let t=n.filter(Kd);return t.length==0?null:function(e){return Qd(Wd(e,t))}}function Yd(n){return n!=null?Xd(Jd(n)):null}function Zd(n){if(!n)return null;let t=n.filter(Kd);return t.length==0?null:function(e){let i=Wd(e,t).map(Hd);return Lu(i).pipe(Ou(Qd))}}function tf(n){return n!=null?Zd(Jd(n)):null}function Nd(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function ef(n){return n._rawValidators}function nf(n){return n._rawAsyncValidators}function El(n){return n?Array.isArray(n)?n:[n]:[]}function hs(n,t){return Array.isArray(n)?n.includes(t):n===t}function Md(n,t){let e=El(t);return El(n).forEach(r=>{hs(e,r)||e.push(r)}),e}function Fd(n,t){return El(t).filter(e=>!hs(n,e))}var ds=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Yd(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Xe=class extends ds{name;get formDirective(){return null}get path(){return null}},Ye=class extends ds{_parent=null;name=null;valueAccessor=null},fs=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pg={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$v=jt(ht({},pg),{"[class.ng-submitted]":"isSubmitted"}),jv=(()=>{class n extends fs{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(tt(Ye,2))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&si("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[dt]})}return n})(),Kv=(()=>{class n extends fs{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(tt(Xe,10))};static \u0275dir=xt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&si("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[dt]})}return n})();var ki="VALID",cs="INVALID",Nn="PENDING",Ni="DISABLED",Pe=class{},ps=class extends Pe{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Mi=class extends Pe{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Fi=class extends Pe{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Mn=class extends Pe{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Tl=class extends Pe{source;constructor(t){super(),this.source=t}},bl=class extends Pe{source;constructor(t){super(),this.source=t}};function rf(n){return(ys(n)?n.validators:n)||null}function mg(n){return Array.isArray(n)?Yd(n):n||null}function sf(n,t){return(ys(t)?t.asyncValidators:n)||null}function gg(n){return Array.isArray(n)?tf(n):n||null}function ys(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function _g(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new er(1e3,"");if(!i[e])throw new er(1001,"")}function yg(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new er(1002,"")})}var ms=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return be(this.statusReactive)}set status(t){be(()=>this.statusReactive.set(t))}_status=ai(()=>this.statusReactive());statusReactive=ri(void 0);get valid(){return this.status===ki}get invalid(){return this.status===cs}get pending(){return this.status==Nn}get disabled(){return this.status===Ni}get enabled(){return this.status!==Ni}errors;get pristine(){return be(this.pristineReactive)}set pristine(t){be(()=>this.pristineReactive.set(t))}_pristine=ai(()=>this.pristineReactive());pristineReactive=ri(!0);get dirty(){return!this.pristine}get touched(){return be(this.touchedReactive)}set touched(t){be(()=>this.touchedReactive.set(t))}_touched=ai(()=>this.touchedReactive());touchedReactive=ri(!1);get untouched(){return!this.touched}_events=new Mu;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Md(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Md(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Fd(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Fd(t,this._rawAsyncValidators))}hasValidator(t){return hs(this._rawValidators,t)}hasAsyncValidator(t){return hs(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(jt(ht({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Fi(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Fi(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(jt(ht({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Mi(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Mi(!0,i))}markAsPending(t={}){this.status=Nn;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Mn(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(jt(ht({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ni,this.errors=null,this._forEachChild(r=>{r.disable(jt(ht({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ps(this.value,i)),this._events.next(new Mn(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(jt(ht({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ki,this._forEachChild(i=>{i.enable(jt(ht({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(jt(ht({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ki||this.status===Nn)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ps(this.value,e)),this._events.next(new Mn(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(jt(ht({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ni:ki}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Nn,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=Hd(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Mn(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Vt,this.statusChanges=new Vt}_calculateStatus(){return this._allControlsDisabled()?Ni:this.errors?cs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nn)?Nn:this._anyControlsHaveStatus(cs)?cs:ki}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Mi(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Fi(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ys(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=mg(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=gg(this._rawAsyncValidators)}},Od=class extends ms{constructor(t,e,i){super(rf(e),sf(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){yg(this,!0,t),Object.keys(t).forEach(i=>{_g(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Dl=new ne("CallSetDisabledState",{providedIn:"root",factory:()=>Sl}),Sl="always";function of(n,t){return[...t.path,n]}function Al(n,t,e=Sl){Rl(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),wg(n,t),Eg(n,t),Ig(n,t),vg(n,t)}function Ld(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),_s(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function gs(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function vg(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Rl(n,t){let e=ef(n);t.validator!==null?n.setValidators(Nd(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=nf(n);t.asyncValidator!==null?n.setAsyncValidators(Nd(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();gs(t._rawValidators,r),gs(t._rawAsyncValidators,r)}function _s(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=ef(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=nf(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return gs(t._rawValidators,i),gs(t._rawAsyncValidators,i),e}function wg(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&af(n,t)})}function Ig(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&af(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function af(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Eg(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Tg(n,t){n==null,Rl(n,t)}function bg(n,t){return _s(n,t)}function lf(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Ag(n){return Object.getPrototypeOf(n.constructor)===tg}function Cg(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function uf(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Gd?e=o:Ag(o)?i=o:r=o}),r||i||e||null}function Vg(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Bd(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function qd(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var cf=class extends ms{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(rf(e),sf(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ys(e)&&(e.nonNullable||e.initialValueIsDefault)&&(qd(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Bd(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Bd(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){qd(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var xg=n=>n instanceof cf;var Dg={provide:Ye,useExisting:ei(()=>Pl)},zd=Promise.resolve(),Pl=(()=>{class n extends Ye{_changeDetectorRef;callSetDisabledState;control=new cf;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Vt;constructor(e,i,r,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uf(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),lf(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Al(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){zd.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&at(i);zd.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?of(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(tt(Xe,9),tt(Vl,10),tt(xl,10),tt(Cl,10),tt(Wu,8),tt(Dl,8))};static \u0275dir=xt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ae([Dg]),dt,rn]})}return n})(),Qv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=xt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var hf=new ne("");var Sg={provide:Xe,useExisting:ei(()=>Rg)},Rg=(()=>{class n extends Xe{callSetDisabledState;get submitted(){return be(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ai(()=>this._submittedReactive());_submittedReactive=ri(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Vt;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_s(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Al(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Ld(e.control||null,e,!1),Vg(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Cg(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Tl(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new bl(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Ld(i||null,e),xg(r)&&(Al(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Tg(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&bg(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rl(this.form,this),this._oldForm&&_s(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(tt(Vl,10),tt(xl,10),tt(Dl,8))};static \u0275dir=xt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&qt("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ae([Sg]),dt,rn]})}return n})();var Pg={provide:Ye,useExisting:ei(()=>kg)},kg=(()=>{class n extends Ye{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Vt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=uf(this,o)}ngOnChanges(e){this._added||this._setUpControl(),lf(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return of(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(tt(Xe,13),tt(Vl,10),tt(xl,10),tt(Cl,10),tt(hf,8))};static \u0275dir=xt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ae([Pg]),dt,rn]})}return n})();var Ng=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ee({type:n});static \u0275inj=Ie({})}return n})();var Wv=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:hf,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Dl,useValue:e.callSetDisabledState??Sl}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ee({type:n});static \u0275inj=Ie({imports:[Ng]})}return n})();var df=(()=>{class n extends hr{pathId;ngOnInit(){this.pathId="url(#"+Le()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275cmp=sn({type:n,selectors:[["WindowMaximizeIcon"]],features:[dt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14ZM9.77805 7.42192C9.89013 7.534 10.0415 7.59788 10.2 7.59995C10.3585 7.59788 10.5099 7.534 10.622 7.42192C10.7341 7.30985 10.798 7.15844 10.8 6.99995V3.94242C10.8066 3.90505 10.8096 3.86689 10.8089 3.82843C10.8079 3.77159 10.7988 3.7157 10.7824 3.6623C10.756 3.55552 10.701 3.45698 10.622 3.37798C10.5099 3.2659 10.3585 3.20202 10.2 3.19995H7.00002C6.84089 3.19995 6.68828 3.26317 6.57576 3.37569C6.46324 3.48821 6.40002 3.64082 6.40002 3.79995C6.40002 3.95908 6.46324 4.11169 6.57576 4.22422C6.68828 4.33674 6.84089 4.39995 7.00002 4.39995H8.80006L6.19997 7.00005C6.10158 7.11005 6.04718 7.25246 6.04718 7.40005C6.04718 7.54763 6.10158 7.69004 6.19997 7.80005C6.30202 7.91645 6.44561 7.98824 6.59997 8.00005C6.75432 7.98824 6.89791 7.91645 6.99997 7.80005L9.60002 5.26841V6.99995C9.6021 7.15844 9.66598 7.30985 9.77805 7.42192ZM1.4 14H3.8C4.17066 13.9979 4.52553 13.8498 4.78763 13.5877C5.04973 13.3256 5.1979 12.9707 5.2 12.6V10.2C5.1979 9.82939 5.04973 9.47452 4.78763 9.21242C4.52553 8.95032 4.17066 8.80215 3.8 8.80005H1.4C1.02934 8.80215 0.674468 8.95032 0.412371 9.21242C0.150274 9.47452 0.00210008 9.82939 0 10.2V12.6C0.00210008 12.9707 0.150274 13.3256 0.412371 13.5877C0.674468 13.8498 1.02934 13.9979 1.4 14ZM1.25858 10.0586C1.29609 10.0211 1.34696 10 1.4 10H3.8C3.85304 10 3.90391 10.0211 3.94142 10.0586C3.97893 10.0961 4 10.147 4 10.2V12.6C4 12.6531 3.97893 12.704 3.94142 12.7415C3.90391 12.779 3.85304 12.8 3.8 12.8H1.4C1.34696 12.8 1.29609 12.779 1.25858 12.7415C1.22107 12.704 1.2 12.6531 1.2 12.6V10.2C1.2 10.147 1.22107 10.0961 1.25858 10.0586Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nr(),ft(0,"svg",0)(1,"g"),Nt(2,"path",1),_t(),ft(3,"defs")(4,"clipPath",2),Nt(5,"rect",3),_t()()()),i&2&&(Te(r.getClassNames()),Kt("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(),Kt("clip-path",r.pathId),$(3),q("id",r.pathId))},encapsulation:2})}return n})();var ff=(()=>{class n extends hr{pathId;ngOnInit(){this.pathId="url(#"+Le()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275cmp=sn({type:n,selectors:[["WindowMinimizeIcon"]],features:[dt],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0ZM6.368 7.952C6.44137 7.98326 6.52025 7.99958 6.6 8H9.8C9.95913 8 10.1117 7.93678 10.2243 7.82426C10.3368 7.71174 10.4 7.55913 10.4 7.4C10.4 7.24087 10.3368 7.08826 10.2243 6.97574C10.1117 6.86321 9.95913 6.8 9.8 6.8H8.048L10.624 4.224C10.73 4.11026 10.7877 3.95982 10.7849 3.80438C10.7822 3.64894 10.7192 3.50063 10.6093 3.3907C10.4994 3.28077 10.3511 3.2178 10.1956 3.21506C10.0402 3.21232 9.88974 3.27002 9.776 3.376L7.2 5.952V4.2C7.2 4.04087 7.13679 3.88826 7.02426 3.77574C6.91174 3.66321 6.75913 3.6 6.6 3.6C6.44087 3.6 6.28826 3.66321 6.17574 3.77574C6.06321 3.88826 6 4.04087 6 4.2V7.4C6.00042 7.47975 6.01674 7.55862 6.048 7.632C6.07656 7.70442 6.11971 7.7702 6.17475 7.82524C6.2298 7.88029 6.29558 7.92344 6.368 7.952ZM1.4 8.80005H3.8C4.17066 8.80215 4.52553 8.95032 4.78763 9.21242C5.04973 9.47452 5.1979 9.82939 5.2 10.2V12.6C5.1979 12.9707 5.04973 13.3256 4.78763 13.5877C4.52553 13.8498 4.17066 13.9979 3.8 14H1.4C1.02934 13.9979 0.674468 13.8498 0.412371 13.5877C0.150274 13.3256 0.00210008 12.9707 0 12.6V10.2C0.00210008 9.82939 0.150274 9.47452 0.412371 9.21242C0.674468 8.95032 1.02934 8.80215 1.4 8.80005ZM3.94142 12.7415C3.97893 12.704 4 12.6531 4 12.6V10.2C4 10.147 3.97893 10.0961 3.94142 10.0586C3.90391 10.0211 3.85304 10 3.8 10H1.4C1.34696 10 1.29609 10.0211 1.25858 10.0586C1.22107 10.0961 1.2 10.147 1.2 10.2V12.6C1.2 12.6531 1.22107 12.704 1.25858 12.7415C1.29609 12.779 1.34696 12.8 1.4 12.8H3.8C3.85304 12.8 3.90391 12.779 3.94142 12.7415Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){i&1&&(nr(),ft(0,"svg",0)(1,"g"),Nt(2,"path",1),_t(),ft(3,"defs")(4,"clipPath",2),Nt(5,"rect",3),_t()()()),i&2&&(Te(r.getClassNames()),Kt("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(),Kt("clip-path",r.pathId),$(3),q("id",r.pathId))},encapsulation:2})}return n})();var mf=(()=>{class n extends cn{pFocusTrapDisabled=!1;platformId=ie(qu);document=ie(Ju);firstHiddenFocusableElement;lastHiddenFocusableElement;ngOnInit(){super.ngOnInit(),li(this.platformId)&&!this.pFocusTrapDisabled&&!this.firstHiddenFocusableElement&&!this.lastHiddenFocusableElement&&this.createHiddenFocusableElements()}ngOnChanges(e){super.ngOnChanges(e),e.pFocusTrapDisabled&&li(this.platformId)&&(e.pFocusTrapDisabled.currentValue?this.removeHiddenFocusableElements():this.createHiddenFocusableElements())}removeHiddenFocusableElements(){this.firstHiddenFocusableElement&&this.firstHiddenFocusableElement.parentNode&&this.firstHiddenFocusableElement.parentNode.removeChild(this.firstHiddenFocusableElement),this.lastHiddenFocusableElement&&this.lastHiddenFocusableElement.parentNode&&this.lastHiddenFocusableElement.parentNode.removeChild(this.lastHiddenFocusableElement)}getComputedSelector(e){return`:not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])${e??""}`}createHiddenFocusableElements(){let e="0",i=r=>Tc("span",{class:"p-hidden-accessible p-hidden-focusable",tabindex:e,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:r?.bind(this)});this.firstHiddenFocusableElement=i(this.onFirstHiddenElementFocus),this.lastHiddenFocusableElement=i(this.onLastHiddenElementFocus),this.firstHiddenFocusableElement.setAttribute("data-pc-section","firstfocusableelement"),this.lastHiddenFocusableElement.setAttribute("data-pc-section","lastfocusableelement"),this.el.nativeElement.prepend(this.firstHiddenFocusableElement),this.el.nativeElement.append(this.lastHiddenFocusableElement)}onFirstHiddenElementFocus(e){let{currentTarget:i,relatedTarget:r}=e,o=r===this.lastHiddenFocusableElement||!this.el.nativeElement?.contains(r)?bc(i.parentElement,":not(.p-hidden-focusable)"):this.lastHiddenFocusableElement;ao(o)}onLastHiddenElementFocus(e){let{currentTarget:i,relatedTarget:r}=e,o=r===this.firstHiddenFocusableElement||!this.el.nativeElement?.contains(r)?Ac(i.parentElement,":not(.p-hidden-focusable)"):this.firstHiddenFocusableElement;ao(o)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275dir=xt({type:n,selectors:[["","pFocusTrap",""]],inputs:{pFocusTrapDisabled:[2,"pFocusTrapDisabled","pFocusTrapDisabled",at]},features:[on,dt,rn]})}return n})();var gf=class n{static isArray(t,e=!0){return Array.isArray(t)&&(e||t.length!==0)}static isObject(t,e=!0){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&(e||Object.keys(t).length!==0)}static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Array.isArray(t),r=Array.isArray(e),o,a,c;if(i&&r){if(a=t.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!this.equalsByValue(t[o],e[o]))return!1;return!0}if(i!=r)return!1;var h=this.isDate(t),f=this.isDate(e);if(h!=f)return!1;if(h&&f)return t.getTime()==e.getTime();var m=t instanceof RegExp,E=e instanceof RegExp;if(m!=E)return!1;if(m&&E)return t.toString()==e.toString();var b=Object.keys(t);if(a=b.length,a!==Object.keys(e).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,b[o]))return!1;for(o=a;o--!==0;)if(c=b[o],!this.equalsByValue(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(e.indexOf(".")==-1)return t[e];{let i=e.split("."),r=t;for(let o=0,a=i.length;o<a;++o){if(r==null)return null;r=r[i[o]]}return r}}else return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){let r;t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let o=!1;for(let a=0;a<i.length;a++)if(this.findIndexInList(i[a],r)>e){i.splice(a,0,t),o=!0;break}o||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e){for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}}return i}static contains(t,e){if(t!=null&&e&&e.length){for(let i of e)if(this.equals(t,i))return!0}return!1}static removeAccents(t){return t&&(t=t.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),t}static isDate(t){return Object.prototype.toString.call(t)==="[object Date]"}static isEmpty(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!this.isDate(t)&&typeof t=="object"&&Object.keys(t).length===0}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let o=-1,a=this.isEmpty(t),c=this.isEmpty(e);return a&&c?o=0:a?o=r:c?o=-r:typeof t=="string"&&typeof e=="string"?o=t.localeCompare(e,i,{numeric:!0}):o=t<e?-1:t>e?1:0,o}static sort(t,e,i=1,r,o=1){let a=n.compare(t,e,r,i),c=i;return(n.isEmpty(t)||n.isEmpty(e))&&(c=o===1?i:o),c*a}static merge(t,e){if(!(t==null&&e==null)){{if((t==null||typeof t=="object")&&(e==null||typeof e=="object"))return ht(ht({},t||{}),e||{});if((t==null||typeof t=="string")&&(e==null||typeof e=="string"))return[t||"",e||""].join(" ")}return e||t}}static isPrintableCharacter(t=""){return this.isNotEmpty(t)&&t.length===1&&t.match(/\S| /)}static getItemValue(t,...e){return this.isFunction(t)?t(...e):t}static findLastIndex(t,e){let i=-1;if(this.isNotEmpty(t))try{i=t.findLastIndex(e)}catch{i=t.lastIndexOf([...t].reverse().find(e))}return i}static findLast(t,e){let i;if(this.isNotEmpty(t))try{i=t.findLast(e)}catch{i=[...t].reverse().find(e)}return i}static deepEquals(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Array.isArray(t),r=Array.isArray(e),o,a,c;if(i&&r){if(a=t.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!this.deepEquals(t[o],e[o]))return!1;return!0}if(i!=r)return!1;var h=t instanceof Date,f=e instanceof Date;if(h!=f)return!1;if(h&&f)return t.getTime()==e.getTime();var m=t instanceof RegExp,E=e instanceof RegExp;if(m!=E)return!1;if(m&&E)return t.toString()==e.toString();var b=Object.keys(t);if(a=b.length,a!==Object.keys(e).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,b[o]))return!1;for(o=a;o--!==0;)if(c=b[o],!this.deepEquals(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}static minifyCSS(t){return t&&t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}static toFlatCase(t){return this.isString(t)?t.replace(/(-|_)/g,"").toLowerCase():t}static isString(t,e=!0){return typeof t=="string"&&(e||t!=="")}};function Fg(){let n=[],t=(o,a)=>{let c=n.length>0?n[n.length-1]:{key:o,value:a},h=c.value+(c.key===o?0:a)+2;return n.push({key:o,value:h}),h},e=o=>{n=n.filter(a=>a.value!==o)},i=()=>n.length>0?n[n.length-1].value:0,r=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:r,set:(o,a,c)=>{a&&(a.style.zIndex=String(t(o,c)))},clear:o=>{o&&(e(r(o)),o.style.zIndex="")},getCurrent:()=>i()}}var kl=Fg();var Og=({dt:n})=>`
.p-dialog {
    max-height: 90%;
    transform: scale(1);
    border-radius: ${n("dialog.border.radius")};
    box-shadow: ${n("dialog.shadow")};
    background: ${n("dialog.background")};
    border: 1px solid ${n("dialog.border.color")};
    color: ${n("dialog.color")};
    display: flex;
    flex-direction: column;
    pointer-events: auto
}

.p-dialog-content {
    overflow-y: auto;
    padding: ${n("dialog.content.padding")};
}

.p-dialog-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    padding: ${n("dialog.header.padding")};
}

.p-dialog-title {
    font-weight: ${n("dialog.title.font.weight")};
    font-size: ${n("dialog.title.font.size")};
}

.p-dialog-footer {
    flex-shrink: 0;
    padding: ${n("dialog.footer.padding")};
    display: flex;
    justify-content: flex-end;
    gap: ${n("dialog.footer.gap")};
}

.p-dialog-header-actions {
    display: flex;
    align-items: center;
    gap: ${n("dialog.header.gap")};
}

.p-dialog-enter-active {
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}

.p-dialog-leave-active {
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.p-dialog-enter-from,
.p-dialog-leave-to {
    opacity: 0;
    transform: scale(0.7);
}

.p-dialog-top .p-dialog,
.p-dialog-bottom .p-dialog,
.p-dialog-left .p-dialog,
.p-dialog-right .p-dialog,
.p-dialog-topleft .p-dialog,
.p-dialog-topright .p-dialog,
.p-dialog-bottomleft .p-dialog,
.p-dialog-bottomright .p-dialog {
    margin: 0.75rem;
    transform: translate3d(0px, 0px, 0px);
}

.p-dialog-top .p-dialog-enter-active,
.p-dialog-top .p-dialog-leave-active,
.p-dialog-bottom .p-dialog-enter-active,
.p-dialog-bottom .p-dialog-leave-active,
.p-dialog-left .p-dialog-enter-active,
.p-dialog-left .p-dialog-leave-active,
.p-dialog-right .p-dialog-enter-active,
.p-dialog-right .p-dialog-leave-active,
.p-dialog-topleft .p-dialog-enter-active,
.p-dialog-topleft .p-dialog-leave-active,
.p-dialog-topright .p-dialog-enter-active,
.p-dialog-topright .p-dialog-leave-active,
.p-dialog-bottomleft .p-dialog-enter-active,
.p-dialog-bottomleft .p-dialog-leave-active,
.p-dialog-bottomright .p-dialog-enter-active,
.p-dialog-bottomright .p-dialog-leave-active {
    transition: all 0.3s ease-out;
}

.p-dialog-top .p-dialog-enter-from,
.p-dialog-top .p-dialog-leave-to {
    transform: translate3d(0px, -100%, 0px);
}

.p-dialog-bottom .p-dialog-enter-from,
.p-dialog-bottom .p-dialog-leave-to {
    transform: translate3d(0px, 100%, 0px);
}

.p-dialog-left .p-dialog-enter-from,
.p-dialog-left .p-dialog-leave-to,
.p-dialog-topleft .p-dialog-enter-from,
.p-dialog-topleft .p-dialog-leave-to,
.p-dialog-bottomleft .p-dialog-enter-from,
.p-dialog-bottomleft .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}

.p-dialog-right .p-dialog-enter-from,
.p-dialog-right .p-dialog-leave-to,
.p-dialog-topright .p-dialog-enter-from,
.p-dialog-topright .p-dialog-leave-to,
.p-dialog-bottomright .p-dialog-enter-from,
.p-dialog-bottomright .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

.p-dialog-left:dir(rtl) .p-dialog-enter-from,
.p-dialog-left:dir(rtl) .p-dialog-leave-to,
.p-dialog-topleft:dir(rtl) .p-dialog-enter-from,
.p-dialog-topleft:dir(rtl) .p-dialog-leave-to,
.p-dialog-bottomleft:dir(rtl) .p-dialog-enter-from,
.p-dialog-bottomleft:dir(rtl) .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

.p-dialog-right:dir(rtl) .p-dialog-enter-from,
.p-dialog-right:dir(rtl) .p-dialog-leave-to,
.p-dialog-topright:dir(rtl) .p-dialog-enter-from,
.p-dialog-topright:dir(rtl) .p-dialog-leave-to,
.p-dialog-bottomright:dir(rtl) .p-dialog-enter-from,
.p-dialog-bottomright:dir(rtl) .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}

.p-dialog-maximized {
    width: 100vw !important;
    height: 100vh !important;
    top: 0px !important;
    left: 0px !important;
    max-height: 100%;
    height: 100%;
    border-radius: 0;
}

.p-dialog-maximized .p-dialog-content {
    flex-grow: 1;
}

.p-overlay-mask:dir(rtl) {
    flex-direction: row-reverse;
}

/* For PrimeNG */

.p-dialog .p-resizable-handle {
    position: absolute;
    font-size: 0.1px;
    display: block;
    cursor: se-resize;
    width: 12px;
    height: 12px;
    right: 1px;
    bottom: 1px;
}

.p-confirm-dialog .p-dialog-content {
    display: flex;
    align-items: center;
}
`,Lg={mask:({instance:n})=>({position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:n.position==="left"||n.position==="topleft"||n.position==="bottomleft"?"flex-start":n.position==="right"||n.position==="topright"||n.position==="bottomright"?"flex-end":"center",alignItems:n.position==="top"||n.position==="topleft"||n.position==="topright"?"flex-start":n.position==="bottom"||n.position==="bottomleft"||n.position==="bottomright"?"flex-end":"center",pointerEvents:n.modal?"auto":"none"}),root:{display:"flex",flexDirection:"column",pointerEvents:"auto"}},Bg={mask:({instance:n})=>{let e=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(i=>i===n.position);return{"p-dialog-mask":!0,"p-overlay-mask p-overlay-mask-enter":n.modal,[`p-dialog-${e}`]:e}},root:({instance:n})=>({"p-dialog p-component":!0,"p-dialog-maximized":n.maximizable&&n.maximized}),header:"p-dialog-header",title:"p-dialog-title",resizeHandle:"p-resizable-handle",headerActions:"p-dialog-header-actions",pcMaximizeButton:"p-dialog-maximize-button",pcCloseButton:"p-dialog-close-button",content:"p-dialog-content",footer:"p-dialog-footer"},_f=(()=>{class n extends cr{name="dialog";theme=Og;classes=Bg;inlineStyles=Lg;static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275prov=ni({token:n,factory:n.\u0275fac})}return n})();var qg=["header"],yf=["content"],vf=["footer"],zg=["closeicon"],Ug=["maximizeicon"],Gg=["minimizeicon"],$g=["headless"],jg=["titlebar"],Kg=["*",[["p-footer"]]],Hg=["*","p-footer"],Qg=(n,t,e)=>({position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex","justify-content":n,"align-items":t,"pointer-events":e}),Wg=n=>({"p-dialog p-component":!0,"p-dialog-maximized":n}),Jg=()=>({display:"flex","flex-direction":"column","pointer-events":"auto"}),Xg=(n,t)=>({transform:n,transition:t}),Yg=n=>({value:"visible",params:n});function Zg(n,t){n&1&&oi(0)}function t_(n,t){if(n&1&&(an(0),st(1,Zg,1,0,"ng-container",11),ln()),n&2){let e=X(3);$(),q("ngTemplateOutlet",e._headlessTemplate||e.headlessTemplate||e.headlessT)}}function e_(n,t){if(n&1){let e=un();ft(0,"div",19),qt("mousedown",function(r){re(e);let o=X(4);return se(o.initResize(r))}),_t()}if(n&2){let e=X(4);q("ngClass",e.cx("resizeHandle"))}}function n_(n,t){if(n&1&&(ft(0,"span",20),$u(1),_t()),n&2){let e=X(4);q("id",e.ariaLabelledBy)("ngClass",e.cx("title")),$(),ju(e.header)}}function i_(n,t){n&1&&oi(0)}function r_(n,t){if(n&1&&Nt(0,"span",15),n&2){let e=X(5);q("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function s_(n,t){n&1&&Nt(0,"WindowMaximizeIcon")}function o_(n,t){n&1&&Nt(0,"WindowMinimizeIcon")}function a_(n,t){if(n&1&&(an(0),st(1,s_,1,0,"WindowMaximizeIcon",22)(2,o_,1,0,"WindowMinimizeIcon",22),ln()),n&2){let e=X(5);$(),q("ngIf",!e.maximized&&!e._maximizeiconTemplate&&!e.maximizeIconTemplate&&!e.maximizeIconT),$(),q("ngIf",e.maximized&&!e._minimizeiconTemplate&&!e.minimizeIconTemplate&&!e.minimizeIconT)}}function l_(n,t){}function u_(n,t){n&1&&st(0,l_,0,0,"ng-template")}function c_(n,t){if(n&1&&(an(0),st(1,u_,1,0,null,11),ln()),n&2){let e=X(5);$(),q("ngTemplateOutlet",e._maximizeiconTemplate||e.maximizeIconTemplate||e.maximizeIconT)}}function h_(n,t){}function d_(n,t){n&1&&st(0,h_,0,0,"ng-template")}function f_(n,t){if(n&1&&(an(0),st(1,d_,1,0,null,11),ln()),n&2){let e=X(5);$(),q("ngTemplateOutlet",e._minimizeiconTemplate||e.minimizeIconTemplate||e.minimizeIconT)}}function p_(n,t){if(n&1){let e=un();ft(0,"p-button",21),qt("onClick",function(){re(e);let r=X(4);return se(r.maximize())})("keydown.enter",function(){re(e);let r=X(4);return se(r.maximize())}),st(1,r_,1,1,"span",18)(2,a_,3,2,"ng-container",22)(3,c_,2,1,"ng-container",22)(4,f_,2,1,"ng-container",22),_t()}if(n&2){let e=X(4);q("styleClass",e.cx("pcMaximizeButton"))("tabindex",e.maximizable?"0":"-1")("ariaLabel",e.maximizeLabel)("buttonProps",e.maximizeButtonProps),$(),q("ngIf",e.maximizeIcon&&!e._maximizeiconTemplate&&!e._minimizeiconTemplate),$(),q("ngIf",!e.maximizeIcon&&!(e.maximizeButtonProps!=null&&e.maximizeButtonProps.icon)),$(),q("ngIf",!e.maximized),$(),q("ngIf",e.maximized)}}function m_(n,t){if(n&1&&Nt(0,"span",15),n&2){let e=X(7);q("ngClass",e.closeIcon)}}function g_(n,t){n&1&&Nt(0,"TimesIcon")}function __(n,t){if(n&1&&(an(0),st(1,m_,1,1,"span",18)(2,g_,1,0,"TimesIcon",22),ln()),n&2){let e=X(6);$(),q("ngIf",e.closeIcon),$(),q("ngIf",!e.closeIcon)}}function y_(n,t){}function v_(n,t){n&1&&st(0,y_,0,0,"ng-template")}function w_(n,t){if(n&1&&(ft(0,"span"),st(1,v_,1,0,null,11),_t()),n&2){let e=X(6);$(),q("ngTemplateOutlet",e._closeiconTemplate||e.closeIconTemplate||e.closeIconT)}}function I_(n,t){if(n&1&&st(0,__,3,2,"ng-container",22)(1,w_,2,1,"span",22),n&2){let e=X(5);q("ngIf",!e._closeiconTemplate&&!e.closeIconTemplate&&!e.closeIconT&&!(e.closeButtonProps!=null&&e.closeButtonProps.icon)),$(),q("ngIf",e._closeiconTemplate||e.closeIconTemplate||e.closeIconT)}}function E_(n,t){if(n&1){let e=un();ft(0,"p-button",23),qt("onClick",function(r){re(e);let o=X(4);return se(o.close(r))})("keydown.enter",function(r){re(e);let o=X(4);return se(o.close(r))}),st(1,I_,2,2,"ng-template",null,4,Js),_t()}if(n&2){let e=X(4);q("styleClass",e.cx("pcCloseButton"))("ariaLabel",e.closeAriaLabel)("tabindex",e.closeTabindex)("buttonProps",e.closeButtonProps)}}function T_(n,t){n&1&&oi(0)}function b_(n,t){n&1&&oi(0)}function A_(n,t){if(n&1&&(ft(0,"div",15,5),Qs(2,1),st(3,b_,1,0,"ng-container",11),_t()),n&2){let e=X(4);q("ngClass",e.cx("footer")),$(3),q("ngTemplateOutlet",e._footerTemplate||e.footerTemplate||e.footerT)}}function C_(n,t){if(n&1){let e=un();st(0,e_,1,1,"div",12),ft(1,"div",13,2),qt("mousedown",function(r){re(e);let o=X(3);return se(o.initDrag(r))}),st(3,n_,2,3,"span",14)(4,i_,1,0,"ng-container",11),ft(5,"div",15),st(6,p_,5,8,"p-button",16)(7,E_,3,4,"p-button",17),_t()(),ft(8,"div",7,3),Qs(10),st(11,T_,1,0,"ng-container",11),_t(),st(12,A_,4,2,"div",18)}if(n&2){let e=X(3);q("ngIf",e.resizable),$(),q("ngClass",e.cx("header")),$(2),q("ngIf",!e._headerTemplate&&!e.headerTemplate&&!e.headerT),$(),q("ngTemplateOutlet",e._headerTemplate||e.headerTemplate||e.headerT),$(),q("ngClass",e.cx("headerActions")),$(),q("ngIf",e.maximizable),$(),q("ngIf",e.closable),$(),Te(e.contentStyleClass),q("ngClass",e.cx("content"))("ngStyle",e.contentStyle),Kt("data-pc-section","content"),$(3),q("ngTemplateOutlet",e._contentTemplate||e.contentTemplate||e.contentT),$(),q("ngIf",e._footerTemplate||e.footerTemplate||e.footerT)}}function V_(n,t){if(n&1){let e=un();ft(0,"div",9,0),qt("@animation.start",function(r){re(e);let o=X(2);return se(o.onAnimationStart(r))})("@animation.done",function(r){re(e);let o=X(2);return se(o.onAnimationEnd(r))}),st(2,t_,2,1,"ng-container",10)(3,C_,13,14,"ng-template",null,1,Js),_t()}if(n&2){let e=Gu(4),i=X(2);Hs(i.style),Te(i.styleClass),q("ngClass",Ws(13,Wg,i.maximizable&&i.maximized))("ngStyle",Ku(15,Jg))("pFocusTrapDisabled",i.focusTrap===!1)("@animation",Ws(19,Yg,Hu(16,Xg,i.transformOptions,i.transitionOptions))),Kt("role",i.role)("aria-labelledby",i.ariaLabelledBy)("aria-modal",!0),$(2),q("ngIf",i._headlessTemplate||i.headlessTemplate||i.headlessT)("ngIfElse",e)}}function x_(n,t){if(n&1&&(ft(0,"div",7),st(1,V_,5,21,"div",8),_t()),n&2){let e=X();Hs(e.maskStyle),Te(e.maskStyleClass),q("ngClass",e.maskClass)("ngStyle",Qu(7,Qg,e.position==="left"||e.position==="topleft"||e.position==="bottomleft"?"flex-start":e.position==="right"||e.position==="topright"||e.position==="bottomright"?"flex-end":"center",e.position==="top"||e.position==="topleft"||e.position==="topright"?"flex-start":e.position==="bottom"||e.position==="bottomleft"||e.position==="bottomright"?"flex-end":"center",e.modal?"auto":"none")),$(),q("ngIf",e.visible)}}var D_=eo([Zs({transform:"{{transform}}",opacity:0}),Ys("{{transition}}")]),S_=eo([Ys("{{transition}}",Zs({transform:"{{transform}}",opacity:0}))]),R_=(()=>{class n extends cn{header;draggable=!0;resizable=!0;get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}contentStyle;contentStyleClass;modal=!1;closeOnEscape=!0;dismissableMask=!1;rtl=!1;closable=!0;get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}appendTo;breakpoints;styleClass;maskStyleClass;maskStyle;showHeader=!0;get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}blockScroll=!1;autoZIndex=!0;baseZIndex=0;minX=0;minY=0;focusOnShow=!0;maximizable=!1;keepInViewport=!0;focusTrap=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";closeIcon;closeAriaLabel;closeTabindex="0";minimizeIcon;maximizeIcon;closeButtonProps={severity:"secondary",text:!0,rounded:!0};maximizeButtonProps={severity:"secondary",text:!0,rounded:!0};get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style=ht({},e),this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}role="dialog";onShow=new Vt;onHide=new Vt;visibleChange=new Vt;onResizeInit=new Vt;onResizeEnd=new Vt;onDragEnd=new Vt;onMaximize=new Vt;headerViewChild;contentViewChild;footerViewChild;headerTemplate;contentTemplate;footerTemplate;closeIconTemplate;maximizeIconTemplate;minimizeIconTemplate;headlessTemplate;_headerTemplate;_contentTemplate;_footerTemplate;_closeiconTemplate;_maximizeiconTemplate;_minimizeiconTemplate;_headlessTemplate;_visible=!1;maskVisible;container;wrapper;dragging;ariaLabelledBy=this.getAriaLabelledBy();documentDragListener;documentDragEndListener;resizing;documentResizeListener;documentResizeEndListener;documentEscapeListener;maskClickListener;lastPageX;lastPageY;preventVisibleChangePropagation;maximized;preMaximizeContentHeight;preMaximizeContainerWidth;preMaximizeContainerHeight;preMaximizePageX;preMaximizePageY;id=Le("pn_id_");_style={};_position="center";originalStyle;transformOptions="scale(0.7)";styleElement;window;_componentStyle=ie(_f);headerT;contentT;footerT;closeIconT;maximizeIconT;minimizeIconT;headlessT;get maximizeLabel(){return this.config.getTranslation(Dc.ARIA).maximizeLabel}zone=ie(ir);get maskClass(){let i=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(r=>r===this.position);return{"p-dialog-mask":!0,"p-overlay-mask p-overlay-mask-enter":this.modal||this.dismissableMask,[`p-dialog-${i}`]:i}}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle()}templates;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerT=e.template;break;case"content":this.contentT=e.template;break;case"footer":this.footerT=e.template;break;case"closeicon":this.closeIconT=e.template;break;case"maximizeicon":this.maximizeIconT=e.template;break;case"minimizeicon":this.minimizeIconT=e.template;break;case"headless":this.headlessT=e.template;break;default:this.contentT=e.template;break}})}getAriaLabelledBy(){return this.header!==null?Le("pn_id_")+"_header":null}parseDurationToMilliseconds(e){let i=/([\d\.]+)(ms|s)\b/g,r=0,o;for(;(o=i.exec(e))!==null;){let a=parseFloat(o[1]),c=o[2];c==="ms"?r+=a:c==="s"&&(r+=a*1e3)}if(r!==0)return r}_focus(e){if(e){let i=this.parseDurationToMilliseconds(this.transitionOptions),r=Sc.getFocusableElements(e);if(r&&r.length>0)return this.zone.runOutsideAngular(()=>{setTimeout(()=>r[0].focus(),i||5)}),!0}return!1}focus(e){let i=this._focus(e);i||(i=this._focus(this.footerViewChild?.nativeElement),i||(i=this._focus(this.headerViewChild?.nativeElement),i||this._focus(this.contentViewChild?.nativeElement)))}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&io()}disableModality(){if(this.wrapper){this.dismissableMask&&this.unbindMaskClickListener();let e=document.querySelectorAll(".p-dialog-mask-scrollblocker");this.modal&&e&&e.length==1&&ro(),this.cd.destroyed||this.cd.detectChanges()}}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?io():ro()),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(kl.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(li(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let i in this.breakpoints)e+=`
                        @media screen and (max-width: ${i}) {
                            .p-dialog[${this.id}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[i]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e),Cc(this.styleElement,"nonce",this.config?.csp()?.nonce)}}initDrag(e){ci(e.target,"p-dialog-maximize-icon")||ci(e.target,"p-dialog-header-close-icon")||ci(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",or(this.document.body,"p-unselectable-text"))}onDrag(e){if(this.dragging){let i=oo(this.container),r=lr(this.container),o=e.pageX-this.lastPageX,a=e.pageY-this.lastPageY,c=this.container.getBoundingClientRect(),h=getComputedStyle(this.container),f=parseFloat(h.marginLeft),m=parseFloat(h.marginTop),E=c.left+o-f,b=c.top+a-m,V=so();this.container.style.position="fixed",this.keepInViewport?(E>=this.minX&&E+i<V.width&&(this._style.left=`${E}px`,this.lastPageX=e.pageX,this.container.style.left=`${E}px`),b>=this.minY&&b+r<V.height&&(this._style.top=`${b}px`,this.lastPageY=e.pageY,this.container.style.top=`${b}px`)):(this.lastPageX=e.pageX,this.container.style.left=`${E}px`,this.lastPageY=e.pageY,this.container.style.top=`${b}px`)}}endDrag(e){this.dragging&&(this.dragging=!1,ar(this.document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,or(this.document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let i=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,o=oo(this.container),a=lr(this.container),c=lr(this.contentViewChild?.nativeElement),h=o+i,f=a+r,m=this.container.style.minWidth,E=this.container.style.minHeight,b=this.container.getBoundingClientRect(),V=so();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(h+=i,f+=r),(!m||h>parseInt(m))&&b.left+h<V.width&&(this._style.width=h+"px",this.container.style.width=this._style.width),(!E||f>parseInt(E))&&b.top+f<V.height&&(this.contentViewChild.nativeElement.style.height=c+f-a+"px",this._style.height&&(this._style.height=f+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,ar(this.document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.documentDragListener||this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.document.defaultView,"mousemove",this.onDrag.bind(this))})}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentDragEndListener(){this.documentDragEndListener||this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.document.defaultView,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragEndListener=null)}bindDocumentResizeListeners(){!this.documentResizeListener&&!this.documentResizeEndListener&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.document.defaultView,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.document.defaultView,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",i=>{i.key=="Escape"&&this.close(i)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.wrapper):Ec(this.appendTo,this.wrapper))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container?.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.modal&&this.enableModality(),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&or(this.wrapper,"p-overlay-mask-leave");break}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({}),this.cd.markForCheck();break;case"visible":this.onShow.emit({});break}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(this.document.body.style.removeProperty("--scrollbar;-width"),this.maximized=!1),this.modal&&this.disableModality(),ci(this.document.body,"p-overflow-hidden")&&ar(this.document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&kl.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?ht({},this.originalStyle):{}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle(),super.ngOnDestroy()}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275cmp=sn({type:n,selectors:[["p-dialog"]],contentQueries:function(i,r,o){if(i&1&&(oe(o,qg,4),oe(o,yf,4),oe(o,vf,4),oe(o,zg,4),oe(o,Ug,4),oe(o,Gg,4),oe(o,$g,4),oe(o,xc,4)),i&2){let a;Mt(a=Ft())&&(r._headerTemplate=a.first),Mt(a=Ft())&&(r._contentTemplate=a.first),Mt(a=Ft())&&(r._footerTemplate=a.first),Mt(a=Ft())&&(r._closeiconTemplate=a.first),Mt(a=Ft())&&(r._maximizeiconTemplate=a.first),Mt(a=Ft())&&(r._minimizeiconTemplate=a.first),Mt(a=Ft())&&(r._headlessTemplate=a.first),Mt(a=Ft())&&(r.templates=a)}},viewQuery:function(i,r){if(i&1&&(rr(jg,5),rr(yf,5),rr(vf,5)),i&2){let o;Mt(o=Ft())&&(r.headerViewChild=o.first),Mt(o=Ft())&&(r.contentViewChild=o.first),Mt(o=Ft())&&(r.footerViewChild=o.first)}},inputs:{header:"header",draggable:[2,"draggable","draggable",at],resizable:[2,"resizable","resizable",at],positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:[2,"modal","modal",at],closeOnEscape:[2,"closeOnEscape","closeOnEscape",at],dismissableMask:[2,"dismissableMask","dismissableMask",at],rtl:[2,"rtl","rtl",at],closable:[2,"closable","closable",at],responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",maskStyle:"maskStyle",showHeader:[2,"showHeader","showHeader",at],breakpoint:"breakpoint",blockScroll:[2,"blockScroll","blockScroll",at],autoZIndex:[2,"autoZIndex","autoZIndex",at],baseZIndex:[2,"baseZIndex","baseZIndex",sr],minX:[2,"minX","minX",sr],minY:[2,"minY","minY",sr],focusOnShow:[2,"focusOnShow","focusOnShow",at],maximizable:[2,"maximizable","maximizable",at],keepInViewport:[2,"keepInViewport","keepInViewport",at],focusTrap:[2,"focusTrap","focusTrap",at],transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",closeButtonProps:"closeButtonProps",maximizeButtonProps:"maximizeButtonProps",visible:"visible",style:"style",position:"position",role:"role",headerTemplate:[0,"content","headerTemplate"],contentTemplate:"contentTemplate",footerTemplate:"footerTemplate",closeIconTemplate:"closeIconTemplate",maximizeIconTemplate:"maximizeIconTemplate",minimizeIconTemplate:"minimizeIconTemplate",headlessTemplate:"headlessTemplate"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},features:[ae([_f]),on,dt],ngContentSelectors:Hg,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["titlebar",""],["content",""],["icon",""],["footer",""],[3,"ngClass","class","ngStyle","style",4,"ngIf"],[3,"ngClass","ngStyle"],["pFocusTrap","",3,"class","ngClass","ngStyle","style","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","",3,"ngClass","ngStyle","pFocusTrapDisabled"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["style","z-index: 90;",3,"ngClass","mousedown",4,"ngIf"],[3,"mousedown","ngClass"],[3,"id","ngClass",4,"ngIf"],[3,"ngClass"],[3,"styleClass","tabindex","ariaLabel","buttonProps","onClick","keydown.enter",4,"ngIf"],[3,"styleClass","ariaLabel","tabindex","buttonProps","onClick","keydown.enter",4,"ngIf"],[3,"ngClass",4,"ngIf"],[2,"z-index","90",3,"mousedown","ngClass"],[3,"id","ngClass"],[3,"onClick","keydown.enter","styleClass","tabindex","ariaLabel","buttonProps"],[4,"ngIf"],[3,"onClick","keydown.enter","styleClass","ariaLabel","tabindex","buttonProps"]],template:function(i,r){i&1&&(Uu(Kg),st(0,x_,2,11,"div",6)),i&2&&q("ngIf",r.maskVisible)},dependencies:[ec,Xu,Yu,tc,Zu,Pc,mf,Rc,df,ff,ur],encapsulation:2,data:{animation:[Ic("animation",[to("void => visible",[no(D_)]),to("visible => void",[no(S_)])])]},changeDetection:0})}return n})(),F0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ee({type:n});static \u0275inj=Ie({imports:[R_,ur,ur]})}return n})();var P_=({dt:n})=>`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: ${n("inputtext.color")};
    background: ${n("inputtext.background")};
    padding-block: ${n("inputtext.padding.y")};
    padding-inline: ${n("inputtext.padding.x")};
    border: 1px solid ${n("inputtext.border.color")};
    transition: background ${n("inputtext.transition.duration")}, color ${n("inputtext.transition.duration")}, border-color ${n("inputtext.transition.duration")}, outline-color ${n("inputtext.transition.duration")}, box-shadow ${n("inputtext.transition.duration")};
    appearance: none;
    border-radius: ${n("inputtext.border.radius")};
    outline-color: transparent;
    box-shadow: ${n("inputtext.shadow")};
}

.p-inputtext.ng-invalid.ng-dirty {
    border-color: ${n("inputtext.invalid.border.color")};
}

.p-inputtext:enabled:hover {
    border-color: ${n("inputtext.hover.border.color")};
}

.p-inputtext:enabled:focus {
    border-color: ${n("inputtext.focus.border.color")};
    box-shadow: ${n("inputtext.focus.ring.shadow")};
    outline: ${n("inputtext.focus.ring.width")} ${n("inputtext.focus.ring.style")} ${n("inputtext.focus.ring.color")};
    outline-offset: ${n("inputtext.focus.ring.offset")};
}

.p-inputtext.p-invalid {
    border-color: ${n("inputtext.invalid.border.color")};
}

.p-inputtext.p-variant-filled {
    background: ${n("inputtext.filled.background")};
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: ${n("inputtext.filled.focus.background")};
}

.p-inputtext:disabled {
    opacity: 1;
    background: ${n("inputtext.disabled.background")};
    color: ${n("inputtext.disabled.color")};
}

.p-inputtext::placeholder {
    color: ${n("inputtext.placeholder.color")};
}

.p-inputtext.ng-invalid.ng-dirty::placeholder {
    color: ${n("inputtext.invalid.placeholder.color")};
}

.p-inputtext-sm {
    font-size: ${n("inputtext.sm.font.size")};
    padding-block: ${n("inputtext.sm.padding.y")};
    padding-inline: ${n("inputtext.sm.padding.x")};
}

.p-inputtext-lg {
    font-size: ${n("inputtext.lg.font.size")};
    padding-block: ${n("inputtext.lg.padding.y")};
    padding-inline: ${n("inputtext.lg.padding.x")};
}

.p-inputtext-fluid {
    width: 100%;
}
`,k_={root:({instance:n,props:t})=>["p-inputtext p-component",{"p-filled":n.filled,"p-inputtext-sm":t.size==="small","p-inputtext-lg":t.size==="large","p-invalid":t.invalid,"p-variant-filled":t.variant==="filled","p-inputtext-fluid":t.fluid}]},wf=(()=>{class n extends cr{name="inputtext";theme=P_;classes=k_;static \u0275fac=(()=>{let e;return function(r){return(e||(e=Rt(n)))(r||n)}})();static \u0275prov=ni({token:n,factory:n.\u0275fac})}return n})();var W0=(()=>{class n extends cn{ngModel;variant="outlined";fluid;pSize;filled;_componentStyle=ie(wf);get hasFluid(){let i=this.el.nativeElement.closest("p-fluid");return Vc(this.fluid)?!!i:this.fluid}constructor(e){super(),this.ngModel=e}ngAfterViewInit(){super.ngAfterViewInit(),this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(i){return new(i||n)(tt(Pl,8))};static \u0275dir=xt({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component"],hostVars:14,hostBindings:function(i,r){i&1&&qt("input",function(a){return r.onInput(a)}),i&2&&si("p-filled",r.filled)("p-variant-filled",r.variant==="filled"||r.config.inputStyle()==="filled"||r.config.inputVariant()==="filled")("p-inputtext-fluid",r.hasFluid)("p-inputtext-sm",r.pSize==="small")("p-inputfield-sm",r.pSize==="small")("p-inputtext-lg",r.pSize==="large")("p-inputfield-lg",r.pSize==="large")},inputs:{variant:"variant",fluid:[2,"fluid","fluid",at],pSize:"pSize"},features:[ae([wf]),on,dt]})}return n})(),J0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ee({type:n});static \u0275inj=Ie({})}return n})();export{Pi as a,pv as b,mv as c,gv as d,_v as e,yv as f,vv as g,wv as h,Iv as i,Ev as j,Tv as k,bv as l,Av as m,Cl as n,Gd as o,kd as p,Ye as q,jv as r,Kv as s,Od as t,cf as u,Pl as v,Qv as w,Rg as x,kg as y,Wv as z,gf as A,kl as B,R_ as C,F0 as D,W0 as E,J0 as F};
