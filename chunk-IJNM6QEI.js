import{a as u,c as x,d as o,e as f,f as a,h as c,k as h,l as g,m as y}from"./chunk-42PYOKOM.js";import{ca as m,h as l,ha as S,q as b}from"./chunk-PR746ABQ.js";var d=class{constructor(n){Object.assign(this,n)}},_=class{constructor(n){Object.assign(this,n)}},v=(()=>{class r{constructor(p){this.db=p,this.skills=[],this.__categories=[],this._categories=new b(1),this.categories=()=>this._categories.asObservable(),this.formatSkills=()=>{this.__categories=[];for(let s of this.skills){let t=this.__categories.findIndex(i=>i.title===s.category);t===-1?this.__categories.push(new _({title:s.category,skills:[s]})):(this.__categories[t].skills.push(s),this.__categories[t].skills=this.__categories[t].skills.sort((i,e)=>i.title===e.title?0:i.title<e.title?-1:1))}this.__categories=this.__categories.sort((s,t)=>s.title===t.title?0:s.title<t.title?-1:1),this._categories.next(this.__categories)},this.createSkill=s=>l(this,null,function*(){try{s.id=(yield x(o(this.db,"data","skills","skills"),s)).id,this.skills.push(s),this.formatSkills()}catch(t){console.error(t)}}),this.updateSkill=s=>l(this,null,function*(){try{let t=new d(s);delete t.id,g(a(this.db,"data","skills","skills",s.id),Object.assign({},t)),this.skills[this.skills.findIndex(i=>i.id===s.id)]=s,this.formatSkills()}catch(t){console.error(t)}}),this.deleteSkill=s=>l(this,null,function*(){try{f(a(this.db,"data","skills","skills",s.id)),this.skills.splice(this.skills.findIndex(t=>t.id===s.id),1),this.formatSkills()}catch(t){console.error(t)}}),this.updateCategory=(s,t)=>l(this,null,function*(){try{c(h(o(this.db,"data","skills","skills"),y("category","==",s))).then(i=>l(this,null,function*(){i.docs.forEach(e=>{let k=e.data();k.category=t.title,g(a(this.db,"data","skills","skills",e.id),Object.assign({},k)),this.skills[this.skills.findIndex(I=>I.id===e.id)]=k}),this.formatSkills()}))}catch(i){console.error(i)}}),this.deleteCategory=s=>l(this,null,function*(){try{c(h(o(this.db,"data","skills","skills"),y("category","==",s))).then(t=>l(this,null,function*(){t.docs.forEach(i=>{f(a(this.db,"data","skills","skills",i.id)),this.skills.splice(this.skills.findIndex(e=>e.id===i.id),1)}),this.formatSkills()}))}catch(t){console.error(t)}});try{c(h(o(this.db,"data","skills","skills"))).then(s=>{s.docs.forEach(t=>{let i=new d(t.data());i.id=t.id,this.skills.push(i)}),this.formatSkills()})}catch(s){console.error(s)}}static{this.\u0275fac=function(s){return new(s||r)(S(u))}}static{this.\u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{d as a,_ as b,v as c};
