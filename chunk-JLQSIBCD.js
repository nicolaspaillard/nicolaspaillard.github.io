import{a as J,b as K}from"./chunk-Z4DGPOOH.js";import{a as Q}from"./chunk-Q3WAPXBZ.js";import{a as Y,b as H}from"./chunk-H3DK4KFP.js";import{A as P,F as W,G as $,I as L,o as F,p as R,r as N,s as j,t as z,u as B,w as G,x as O,y as q}from"./chunk-SEJLOZK4.js";import{Ta as x,eb as y,fb as w}from"./chunk-JIESCAZN.js";import{Cb as c,Lb as r,Mb as l,Nb as M,Rb as h,Sb as a,Tb as u,Xc as I,Yc as C,ad as b,cb as s,cc as S,dc as g,h as D,hc as T,ib as f,ic as V,jc as A,ob as v,pa as p,qa as m,ub as _,za as k}from"./chunk-IGXIJTVN.js";function ie(i,E){if(i&1){let n=h();r(0,"div",3)(1,"p-button",4),a("onClick",function(){p(n);let e=u();return m(e.onSectionEdit.emit(e.section))}),l(),r(2,"p-button",5),a("onClick",function(){p(n);let e=u();return m(e.onSectionRemoved.emit(e.section))}),l()()}i&2&&(s(),c("text",!0),s(),c("text",!0))}var U=(()=>{class i{constructor(n){this.authService=n,this.onSectionRemoved=new k,this.onSectionEdit=new k,this.user=null,this.authService.user().subscribe(o=>this.user=o)}static{this.\u0275fac=function(o){return new(o||i)(f(x))}}static{this.\u0275cmp=v({type:i,selectors:[["app-section"]],inputs:{section:"section"},outputs:{onSectionRemoved:"onSectionRemoved",onSectionEdit:"onSectionEdit"},decls:4,vars:2,consts:[[1,"group","card","relative","flex","h-full","items-center","p-10"],["class","absolute right-0 top-0 z-10 transition-opacity group-hover:opacity-100 lg:opacity-0",4,"ngIf"],[1,"m-0"],[1,"absolute","right-0","top-0","z-10","transition-opacity","group-hover:opacity-100","lg:opacity-0"],["icon","pi pi-pencil","size","small",3,"onClick","text"],["icon","pi pi-trash","size","small","severity","danger",3,"onClick","text"]],template:function(o,e){o&1&&(r(0,"div",0),_(1,ie,3,2,"div",1),r(2,"p",2),S(3),l()()),o&2&&(s(),c("ngIf",e.user&&e.user.roles.includes("admin")),s(2),g(e.section.text))},dependencies:[b,C,w,y],encapsulation:2})}}return i})();function oe(i,E){if(i&1){let n=h();r(0,"p-button",10),a("onClick",function(){p(n);let e=u();return m(e.openDialog())}),l()}i&2&&c("text",!0)}function ne(i,E){if(i&1){let n=h();r(0,"app-section",11),a("onSectionEdit",function(){let e=p(n).$implicit,t=u();return m(t.openDialog(e))})("onSectionRemoved",function(){let e=p(n).$implicit,t=u();return m(t.deleteSection(e))}),l()}if(i&2){let n=E.$implicit;c("section",n)}}var Ee=(()=>{class i{constructor(n,o,e){this.authService=n,this.sectionsService=o,this.confirmService=e,this.bubbles=[{icon:"heroMagnifyingGlassSolid",text:"Recherche CDI"},{icon:"heroCakeSolid",text:new Date().getFullYear()-1997+" ans"},{icon:"bootstrapCarFrontFill",text:"Permis B"},{icon:"heroMapPinSolid",text:"Montpellier, France"},{icon:"heroAcademicCapSolid",text:"BTS Syst\xE8mes Num\xE9riques, option Informatique et R\xE9seaux"},{icon:"heroEnvelopeSolid",text:"Contacter par mail",href:""}],this.user=null,this.isDialogSectionShown=!1,this.idEdit="",this.formSection=new z({text:new B("",[R.required])}),this.sections=[],this.openDialog=t=>{if(t){this.idEdit=t.id;let d=new Y(t);delete d.id,this.formSection.setValue(d)}else this.idEdit="",this.formSection.reset();this.isDialogSectionShown=!0},this.createSection=()=>this.sectionsService.createSection(this.formSection.value).then(()=>this.isDialogSectionShown=!1),this.updateSection=()=>{let t=this.formSection.value;t.id=this.idEdit,this.sectionsService.updateSection(t).then(()=>this.isDialogSectionShown=!1)},this.deleteSection=t=>{this.confirmService.confirm({message:`Voulez-vous vraiment supprimer '${t.text}' ?`,accept:()=>D(this,null,function*(){this.sectionsService.deleteSection(t)})})},this.authService.user().subscribe(t=>this.user=t),this.sectionsService.sections().subscribe(t=>this.sections=t)}static{this.\u0275fac=function(o){return new(o||i)(f(x),f(H),f(Q))}}static{this.\u0275cmp=v({type:i,selectors:[["app-about"]],decls:14,vars:10,consts:[[1,"flex","min-h-full","flex-col","justify-center","gap-10","p-10","lg:px-0"],["size","large","class","block text-center","icon","pi pi-plus",3,"text","onClick",4,"ngIf"],[1,"grid","grid-cols-2","gap-10"],[3,"section","onSectionEdit","onSectionRemoved",4,"ngFor","ngForOf"],["contentStyleClass","flex flex-col gap-2",3,"visibleChange","modal","header","dismissableMask","visible"],[1,"flex","flex-col","gap-2","*:flex","*:justify-evenly","*:gap-2","[&>label]:gap-0","[&_label]:flex","[&_label]:w-full","[&_label]:flex-col",3,"formGroup"],["pTextarea","","formControlName","text"],[1,"flex","justify-end","gap-2"],[3,"onClick","text"],[3,"onClick","disabled"],["size","large","icon","pi pi-plus",1,"block","text-center",3,"onClick","text"],[3,"onSectionEdit","onSectionRemoved","section"]],template:function(o,e){o&1&&(r(0,"div",0),_(1,oe,1,1,"p-button",1),r(2,"div",2),_(3,ne,1,1,"app-section",3),l()(),r(4,"p-dialog",4),A("visibleChange",function(d){return V(e.isDialogSectionShown,d)||(e.isDialogSectionShown=d),d}),r(5,"form",5)(6,"label"),S(7," Texte "),M(8,"textarea",6),l()(),r(9,"div",7)(10,"p-button",8),a("onClick",function(){return e.isDialogSectionShown=!1}),S(11,"Annuler"),l(),r(12,"p-button",9),a("onClick",function(){return e.idEdit.length?e.updateSection():e.createSection()}),S(13),l()()()),o&2&&(s(),c("ngIf",e.user&&e.user.roles.includes("admin")),s(2),c("ngForOf",e.sections),s(),c("modal",!0)("header",(e.idEdit.length?"Modifier":"Ajouter")+" une exp\xE9rience")("dismissableMask",!0),T("visible",e.isDialogSectionShown),s(),c("formGroup",e.formSection),s(5),c("text",!0),s(2),c("disabled",!e.formSection.valid),s(),g(e.idEdit.length?"Modifier":"Ajouter"))},dependencies:[b,I,C,U,P,G,F,N,j,O,q,$,W,w,y,L,K,J],encapsulation:2})}}return i})();export{Ee as AboutComponent};
